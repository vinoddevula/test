 * Name                                              DUPLICATE_RECORDS
 - Subclass Information                              
 * Comments                                          -- CPTCode_SDU_00014---
--- CPTCODE_23085 ----
 DATA_RIGHTS: HONEYWELL CONFIDENTIAL & PROPRIETARY
              THIS WORK CONTAINS VALUABLE CONFIDENTIAL AND PROPRIETARY
              INFORMATION. DISCLOSURE, USE OR REPRODUCTION OUTSIDE OF
              HONEYWELL INTERNATIONAL, INC. IS PROHIBITED EXCEPT AS
              AUTHORIZED IN WRITING. THIS UNPUBLISHED WORK IS PROTECTED BY
              THE LAWS OF THE UNITED STATES AND OTHER COUNTRIES. IN THE
              EVENT OF PUBLICATION, THE FOLLOWING NOTICE SHALL APPLY:
              COPR. 2003 HONEYWELL INTERNATIONAL, INC. ALL RIGHTS RESERVED.
-----------------------------------------------------------------------------
-- DATA_RIGHTS: HONEYWELL CONFIDENTIAL AND PROPRIETARY
--              THIS WORK CONTAINS VALUABLE CONFIDENTIAL AND PROPRIETARY
--              INFORMATION. DISCLOSURE, USE OR REPRODUCTION OUTSIDE OF
--              HONEYWELL INTERNATIONAL, INC. IS PROHIBITED EXCEPT AS
--              AUTHORIZED IN WRITING. THIS UNPUBLISHED WORK IS PROTECTED BY
--              THE LAWS OF THE UNITED STATES AND OTHER COUNTRIES. IN THE
--              EVENT OF PUBLICATION, THE FOLLOWING NOTICE SHALL APPLY:
--              COPR. 2010 HONEYWELL INTERNATIONAL, INC. ALL RIGHTS RESERVED.

*********************************************************************************
Modification History:

Name             Date         SCR       Modification
-----------------------------------------------------------------------------
Eswar KC         06/18/2010   4273.00   Anchor(CPTCode_SDU_00014) is added.			
-----------------------------------------------------------------------------

 - Help Book Title                                   
 * Title                                             Duplicate Records
 * Console Window                                    BASE_WINDOW
 * Menu Module                                       corept_menu
 - Initial Menu                                      
 - Defer Required Enforcement                        No
 - Menu Role                                         
 - Mouse Navigation Limit                            Form
 - First Navigation Data Block                       
 - Current Record Visual Attribute Group             
 - Validation Unit                                   Default
 - Interaction Mode                                  Blocking
 - Maximum Query Time                                0
 - Maximum Records Fetched                           0
 - Isolation Mode                                    Read Committed
 * Coordinate System                                 
   ----------
   * Coordinate System                               Real
   * Real Unit                                       Point
   * Default Font Scaling                            Yes
   * Character Cell Height                           14
   * Character Cell Width                            7
   ----------
 - Use 3D Controls                                   Yes
 - Form Horizontal Toolbar Canvas                    
 - Form Vertical Toolbar Canvas                      
 - Direction                                         Default
 * Triggers                                          
   ----------
   * Name                                            WHEN-NEW-FORM-INSTANCE
   - Subclass Information                            
   - Comments                                        
   - Trigger Style                                   PL/SQL
   * Trigger Text                                    


   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
   -- Modification Log:2
   --                    Programmer: Harikrishna
   --                    Date:              03/May/2018
   --                    Purpose: SCR 7790.01: New checkbox "Remove Cost Index" is provided on "Duplicate Records" form
   --                    which will be enabled for only Companyroutes,where user can select to blankout the Cost index value.
   -- **************************************************
-- activate all roles
declare
	v_err varchar2(300);
begin	 	
 	v_err := set_role(:global.allroles);
  if v_err != 'PASSED' then
		-- The roles cannot be activated
		display_alert.one_button('S','Fatal Error',
		'The roles cannot be activated.  Contact the COREPT Administrator.');
		exit_form;
  end if;
end;  

--  Continue
--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
default_value(null,'global.new_gate_ident'); 
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008 
default_value(null,'global.new_customer_ident');
default_value(null,'global.num_to_duplicate');
default_value(null,'global.do_duplicate');
default_value(null,'global.curr_customer_ident');
default_value(null,'global.1st_currident');
default_value(null,'global.2nd_currident');
default_value(null,'global.2nd_curricao');
default_value('T','global.record_type');
default_value('Y','global.geninhouse');
default_value(null,'global.1st_ident');
default_value(null,'global.2nd_ident');
default_value(null,'global.2nd_icao');
default_value(null,'global.new_cycle');
default_value('Y','global.gen_in_house_flag');  -- Fix SCR 7853.01 --Venkat M -- 08-Jun-2018

copy(name_in('global.processing_cycle'),'DUPL.new_cycle');
set_item_property('geninhouse',ENABLED, PROPERTY_FALSE);
set_item_property('geninhouse',visible, PROPERTY_FALSE);		
:select_nrecords := 'Duplicate only the current record and its details.';

--MOD 1
Set_Item_Property('DUPL.REPLACE',VISIBLE,PROPERTY_FALSE);
Set_Item_Property('DUPL.REPLACE',ENABLED,PROPERTY_FALSE);
--Hide_View('Cust_List_Can');-- Commented for SCR 7138--Madhu
--MOD 1

if :global.record_type = 'T' then
	set_item_property('DATATYP',ENABLED, PROPERTY_FALSE);
	set_item_property('DATATYP',visible, PROPERTY_FALSE);
	set_item_property('nrecords_S',ENABLED, PROPERTY_FALSE);
	set_item_property('nrecords_S',visible, PROPERTY_FALSE);	
else
	set_item_property('nrecords_T',ENABLED, PROPERTY_FALSE);
	set_item_property('nrecords_T',visible, PROPERTY_FALSE);	
end if;
--MOD 1

--IF Name_IN('global.replace_block') IN ('AIRPORT_APPROACH', 'AIRPORT_SID','AIRPORT_STAR') OR
--	Name_IN('global.master_block') = 'PL_COMPANY_ROUTE' THEN -- Commented for SCR 7138 --Madhu
	Set_Radio_Button_Property('DUPL.DUP_REP','REPL',ENABLED, PROPERTY_TRUE);
	Set_Radio_Button_Property('DUPL.DUP_REP','REPL',VISIBLE, PROPERTY_TRUE);
--ELSE
--	Set_Radio_Button_Property('DUPL.DUP_REP','REPL',ENABLED, PROPERTY_FALSE);
--	Set_Radio_Button_Property('DUPL.DUP_REP','REPL',VISIBLE, PROPERTY_FALSE); -- Commented for SCR 7138 --Madhu 
--END IF;
--MOD 1
DECLARE
	ln_Rec_Count NUMBER;
	fname	varchar2(100) := get_application_property(CALLING_FORM);	-- Fix SCR 7853 - Venkat M 21-Jun-2018
BEGIN
	ln_Rec_Count := forms_utilities.dup_count_records_fun(Name_In('global.current_table'),globals.g_last_query);
	IF ln_Rec_Count > 1 AND :global.record_type = 'T' and :global.new_dcr_no IS NOT NULL and fname <> 'GATES' THEN
		Set_Radio_Button_Property('DUPL.nrecords_T','ONE',ENABLED, PROPERTY_FALSE);
		:DUPL.nrecords_T := NULL;
	ELSE
		Set_Radio_Button_Property('DUPL.nrecords_T','ONE',ENABLED, PROPERTY_TRUE);
		:DUPL.nrecords_T := 'ONE';
	END IF;
END;


	
if substr(:global.master_block,8) in ('SID','STAR','APPROACH','HELI_SID','HELI_STAR','HELI_APPROACH') then 	
	set_item_property('ident_1st',prompt_text,'New Procedure Ident(Optional): ');
	set_item_property('ident_2nd',prompt_text,'New Airport/Heliport Ident(Optional): ');
	set_item_property('icao_2nd',prompt_text,'New Airport/Heliport Icao(Optional): ');
elsif substr(:global.master_block,8) = 'ENROUTE_AIRWAY' then
	set_item_property('ident_1st',prompt_text,'New Route Ident(Optional): ');
elsif :global.master_block = 'PL_COMPANY_ROUTE' then
	set_item_property('ident_1st',prompt_text,'New Company Route Ident(Optional): ');
	set_item_property('ident_2nd',prompt_text,'New Cost Index(Optional): ');   --Fix SCR 7730.01 - Ashish N - 08-Mar-2018
elsif :global.master_block	= 'PL_TLD_ALTERNATE_DEST' then
	set_item_property('ident_2nd',prompt_text,'New Airport/Fix Ident(Optional): ');
	set_item_property('icao_2nd',prompt_text,'New Airport/Fix Icao(Optional): ');
end if;	

if :global.1st_currident is null then
	set_item_property('ident_1st',ENABLED, PROPERTY_FALSE);
	set_item_property('ident_1st',visible, PROPERTY_FALSE);
else
	set_item_property('ident_1st',visible, PROPERTY_TRUE);
	set_item_property('ident_1st',ENABLED, PROPERTY_TRUE);
end if;
if :global.2nd_currident is null then
	set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);
	set_item_property('ident_2nd',visible, PROPERTY_FALSE);
	set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
	set_item_property('icao_2nd',visible, PROPERTY_FALSE);
else
	set_item_property('ident_2nd',visible, PROPERTY_TRUE);
	set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
	set_item_property('icao_2nd',visible, PROPERTY_TRUE);
	set_item_property('icao_2nd',ENABLED, PROPERTY_TRUE);
		--Start Fix SCR 7730.01 - Ashish N - 08-Mar-2018
	if :global.master_block = 'PL_COMPANY_ROUTE' then
		set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);             
		set_item_property('icao_2nd',visible, PROPERTY_FALSE);
		END IF;
  end if;
      DECLARE
 			 fname	varchar2(100) := get_application_property(CALLING_FORM); 
			BEGIN
  			IF fname = 'COMPANY_ROUTE' THEN   
  				set_item_property('ident_2nd',visible, PROPERTY_TRUE);
					set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
					
	--Begin Fix - SCR 7790.01 -Harikrishna CH - 03 May 2018
	--Added logic to make the checkbox visible&enable to the user ,only when copying Company Route records.
	
					set_item_property('blnk_cost_indx',VISIBLE, PROPERTY_TRUE);
					set_item_property('blnk_cost_indx',ENABLED, PROPERTY_TRUE);
  			ELSE
  				set_item_property('blnk_cost_indx',VISIBLE, PROPERTY_FALSE);
					set_item_property('blnk_cost_indx',ENABLED, PROPERTY_FALSE);
	--End Fix - SCR 7790.01
				END IF;	
			END; 
	--END Fix SCR 7730.01 - Ashish N - 08-Mar-2018

--synchronize;

--Begin Fix SCR 0096 -- Madhu -- 01-Feb-2012
disable_menu_items; 
--End Fix SCR 0096 -- Madhu -- 01-Feb-2012
	
DECLARE
--Begin Fix - SCR 3504 -Eswar KC - 28 Nov,2008
  fname	varchar2(100) := get_application_property(CALLING_FORM);	
--End Fix - SCR 3504 -Eswar KC - 28 Nov,2008 
	group_id      recordgroup;
	col_id        groupcolumn;
	v_group varchar2(50) := 'NEW_CUSTOMER';	
BEGIN
--Begin Fix - SCR 3504 -Eswar KC -28 Nov,2008
	if fname = 'GATES' then
    set_item_property('NEW_GATE_IDENT',visible, PROPERTY_TRUE);	
		set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_TRUE);
	else
	  set_item_property('NEW_GATE_IDENT',visible, PROPERTY_FALSE);
		set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_FALSE);
	end if;
--End Fix - SCR 3504 -Eswar KC -28 Nov,2008 	
	group_id := find_group(v_group);
	if NOT id_null(group_id) then
		DELETE_GROUP(v_group);
	else
		group_id := create_group(v_group);
		col_id := Add_group_column(group_id,'CUST_ID',char_column,3);
	end if;
END;
--Begin Fix SCR 7853.01 --Venkat M -- 08-Jun-2018
DECLARE
  ln_Gen_Flag	VARCHAR2(1);
  ln_Confirm_Copy NUMBER;
  fname	varchar2(100) := get_application_property(CALLING_FORM);
BEGIN
	IF :global.record_type = 'T' THEN
	   ln_Gen_Flag := forms_utilities.Gen_In_House_chk(Name_In('global.current_table'),globals.g_last_query);
     IF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'Y' THEN  -- records copied from Outhouse to Inhouse
     	  :DUPL.GENINOUTHOUSE := 'Y';
     	  SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
     ELSIF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'N' THEN  -- records copied from Outhouse to Outhouse
     	  :DUPL.GENINOUTHOUSE := 'N';
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
     ELSE
  	    :DUPL.GENINOUTHOUSE := 'N';
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
     END IF;	 
   ELSE
     	:DUPL.GENINOUTHOUSE := 'N';  --05-Jul-2018 FINAL
      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
   END IF;
END;
--End Fix SCR 7853.01 --Venkat M -- 08-Jun-2018

   - Fire in Enter-Query Mode                        Yes
   - Execution Hierarchy                             Override
   - Display in 'Keyboard Help'                      No
   - 'Keyboard Help' Text                            
   - Trigger Steps                                   
   ----------
   * Name                                            KEY-EXIT
   - Subclass Information                            
   - Comments                                        
   - Trigger Style                                   PL/SQL
   * Trigger Text                                    

if :global.Status_Window = 'MAXIMIZE' then
	set_window_property('BASE_WINDOW', window_state, MAXIMIZE);
else
	set_window_property('BASE_WINDOW', window_state, NORMAL);
end if;
exit_form();
   - Fire in Enter-Query Mode                        Yes
   - Execution Hierarchy                             Override
   - Display in 'Keyboard Help'                      No
   - 'Keyboard Help' Text                            
   - Trigger Steps                                   
   ----------
   * Name                                            TRIGGER_PITSS_CON_HIDE
   - Subclass Information                            
   - Comments                                        
   - Trigger Style                                   PL/SQL
   * Trigger Text                                    

/*This Form is manipulated with PITSS.CON!*/
null;
   - Fire in Enter-Query Mode                        Yes
   - Execution Hierarchy                             Override
   - Display in 'Keyboard Help'                      No
   - 'Keyboard Help' Text                            
   - Trigger Steps                                   
   ----------
 * Alerts                                            
   ----------
   * Name                                            STOP_ALERT
   - Subclass Information                            
   - Comments                                        
   - Title                                           
   - Message                                         
   - Alert Style                                     Stop
   - Button 1 Label                                  OK
   * Button 2 Label                                  
   - Button 3 Label                                  
   - Default Alert Button                            Button 1
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            CAUTION_ALERT
   - Subclass Information                            
   - Comments                                        
   - Title                                           
   - Message                                         
   * Alert Style                                     Caution
   - Button 1 Label                                  OK
   * Button 2 Label                                  
   - Button 3 Label                                  
   - Default Alert Button                            Button 1
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            NOTE_ALERT
   - Subclass Information                            
   - Comments                                        
   - Title                                           
   - Message                                         
   * Alert Style                                     Note
   - Button 1 Label                                  OK
   * Button 2 Label                                  
   - Button 3 Label                                  
   - Default Alert Button                            Button 1
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            ERROR_MESSAGE
   * Subclass Information                            
     ----------
     * Source File                                   corept_template.fmb
     - Source Path                                   
     - Source Module                                 
     * Source Level                                  
       ----------
       * Source Name                                 COREPT_TEMPLATE
       ----------
       * Source Name                                 ERROR_MESSAGE
       ----------
     ----------
   - Comments                                        
   - Title                                           
   - Message                                         
   - Alert Style                                     Stop
   - Button 1 Label                                  OK
   - Button 2 Label                                  Cancel
   - Button 3 Label                                  
   - Default Alert Button                            Button 1
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            DSP_MSG
   * Subclass Information                            
     ----------
     * Source File                                   corept_template.fmb
     - Source Path                                   
     - Source Module                                 
     * Source Level                                  
       ----------
       * Source Name                                 COREPT_TEMPLATE
       ----------
       * Source Name                                 DSP_MSG
       ----------
     ----------
   - Comments                                        
   - Title                                           
   - Message                                         
   - Alert Style                                     Stop
   - Button 1 Label                                  OK
   - Button 2 Label                                  Cancel
   - Button 3 Label                                  
   - Default Alert Button                            Button 1
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            REP_ALERT
   - Subclass Information                            
   - Comments                                        
   * Title                                           Replace Records
   - Message                                         
   * Alert Style                                     Caution
   * Button 1 Label                                  O.K.
   * Button 2 Label                                  
   - Button 3 Label                                  
   * Default Alert Button                            Button 1
   - Visual Attribute Group                          DEFAULT
   * Foreground Color                                black
   * Background Color                                white
   * Fill Pattern                                    transparent
   - Font                                            
   * Font Name                                       Arial
   * Font Size                                       8
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
 - Attached PL/SQL Libraries                         
 * Blocks                                            
   ----------
   * Name                                            DUPL
   - Subclass Information                            
   - Comments                                        
   - Navigation Style                                Same Record
   - Previous Navigation Data Block                  
   - Next Navigation Data Block                      
   - Current Record Visual Attribute Group           
   - Query Array Size                                0
   - Number of Records Buffered                      0
   - Number of Records Displayed                     1
   - Query All Records                               No
   - Record Orientation                              Vertical
   - Single Record                                   No
   - Database Data Block                             Yes
   - Enforce Primary Key                             No
   - Query Allowed                                   Yes
   - Query Data Source Type                          Table
   - Query Data Source Name                          
   - Query Data Source Columns                       
   - Query Data Source Arguments                     
   - Alias                                           
   - Include REF Item                                No
   - WHERE Clause                                    
   - ORDER BY Clause                                 
   - Optimizer Hint                                  
   - Insert Allowed                                  Yes
   - Update Allowed                                  Yes
   - Locking Mode                                    Automatic
   - Delete Allowed                                  Yes
   - Key Mode                                        Automatic
   - Update Changed Columns Only                     No
   - Enforce Column Security                         No
   - Maximum Query Time                              0
   - Maximum Records Fetched                         0
   - DML Data Target Type                            Table
   - DML Data Target Name                            
   - Insert Procedure Name                           
   - Insert Procedure Result Set Columns             
   - Insert Procedure Arguments                      
   - Update Procedure Name                           
   - Update Procedure Result Set Columns             
   - Update Procedure Arguments                      
   - Delete Procedure Name                           
   - Delete Procedure Result Set Columns             
   - Delete Procedure Arguments                      
   - Lock Procedure Name                             
   - Lock Procedure Result Set Columns               
   - Lock Procedure Arguments                        
   - DML Array Size                                  1
   - Precompute Summaries                            No
   - DML Returning Value                             No
   - Show Scroll Bar                                 No
   - Scroll Bar Canvas                               
   - Scroll Bar Tab Page                             
   - Scroll Bar Orientation                          Vertical
   - Scroll Bar X Position                           0
   - Scroll Bar Y Position                           0
   * Scroll Bar Width                                14
   * Scroll Bar Length                               135
   - Scroll Bar Height                               0
   - Reverse Direction                               No
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Row Banding Frequency                           0
   - Direction                                       Default
   * Triggers                                        
     ----------
     * Name                                          PRE-BLOCK
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

if :message.did = 'N' then
	raise form_trigger_failure;
end if;
     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
     * Name                                          KEY-NXTREC
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

null;
     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
     * Name                                          WHEN-NEW-BLOCK-INSTANCE
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

--Begin Fix SCR 7853.01 --Venkat M -- 08-Jun-2018
DECLARE
  ln_Gen_Flag	VARCHAR2(1);
  ln_Confirm_Copy NUMBER;
  fname	varchar2(100) := get_application_property(CALLING_FORM);
BEGIN
	IF :global.record_type = 'T' THEN
	   ln_Gen_Flag := forms_utilities.Gen_In_House_chk(Name_In('global.current_table'),globals.g_last_query);
	
     IF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'Y' THEN  -- records copied from Outhouse to Inhouse
     	  :DUPL.GENINOUTHOUSE := 'Y';
     	  SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
     ELSIF ln_Gen_Flag = 'N' OR (:DUPL.NRECORDS_T = 'ONE' and ln_Gen_Flag <> 'N' and :global.gen_in_house_flag = 'N') THEN --and :NRECORDS_STHEN
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
     ELSE
  	    --:DUPL.GENINOUTHOUSE := 'Y';
  	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
     END IF;	 
   ELSE
     	  :DUPL.GENINOUTHOUSE := 'N';  --05-Jul-2018  --final
      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
   END IF;
END;
--End Fix SCR 7853.01 --Venkat M -- 08-Jun-2018

     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
   * Items                                           
     ----------
     * Name                                          SELECT_CUSTOMER
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Select Customer From List
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     * Keyboard Navigable                            No
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    223
     * Y Position                                    177
     * Width                                         119
     * Height                                        21
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              white
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

Replace_Cust_Prc;--Fix SCR 5649.01 --Madhu --23-July-2014
Validate_customer;
go_block('CUSTOMER');
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          NEW_CYCLE
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     - Case Restriction                              Mixed
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     * Previous Navigation Item                      NEW_CUSTOMER_IDENT
     - Next Navigation Item                          
     * Data Type                                     Number
     - Data Length Semantics                         Null
     * Maximum Length                                7
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     * List of Values                                PROCESSING_CYCLE
     - List X Position                               0
     - List Y Position                               0
     * Validate from List                            Yes
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    25
     * Y Position                                    193
     * Width                                         83
     * Height                                        17
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        2. Processing Cycle To Copy/Replace For:
     - Prompt Display Style                          First Record
     * Prompt Justification                          Center
     * Prompt Attachment Edge                        Top
     - Prompt Alignment                              Start
     * Prompt Attachment Offset                      4
     * Prompt Alignment Offset                       -12
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                


go_item('CUST_LIST_BLK.CUSTOMER');  -- Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          NEW_CUSTOMER_IDENT
     - Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     * Multi-Line                                    Yes
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     * Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                20000
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     * List of Values                                CUST_LIST
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     * Visible                                       No
     * Canvas                                        
     * Tab Page                                      
     * X Position                                    24
     * Y Position                                    242
     * Width                                         178
     * Height                                        133
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     * Show Vertical Scroll Bar                      Yes
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     9
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        3. Customer Ident(s) To Duplicate For:
(Please enter Customer Id separated by ',' or 
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     * Prompt Attachment Edge                        Top
     - Prompt Alignment                              Start
     * Prompt Attachment Offset                      6
     * Prompt Alignment Offset                       -8
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        WHEN-VALIDATE-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

validate_customer;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          IDENT_1ST
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                10
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    213
     * Y Position                                    285
     * Width                                         83
     * Height                                        17
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     * Prompt Justification                          Center
     * Prompt Attachment Edge                        Top
     - Prompt Alignment                              Start
     * Prompt Attachment Offset                      4
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

-- Start Fix SCR 7481 - Ashish N - 04-JAN-2018
IF get_item_property('DUPL.IDENT_2ND', ENABLED) = 'TRUE' THEN
go_item('DUPL.IDENT_2ND');
else
go_item('DUPL.DUPLICATE');
end if;
-- END Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          IDENT_2ND
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                5
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    213
     * Y Position                                    317
     * Width                                         78
     * Height                                        17
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     * Prompt Justification                          Center
     * Prompt Attachment Edge                        Top
     - Prompt Alignment                              Start
     * Prompt Attachment Offset                      4
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

-- Start Fix SCR 7730 - Ashish N - 08-Mar-2018
IF get_item_property('ICAO_2ND', ENABLED) = 'TRUE' THEN
go_item('DUPL.ICAO_2ND');
else
 IF get_item_property('DUPLICATE', ENABLED) = 'TRUE' THEN	
go_item('DUPL.DUPLICATE');
 ELSE
go_item('DUPL.REPLACE');
 END IF;
END IF;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
       * Name                                        WHEN-VALIDATE-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

--Start Fix scr 7730.01- Ashish N- 21-Mar-2018
DECLARE
fname	varchar2(100) := get_application_property(CALLING_FORM); 	
	
BEGIN
	
	IF fname = 'COMPANY_ROUTE' THEN 
		
		If Nvl(Length(Translate(Ltrim(Rtrim(:dupl.ident_2nd)), ' 0123456789', ' ')),0) > 0 THEN		
	   dsp_msg('Only 0-9 numbers are allowed for Cost Index');
	   raise form_trigger_failure;
    End if;
 END IF;
		
END;
--End Fix scr 7730.01- Ashish N- 21-Mar-2018

 

       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          BLNK_COST_INDX
     * Item Type                                     Check Box
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Label                                         
     - Access Key                                    
     - Implementation Class                          
     * Value when Checked                            Y
     * Value when Unchecked                          N
     * Check Box Mapping of Other Values             Unchecked
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                1
     * Initial Value                                 N
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    380
     * Y Position                                    317
     * Width                                         17
     * Height                                        19
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        Remove Cost Index
     * Prompt Display Style                          All Records
     * Prompt Justification                          Start
     * Prompt Attachment Edge                        Start
     * Prompt Alignment                              Start
     * Prompt Attachment Offset                      2
     * Prompt Alignment Offset                       4
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-CHECKBOX-CHANGED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

IF :DUPL.BLNK_COST_INDX = 'Y' THEN
set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);
:dupl.ident_2nd:=null;
ELSE
set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
END IF;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          ICAO_2ND
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                2
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    213
     * Y Position                                    351
     * Width                                         25
     * Height                                        17
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     * Prompt Justification                          Center
     * Prompt Attachment Edge                        Top
     - Prompt Alignment                              Start
     * Prompt Attachment Offset                      4
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

go_item('DUPL.DUPLICATE');  -- Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          DUP_REP
     * Item Type                                     Radio Group
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Access Key                                    
     * Mapping of Other Values                       D
     - Implementation Class                          
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     - Maximum Length                                30
     * Initial Value                                 D
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     * Canvas                                        MAIN
     * Tab Page                                      
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Foreground Color                              
     - Background Color                              
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-RADIO-CHANGED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
DECLARE
  ln_Xcord	NUMBER:= Get_Item_Property('DUPL.DUPLICATE',X_POS);	
  ln_Ycord  NUMBER:= Get_Item_Property('DUPL.DUPLICATE',Y_POS);
  ln_Alert   NUMBER(3);
  fname	varchar2(100) := get_application_property(CALLING_FORM);
  ln_Rec_Count NUMBER;--7470
  ln_Gen_Flag	VARCHAR2(1);  --SCR 7853
BEGIN
	
	ln_Rec_Count := forms_utilities.dup_count_records_fun(Name_In('global.current_table'),globals.g_last_query); --7470
	
	IF :Dupl.Dup_Rep = 'R' THEN
		   
	   Set_Alert_Property('Rep_Alert',ALERT_MESSAGE_TEXT,'You are going to replace (Delete + Add) the records. Please Choose the correct Processing Cycle/DCR numbers');
	   ln_Alert := Show_Alert('Rep_Alert');
		:Parameter.Rep := 'Y';
		IF Get_Menu_Item_Property(rtrim('Record')||'.'||ltrim('Remove') ,ENABLED) = 'FALSE' THEN
			Set_Menu_Item_Property( rtrim('Record')||'.'||ltrim('Remove') ,ENABLED ,PROPERTY_TRUE);
		END IF;
		Set_Item_Property('DUPL.DUPLICATE',VISIBLE, PROPERTY_FALSE);
		Set_Item_Property('DUPL.DUPLICATE',ENABLED, PROPERTY_FALSE);
		Set_Item_Property('DUPL.REPLACE',VISIBLE, PROPERTY_TRUE);
		Set_Item_Property('DUPL.REPLACE',ENABLED, PROPERTY_TRUE);
		Set_Item_Property('DUPL.REPLACE',X_POS, ln_Xcord);
		Set_Item_Property('DUPL.REPLACE',Y_POS, ln_Ycord);
		--:Dupl.New_Customer_Ident := NULL;
		--Set_Item_Property('DUPL.NEW_CUSTOMER_IDENT',VISIBLE,PROPERTY_FALSE);
		--Set_Item_Property('DUPL.NEW_CUSTOMER_IDENT',ENABLED,PROPERTY_FALSE);
		Set_Item_Property('DUPL.IDENT_1ST',ENABLED, PROPERTY_FALSE);
		Set_Item_Property('DUPL.IDENT_1ST',VISIBLE, PROPERTY_FALSE);
		Set_Item_Property('DUPL.IDENT_2ND',ENABLED, PROPERTY_FALSE);
		Set_Item_Property('DUPL.IDENT_2ND',VISIBLE, PROPERTY_FALSE);
		Set_Item_Property('DUPL.ICAO_2ND',ENABLED, PROPERTY_FALSE);
		Set_Item_Property('DUPL.ICAO_2ND',VISIBLE, PROPERTY_FALSE);
		set_item_property('NEW_GATE_IDENT',visible, PROPERTY_FALSE); --Fix SCR 7138 --Madhu
		set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_FALSE); 
--		Set_Radio_Button_Property('DUPL.NRECORDS_T','ALL',VISIBLE, PROPERTY_FALSE);
--		Set_Radio_Button_Property('DUPL.NRECORDS_T','ALL',ENABLED, PROPERTY_FALSE);
		Set_Item_Property('DUPL.GENINHOUSE',VISIBLE, PROPERTY_FALSE);
		Set_Item_Property('DUPL.GENINHOUSE',ENABLED, PROPERTY_FALSE);		
		Set_Radio_Button_Property('DUPL.DATATYP','STD',VISIBLE, PROPERTY_FALSE);
		Set_Radio_Button_Property('DUPL.DATATYP','STD',ENABLED, PROPERTY_FALSE);	
		
		IF :global.record_type = 'T' THEN
--7470		
			IF ln_Rec_Count > 1 AND :global.new_dcr_no IS NOT NULL AND fname <> 'GATES' THEN --Fix SCR 7853.01 - Venkat M 21-Jun-2018
				:DUPL.NRECORDS_T := NULL;
			ELSE	
		    :DUPL.NRECORDS_T := 'ONE';  
			END IF;
--7470
		   --Begin Fix SCR 7853 - Venkat M 06-Jun-2018
	    ln_Gen_Flag := forms_utilities.Gen_In_House_chk(Name_In('global.current_table'),globals.g_last_query);
	          
      IF fname IN ('AIRPORT','RUNWAY','AIRPORT_WAYPOINT','ENROUTE_WAYPOINT','AIRPORT_NDB','ENROUTE_NDB','VHF') AND fname <> 'GATES' THEN
         IF :DUPL.NRECORDS_T ='ONE' and :global.gen_in_house_flag = 'N' THEN  --current record copying
            :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);         	
         ELSIF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'Y' THEN  -- records copied from Outhouse to Inhouse
     	      :DUPL.GENINOUTHOUSE := 'N';
     	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
         ELSIF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'N' THEN  -- records copied from Outhouse to Outhouse
     	      :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
         ELSE 
  	        :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
         END IF;	 
      ELSE  -- Begin final update
         IF :global.gen_in_house_flag = 'N' THEN   -- only current record
     	      :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
         ELSE  --in all other cases disable the checkbox
         	  :DUPL.GENINOUTHOUSE := 'N';
     	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);   	         	
         END IF;
      END IF;   
       --End Fix SCR 7853 - Venkat M 06-Jun-2018
		ELSE
		    :DUPL.NRECORDS_S := 'ONE';
		    --Begin Fix SCR 7853 - Venkat M 08-Jun-2018
 	      :DUPL.GENINOUTHOUSE := 'N';  -- check can be commented 29-Jun-2018  final
        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
        --End Fix SCR 7853 - Venkat M 08-Jun-2018		    
		END IF;			
		:select_nrecords := 'Replace only the current record and its details.';
		Show_View('Cust_List_Can');
		Go_Item('DUPL.New_Cycle');--Fix SCR 5649.06--Madhu--03-12-2014	
			if fname = 'COMPANY_ROUTE' then  --start Fix SCR 7730 - Ashish N - 08-Mar-2018
		  set_item_property('ident_1st',visible, PROPERTY_FALSE);
	    set_item_property('ident_1st',ENABLED, PROPERTY_FALSE);
	    set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
	  	set_item_property('icao_2nd',visible, PROPERTY_FALSE);
			set_item_property('ident_2nd',visible, PROPERTY_TRUE);
	   	set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
		else
		  set_item_property('ident_2nd',visible, PROPERTY_FALSE);
	    set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);	
	    END IF;
	ELSE
			
		:Parameter.Rep := 'N';
		:Parameter.RML := 'N';
		IF Get_Menu_Item_Property(rtrim('Record')||'.'||ltrim('Remove') ,ENABLED) = 'TRUE' THEN
			Set_Menu_Item_Property( rtrim('Record')||'.'||ltrim('Remove') ,ENABLED ,PROPERTY_FALSE);
		END IF;
		Set_Item_Property('DUPL.DUPLICATE',VISIBLE, PROPERTY_TRUE);
		Set_Item_Property('DUPL.DUPLICATE',ENABLED, PROPERTY_TRUE);
		Set_Item_Property('DUPL.REPLACE',ENABLED, PROPERTY_FALSE);
		Set_Item_Property('DUPL.REPLACE',VISIBLE, PROPERTY_FALSE);
		:select_nrecords := 'Duplicate only the current record and its details.';
		Go_Block('Cust_List_Blk');
		Clear_Block;
		Hide_View('Cust_List_Can');
--		Set_Radio_Button_Property('DUPL.NRECORDS_T','ALL',VISIBLE, PROPERTY_TRUE);
--		Set_Radio_Button_Property('DUPL.NRECORDS_T','ALL',ENABLED, PROPERTY_TRUE);
		Set_Radio_Button_Property('DUPL.DATATYP','STD',VISIBLE, PROPERTY_TRUE);
		Set_Radio_Button_Property('DUPL.DATATYP','STD',ENABLED, PROPERTY_TRUE);		
		--Set_Item_Property('DUPL.NEW_CUSTOMER_IDENT',VISIBLE,PROPERTY_TRUE);
		--Set_Item_Property('DUPL.NEW_CUSTOMER_IDENT',ENABLED,PROPERTY_TRUE);
		IF :global.record_type = 'T' THEN
			--7470		
			IF ln_Rec_Count > 1 AND :global.new_dcr_no IS NOT NULL AND fname <> 'GATES' THEN --Fix SCR 7853.01 - Venkat M 21-Jun-2018
				:DUPL.NRECORDS_T := NULL;
			ELSE	
		    :DUPL.NRECORDS_T := 'ONE';  
			END IF;
--7470 
		   --Begin Fix SCR 7853 - Venkat M 08-Jun-2018
	    ln_Gen_Flag := forms_utilities.Gen_In_House_chk(Name_In('global.current_table'),globals.g_last_query);
	     
      IF fname IN ('AIRPORT','RUNWAY','AIRPORT_WAYPOINT','ENROUTE_WAYPOINT','AIRPORT_NDB','ENROUTE_NDB','VHF') AND fname <> 'GATES' THEN
         IF :DUPL.NRECORDS_T ='ONE' and :global.gen_in_house_flag = 'N' THEN  --current record copying
            :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);         	
         ELSIF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'Y' THEN  -- records copied from Outhouse to Inhouse
     	      :DUPL.GENINOUTHOUSE := 'N';
     	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
         ELSIF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'N' THEN  -- records copied from Outhouse to Outhouse
     	      :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
         ELSE
  	        :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
         END IF;	 
      ELSE  -- Begin final update
         IF :global.gen_in_house_flag = 'N' THEN   -- only current record
     	      :DUPL.GENINOUTHOUSE := 'N';
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	        SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
         ELSE  -- in all other cases disable the checkbox
         	  :DUPL.GENINOUTHOUSE := 'N';
     	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);   	        	
         END IF;
      END IF;    
      --End Fix SCR 7853 - Venkat M 08-Jun-2018		     		   
		ELSE
		    :DUPL.NRECORDS_S := 'ONE';
		    --Begin Fix SCR 7853 - Venkat M 08-Jun-2018
 	      :DUPL.GENINOUTHOUSE := 'N';    --05-Jul-2018
         SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
        --End Fix SCR 7853 - Venkat M 08-Jun-2018		    		    
		END IF;	
		IF (:dupl.nrecords_T = 'ONE') OR (:dupl.nrecords_S = 'ONE') THEN
			IF fname = 'GATES' THEN
					set_item_property('NEW_GATE_IDENT',visible, PROPERTY_TRUE); --Fix SCR 7138 --Madhu
					set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_TRUE);	
			END IF;
			IF :global.1st_currident IS NOT NULL THEN
				Set_Item_Property('DUPL.IDENT_1ST',VISIBLE, PROPERTY_TRUE);
				Set_Item_Property('DUPL.IDENT_1ST',ENABLED, PROPERTY_TRUE);	
				Go_Item('DUPL.IDENT_1ST');
			END IF;
			IF :global.2nd_currident IS NOT NULL THEN
				Set_Item_Property('DUPL.IDENT_2ND',VISIBLE, PROPERTY_TRUE);
				Set_Item_Property('DUPL.IDENT_2ND',ENABLED, PROPERTY_TRUE);
				Set_Item_Property('DUPL.ICAO_2ND',VISIBLE, PROPERTY_TRUE);
				Set_Item_Property('DUPL.ICAO_2ND',ENABLED, PROPERTY_TRUE);
				IF :global.master_block = 'PL_COMPANY_ROUTE' THEN
					Set_Item_Property('DUPL.ICAO_2ND',ENABLED, PROPERTY_FALSE);
					Set_Item_Property('DUPL.ICAO_2ND',VISIBLE, PROPERTY_FALSE);
				END IF;
				IF :global.master_block = 'PL_TLD_ALTERNATE_DEST' THEN
					Go_Item('DUPL.IDENT_2ND');
				END IF;	
			END IF;			
		ELSE
				Set_Item_Property('DUPL.IDENT_1ST',ENABLED, PROPERTY_FALSE);
				Set_Item_Property('DUPL.IDENT_1ST',VISIBLE, PROPERTY_FALSE);
				Set_Item_Property('DUPL.IDENT_2ND',ENABLED, PROPERTY_FALSE);
				Set_Item_Property('DUPL.IDENT_2ND',VISIBLE, PROPERTY_FALSE);
				Set_Item_Property('DUPL.ICAO_2ND',ENABLED, PROPERTY_FALSE);
				Set_Item_Property('DUPL.ICAO_2ND',VISIBLE, PROPERTY_FALSE);
		END IF;
		--Go_Item('DUPL.NEW_CUSTOMER_IDENT');
		Show_View('Cust_List_Can');
		Go_Item('DUPL.New_Cycle');
	END IF;
END;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     * Radio Buttons                                 
       ----------
       * Name                                        DUP
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy
       - Access Key                                  
       * Radio Button Value                          D
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  25
       * Y Position                                  42
       * Width                                       75
       * Height                                      16
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       - Foreground Color                            
       - Background Color                            
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   9
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
       * Name                                        REPL
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Replace
       - Access Key                                  
       * Radio Button Value                          R
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  144
       * Y Position                                  42
       * Width                                       75
       * Height                                      16
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       - Foreground Color                            
       - Background Color                            
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   9
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
     ----------
     * Name                                          NRECORDS_T
     * Item Type                                     Radio Group
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Access Key                                    
     * Mapping of Other Values                       ONE
     - Implementation Class                          
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                3
     * Initial Value                                 ONE
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     * Foreground Color                              black
     * Background Color                              gray20
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-RADIO-CHANGED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

--Begin Fix - SCR 3504 -Eswar KC -28 Nov,2008
DECLARE
  fname	varchar2(100) := get_application_property(CALLING_FORM);
  ln_Xcord	NUMBER:= Get_Item_Property('dupl.duplicate',X_POS);	
  ln_Ycord  NUMBER:= Get_Item_Property('dupl.duplicate',Y_POS);

BEGIN
	if fname = 'GATES' and :dupl.nrecords_T = 'ONE'then
			set_item_property('NEW_GATE_IDENT',visible, PROPERTY_TRUE); --Fix SCR 7138 --Madhu
			set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_TRUE); 
	 else
    set_item_property('NEW_GATE_IDENT',visible, PROPERTY_FALSE);
		set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_FALSE);
	end if;
END;	
--End Fix - SCR 3504 -Eswar KC -28 Nov,2008 

--if :dupl.nrecords_T in ('ALL','SET') then
--Begin Fix SCR 6941 --Madhu -- 07-Mar-2016	

DECLARE
	ln_Rec_Count NUMBER;
  ln_Confirm_Copy NUMBER;
  fname	varchar2(100) := get_application_property(CALLING_FORM);  --Fix SCR 7730 - Ashish N - 08-Mar-2018
  ln_Gen_Flag	VARCHAR2(1);  --SCR 7853
BEGIN
if :dupl.nrecords_T in ('SET') then
	
	ln_Rec_Count := forms_utilities.dup_count_records_fun(Name_In('global.current_table'),globals.g_last_query);
	
	ln_Confirm_Copy := display_alert.more_buttons ( 'S', 'Copy Records Confirmation',
		               'Total Number of Records to be copied are ' || ln_Rec_Count || '. Do you wish to copy the records, Please confirm.', 'Continue', 'Cancel');

	IF ln_Confirm_Copy = 1 THEN
	if fname = 'COMPANY_ROUTE' then  --start Fix SCR 7730 - Ashish N - 08-Mar-2018
		  set_item_property('ident_1st',visible, PROPERTY_FALSE);
	    set_item_property('ident_1st',ENABLED, PROPERTY_FALSE);
	    set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
	  	set_item_property('icao_2nd',visible, PROPERTY_FALSE);
			set_item_property('ident_2nd',visible, PROPERTY_TRUE);
	   	set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);

		else
		  set_item_property('ident_2nd',visible, PROPERTY_FALSE);
	    set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);		
--End Fix SCR 6941 --Madhu -- 07-Mar-2016	
		:dupl.ident_1st := null;  
		:dupl.ident_2nd := null;
		:dupl.icao_2nd := null;
		set_item_property('ident_1st',ENABLED, PROPERTY_FALSE);
		set_item_property('ident_1st',visible, PROPERTY_FALSE);
		set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);
		set_item_property('ident_2nd',visible, PROPERTY_FALSE);
		set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
		set_item_property('icao_2nd',visible, PROPERTY_FALSE);
	end if;
	--End Fix SCR 7730 - Ashish N - 08-Mar-2018
	/*	if :dupl.nrecords_T = 'ALL' then --Commented for SCR 6941
			set_item_property('geninhouse',visible, PROPERTY_TRUE);		
			set_item_property('geninhouse',ENABLED, PROPERTY_TRUE);
			IF :Dupl.Dup_Rep = 'D' THEN
				:select_nrecords := 'Duplicate all the current customer''s tailored records and their details:'||chr(10)||
													' - For all the generated in house records in this table'||chr(10)||
													' - For all the generated in house data and supplier provided data in this table';
			ELSE
				:select_nrecords := 'Replace all the current customer''s tailored records and their details:'||chr(10)||
										' - For all the generated in house records in this table'||chr(10)||
										' - For all the generated in house data and supplier provided data in this table';
			END IF;
		else*/

			set_item_property('geninhouse',ENABLED, PROPERTY_FALSE);
			set_item_property('geninhouse',visible, PROPERTY_FALSE);				
			IF :Dupl.Dup_Rep = 'D' THEN
				:select_nrecords := 'Duplicate the set of queried records and their details.'||chr(10)||
			                    ' - Only records match the last query are going to be copied. Any new-created/updated '||chr(10)||
			                    '    data, which don''t match the last query will not be copied.';
			ELSE
				:select_nrecords := 'Replace the set of queried records and their details.'||chr(10)||
	                  ' - Only records match the last query are going to be copied. Any new-created/updated '||chr(10)||
	                  '    data, which don''t match the last query will not be copied.';
			END IF;
	--	end if;
      
      --Begin Fix SCR 7853 - Venkat M 20-Jun-2018 - final upd
	    ln_Gen_Flag := forms_utilities.Gen_In_House_chk(Name_In('global.current_table'),globals.g_last_query);
       IF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'Y' THEN  -- records copied from Outhouse to Inhouse
     	    --:DUPL.GENINOUTHOUSE := 'Y';  --29-jun-2018
     	    :DUPL.GENINOUTHOUSE := 'N';  --29-jun-2018
     	    SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
       ELSIF ln_Gen_Flag = 'N' and :global.gen_in_house_flag = 'N' THEN  -- records copied from Outhouse to Outhouse
     	    :DUPL.GENINOUTHOUSE := 'N';
  	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
  	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
  	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
       ELSE
       -- till here 20-jun-2018
  	      --:DUPL.GENINOUTHOUSE := 'Y';
  	      :DUPL.GENINOUTHOUSE := 'N';
  	      SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
       END IF;	 
       --End Fix SCR 7853 - Venkat M 06-Jun-2018	    

--Begin Fix SCR 6941 --Madhu -- 07-Mar-2016
	ELSE
	/*	:global.new_customer_ident := null;
		:global.num_to_duplicate := null;
		:global.do_duplicate := 'N';
		:global.1st_ident := null;
		:global.2nd_ident := null;
		:global.2nd_icao := null;
		ERASE('global.replace_block');
		pc3_do_key('exit_form');*/
		:Dupl.NRecords_T := 'ONE';
	END IF;
--End Fix SCR 6941 --Madhu -- 07-Mar-2016
else  --copy current record
	IF :Dupl.Dup_Rep = 'D' THEN	
		:select_nrecords := 'Duplicate only the current record and its details.';
		set_item_property('geninhouse',ENABLED, PROPERTY_FALSE);
		set_item_property('geninhouse',visible, PROPERTY_FALSE);	
		if :global.1st_currident is not null then
			set_item_property('ident_1st',visible, PROPERTY_TRUE);
			set_item_property('ident_1st',ENABLED, PROPERTY_TRUE);	
			go_item('ident_1st');
		end if;
		if :global.2nd_currident is not null then
			set_item_property('ident_2nd',visible, PROPERTY_TRUE);
			set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
			set_item_property('icao_2nd',visible, PROPERTY_TRUE);
			set_item_property('icao_2nd',ENABLED, PROPERTY_TRUE);
				IF :global.master_block = 'PL_COMPANY_ROUTE' THEN
					Set_Item_Property('DUPL.ICAO_2ND',ENABLED, PROPERTY_FALSE);
					Set_Item_Property('DUPL.ICAO_2ND',VISIBLE, PROPERTY_FALSE);
				END IF;
			if :global.master_block = 'PL_TLD_ALTERNATE_DEST' then
				go_item('ident_2nd');
			end if;	
		end if;	
	ELSE
		:select_nrecords := 'Replace only the current record and its details.';
	END IF;
  --Begin Fix SCR 7853 - Venkat M 20-Jun-2018 - final upd
		-- final update, single record logic should be same through out the forms
    IF :global.gen_in_house_flag = 'N'  THEN
  	   --:global.gen_in_house_flag = 'Y' THEN  -- records copied from Outhouse to Inhouse
       :DUPL.GENINOUTHOUSE := 'N';
       SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_TRUE);
       SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',INSERT_ALLOWED,PROPERTY_TRUE);
       SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',UPDATE_ALLOWED,PROPERTY_TRUE);
    ELSE
       :DUPL.GENINOUTHOUSE := 'N';  --29-jun-2018
       SET_ITEM_PROPERTY('DUPL.GENINOUTHOUSE',ENABLED,PROPERTY_FALSE);
    END IF;	 
  --End Fix SCR 7853 - Venkat M 06-Jun-2018	    
	
end if;
END;

       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     * Radio Buttons                                 
       ----------
       * Name                                        ONE
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy Current Record
       - Access Key                                  
       * Radio Button Value                          ONE
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  24
       * Y Position                                  118
       * Width                                       107
       * Height                                      20
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
       * Name                                        SET
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy Displayed Record(s)
       - Access Key                                  
       * Radio Button Value                          SET
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  132
       * Y Position                                  118
       * Width                                       129
       * Height                                      20
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
     ----------
     * Name                                          NRECORDS_S
     * Item Type                                     Radio Group
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Access Key                                    
     * Mapping of Other Values                       ONE
     - Implementation Class                          
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                3
     * Initial Value                                 ONE
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     * Foreground Color                              black
     * Background Color                              gray20
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-RADIO-CHANGED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

--Begin Fix - SCR 3504 -Eswar KC -28 Nov,2008
DECLARE
  fname	varchar2(100) := get_application_property(CALLING_FORM);
BEGIN
	if fname = 'GATES' and :dupl.nrecords_S = 'ONE'then
			set_item_property('NEW_GATE_IDENT',visible, PROPERTY_TRUE); --Fix SCR 7138 --Madhu
			set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_TRUE); 
	 else
    set_item_property('NEW_GATE_IDENT',visible, PROPERTY_FALSE);
		set_item_property('NEW_GATE_IDENT',ENABLED, PROPERTY_FALSE);
	end if;
END;
--End Fix - SCR 3504 -Eswar KC -28 Nov,2008 
--Begin Fix SCR 6941 --Madhu -- 07-Mar-2016
DECLARE
  ln_Rec_Count	NUMBER;
  ln_Confirm_Copy NUMBER;
  fname	varchar2(100) := get_application_property(CALLING_FORM);  --Fix SCR 7730 --Ashish N - 08-Mar-2018
BEGIN
if :dupl.nrecords_S = 'SET' then
	ln_Rec_Count := forms_utilities.dup_count_records_fun(Name_In('global.current_table'),globals.g_last_query);
	
	ln_Confirm_Copy := display_alert.more_buttons ( 'S', 'Copy Records Confirmation',
		               'Total Number of Records to be copied are ' || ln_Rec_Count || '. Do you wish to copy the records, Please confirm.', 'Continue', 'Cancel');
	IF ln_Confirm_Copy = 1 THEN
--End Fix SCR 6941 --Madhu -- 07-Mar-2016
	 --start Fix SCR 7730 --Ashish N - 08-Mar-2018
		 if fname = 'COMPANY_ROUTE' then  
			  set_item_property('ident_2nd',visible, PROPERTY_TRUE);
	   	  set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
		 else
		    set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);
	      set_item_property('ident_2nd',visible, PROPERTY_FALSE);

		    :dupl.ident_1st := null;
		    :dupl.ident_2nd := null;
				:dupl.icao_2nd  := null;
				set_item_property('ident_1st',ENABLED, PROPERTY_FALSE); 
				set_item_property('ident_1st',visible, PROPERTY_FALSE);
				set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);
				set_item_property('ident_2nd',visible, PROPERTY_FALSE);
				set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
				set_item_property('icao_2nd',visible, PROPERTY_FALSE);
		 end if;
 --END Fix SCR 7730 --Ashish N - 08-Mar-2018
		 IF :Dupl.Dup_Rep = 'D' THEN
			  :select_nrecords := 'Duplicate the set of queried records and their details.'||chr(10)||
			                      ' - Only records match the last query are going to be copied. Any new-created/updated '||chr(10)||
			                      '    data, which don''t match the last query will not be copied.';
		 ELSE
			  :select_nrecords := 'Replace the set of queried records and their details.'||chr(10)||
	                          ' - Only records match the last query are going to be copied. Any new-created/updated '||chr(10)||
	                          '    data, which don''t match the last query will not be copied.';
		 END IF;
--Begin Fix SCR 6941 --Madhu -- 07-Mar-2016
	ELSE
		:Dupl.NRecords_S := 'ONE';
	END IF;
--End Fix SCR 6941 --Madhu -- 07-Mar-2016
else
	IF :Dupl.Dup_Rep = 'D' THEN	
		:select_nrecords := 'Duplicate only the current record and its details.';
		if :global.1st_currident is not null then
			set_item_property('ident_1st',visible, PROPERTY_TRUE);
			set_item_property('ident_1st',ENABLED, PROPERTY_TRUE);	
			go_item('ident_1st');
		end if;
			if :global.2nd_currident is not null then
			 --Start Fix SCR 7730 --Ashish N - 08-Mar-2018
	 				IF :global.master_block = 'PL_COMPANY_ROUTE' THEN
						set_item_property('ident_2nd',visible, PROPERTY_TRUE);
						set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
						set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
						set_item_property('icao_2nd',visible, PROPERTY_FALSE);
					else 
						set_item_property('ident_2nd',visible, PROPERTY_TRUE);
						set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
						set_item_property('icao_2nd',visible, PROPERTY_TRUE);
						set_item_property('icao_2nd',ENABLED, PROPERTY_TRUE);  
					end if;
			 --END Fix SCR 7730 --Ashish N - 08-Mar-2018
				if :global.master_block = 'PL_TLD_ALTERNATE_DEST' then
				go_item('ident_2nd');
			end if;	
		end if;	
	ELSE
		:select_nrecords := 'Replace only the current record and its details.';	
	END IF;
end if;
END;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     * Radio Buttons                                 
       ----------
       * Name                                        ONE
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy Current Record
       - Access Key                                  
       * Radio Button Value                          ONE
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  25
       * Y Position                                  119
       * Width                                       105
       * Height                                      19
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
       * Name                                        SET
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy Displayed Record(s)
       - Access Key                                  
       * Radio Button Value                          SET
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  133
       * Y Position                                  119
       * Width                                       126
       * Height                                      19
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
     ----------
     * Name                                          GENINHOUSE
     * Item Type                                     Radio Group
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Access Key                                    
     * Mapping of Other Values                       Y
     - Implementation Class                          
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                1
     * Initial Value                                 Y
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     * Foreground Color                              black
     * Background Color                              gray20
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     - Triggers                                      
     * Radio Buttons                                 
       ----------
       * Name                                        ONLY_GEN_IN_HOUSE
       - Subclass Information                        
       - Comments                                    
       * Enabled                                     Yes
       * Label                                       Generated In-House Only
       - Access Key                                  
       * Radio Button Value                          Y
       - Distance Between Records                    0
       * Visible                                     Yes
       * X Position                                  192
       * Y Position                                  135
       * Width                                       129
       * Height                                      20
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
       * Name                                        NOT_ONLY_GEN_IN_HOUSE
       - Subclass Information                        
       - Comments                                    
       * Enabled                                     Yes
       * Label                                       All Records
       - Access Key                                  
       * Radio Button Value                          N
       - Distance Between Records                    0
       * Visible                                     Yes
       * X Position                                  321
       * Y Position                                  135
       * Width                                       67
       * Height                                      20
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       * Font Weight                                 Bold
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
     ----------
     * Name                                          DATATYP
     * Item Type                                     Radio Group
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Access Key                                    
     - Mapping of Other Values                       
     - Implementation Class                          
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     - Maximum Length                                30
     * Initial Value                                 TLD
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Number of Items Displayed                     0
     - Database Item                                 Yes
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     * Canvas                                        MAIN
     * Tab Page                                      
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Foreground Color                              
     - Background Color                              
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-RADIO-CHANGED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                


if :dupl.DATATYP = 'STD' then
	set_item_property('SELECT_CUSTOMER',visible, PROPERTY_FALSE);		
	set_item_property('SELECT_CUSTOMER',ENABLED, PROPERTY_FALSE);
--	set_item_property('NEW_CUSTOMER_IDENT',ENABLED, PROPERTY_FALSE);
--	set_item_property('NEW_CUSTOMER_IDENT',visible, PROPERTY_FALSE);
	Hide_View('Cust_List_Can');
	--	Go_Item('DUPL.New_Cycle');	
	:DUPL.NEW_CYCLE := null;

else
	:DUPL.NEW_CYCLE := :global.processing_cycle;
	set_item_property('SELECT_CUSTOMER',visible, PROPERTY_TRUE);
	set_item_property('SELECT_CUSTOMER',ENABLED, PROPERTY_TRUE);
	Show_View('Cust_List_Can');
	Go_Item('DUPL.New_Cycle');
--	set_item_property('NEW_CUSTOMER_IDENT',visible, PROPERTY_TRUE);			
--	set_item_property('NEW_CUSTOMER_IDENT',ENABLED, PROPERTY_TRUE);	
end if;
--
if :dupl.nrecords_S = 'ONE' then
	if :global.1st_currident is not null then
		set_item_property('ident_1st',visible, PROPERTY_TRUE);
		set_item_property('ident_1st',ENABLED, PROPERTY_TRUE);	
		if :dupl.DATATYP = 'STD' then
			go_item('NEW_CYCLE');			
		else	
			go_item('ident_1st');
		end if;	
	end if;
	if :global.2nd_currident is not null then
		set_item_property('ident_2nd',visible, PROPERTY_TRUE);
		set_item_property('ident_2nd',ENABLED, PROPERTY_TRUE);
		set_item_property('icao_2nd',visible, PROPERTY_TRUE);
		set_item_property('icao_2nd',ENABLED, PROPERTY_TRUE);
		if :global.master_block = 'PL_TLD_ALTERNATE_DEST' then
			go_item('ident_2nd');
		end if;
	end if;	
elsif :dupl.nrecords_S = 'SET' then
	:dupl.ident_1st := null;
	:dupl.ident_2nd := null;
	:dupl.icao_2nd := null;
	set_item_property('ident_1st',ENABLED, PROPERTY_FALSE);
	set_item_property('ident_1st',visible, PROPERTY_FALSE);
	set_item_property('ident_2nd',ENABLED, PROPERTY_FALSE);
	set_item_property('ident_2nd',visible, PROPERTY_FALSE);
	set_item_property('icao_2nd',ENABLED, PROPERTY_FALSE);
	set_item_property('icao_2nd',visible, PROPERTY_FALSE);
	go_item('DUPL.NEW_CYCLE');
end if;	
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     * Radio Buttons                                 
       ----------
       * Name                                        TLD
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy STD To TLD
       - Access Key                                  
       * Radio Button Value                          TLD
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  25
       * Y Position                                  148
       * Width                                       103
       * Height                                      13
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       - Font Weight                                 Medium
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
       * Name                                        STD
       - Subclass Information                        
       - Comments                                    
       - Enabled                                     Yes
       * Label                                       Copy STD To STD
       - Access Key                                  
       * Radio Button Value                          STD
       - Distance Between Records                    0
       - Visible                                     Yes
       * X Position                                  132
       * Y Position                                  148
       * Width                                       105
       * Height                                      14
       - Visual Attribute Group                      DEFAULT
       - Prompt Visual Attribute Group               DEFAULT
       * Foreground Color                            black
       * Background Color                            gray20
       - Fill Pattern                                
       - Font                                        
       * Font Name                                   Tahoma
       * Font Size                                   8
       - Font Weight                                 Medium
       * Font Style                                  Plain
       * Font Spacing                                Normal
       - Prompt                                      
       - Prompt Display Style                        First Record
       - Prompt Justification                        Start
       - Prompt Attachment Edge                      Start
       - Prompt Alignment                            Start
       - Prompt Attachment Offset                    0
       - Prompt Alignment Offset                     0
       - Prompt Reading Order                        Default
       - Prompt Foreground Color                     
       - Prompt Font                                 
       - Prompt Font Name                            
       - Prompt Font Size                            0
       - Prompt Font Weight                          Medium
       - Prompt Font Style                           Plain
       - Prompt Font Spacing                         Normal
       ----------
     ----------
     * Name                                          SELECT_NRECORDS
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     * Multi-Line                                    Yes
     - Wrap Style                                    Word
     - Case Restriction                              Mixed
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                500
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     * Insert Allowed                                No
     * Update Allowed                                No
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    20
     * Y Position                                    74
     * Width                                         365
     * Height                                        37
     - Cursor Style                                  <Unspecified>
     * Bevel                                         None
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     - Triggers                                      
     ----------
     * Name                                          DUPLICATE
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Copy
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     * Keyboard Navigable                            No
     * Mouse Navigate                                No
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    212
     * Y Position                                    375
     * Width                                         69
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

--Begin Fix SCR 7138 --Madhu --07-Nov-2016

DECLARE
fname	varchar2(100) := get_application_property(CALLING_FORM); 	
	
BEGIN
	
--Start Fix scr 7730.01- Ashish N- 21-Mar-2018

--7470	
	IF :DUPL.nrecords_T IS NULL THEN
		dsp_msg('Please select the Copy Displayed Records option to copy/replace records');
	   RAISE form_trigger_failure;
	END IF;
--7470
		
	IF fname = 'COMPANY_ROUTE' THEN 
		
		If Nvl(Length(Translate(Ltrim(Rtrim(:dupl.ident_2nd)), ' 0123456789', ' ')),0) > 0 THEN		
	   dsp_msg('Only 0-9 numbers are allowed for Cost Index');
	   raise form_trigger_failure;
    End if;
 END IF;
--End Fix scr 7730.01- Ashish N- 21-Mar-2018		
END;
   IF :MESSAGE.did = 'N' THEN
      RAISE form_trigger_failure;
   END IF;

	Declare
		ln_Button Number;
	Begin
			ln_Button :=
				display_alert.more_buttons
				         ('S','Copy Record','You are going to Copy the record(s). Select an option to Proceed: '|| CHR (10)|| 
				         	'( Note:Copy and Refresh may take more time )'|| CHR (10),
				             'Copy Only','Copy and Refresh','Cancel'
				          );
		
		IF ln_Button = 1 THEN
			:Parameter.RML := 'R';
		ELSIF ln_Button = 2 THEN
			:Parameter.RML := 'Y';
		ELSE
			:Parameter.RML := 'N';
			RAISE Form_Trigger_Failure;
		END IF;
	End;
	
   IF :dupl.DATATYP != 'STD' THEN
   		Check_Blank_DCR_Prc;
     	Replace_Cust_Prc;
      IF RTRIM (:Parameter.Rep_Cust) IS NULL THEN
         GO_ITEM ('Cust_List_Blk.Customer');
         dsp_msg ('Please select Customer Ident(s) that you want to copy records for.');
         RAISE form_trigger_failure;
      ELSE
         validate_customer;

         DECLARE
            vs_data_suppl_name   VARCHAR2 (30);
            vn_Check             NUMBER;
         BEGIN
            IF :PARAMETER.CUST_IDENTS IS NOT NULL THEN
               SELECT data_supplier_name
                 INTO vs_data_suppl_name
                 FROM data_supplier
                WHERE data_supplier = :global.data_supplier;

               vn_Check :=
                  display_alert.more_buttons (
                     'S',
                     'Different Supplier',
                        'The customer(s) '
                     || :PARAMETER.CUST_IDENTS
                     || ' is/are not associated with '
                     || ' logon Data Supplier '
                     || vs_data_suppl_name
                     || '; Do you wish to copy to the selected customer(s), Please confirm.',
                     'Continue',
                     'Cancel');

               IF vn_Check = 2 THEN
                  RAISE form_trigger_failure;
               END IF;
            END IF;
         END;
      
      END IF;
   END IF;
   
   IF :dupl.nrecords_T = 'SET' OR :dupl.nrecords_S = 'SET' THEN
      IF globals.g_last_query IS NULL THEN
         dsp_msg ('Please give a query for the set of records you are going to copy.');
         RAISE form_trigger_failure;
      END IF;

      IF forms_utilities.count_records (:global.current_table,globals.g_last_query,'PROCESSING_CYCLE') > 1 THEN
         dsp_msg ('Can not copy for a set of records that is not restricted by one Processing Cycle.');
         RAISE form_trigger_failure;
      ELSIF INSTR (globals.g_last_query, 'PROCESSING_CYCLE=') = 0 THEN
         globals.g_last_query := globals.g_last_query|| ' and processing_cycle= '|| :global.record_cycle;
      END IF;

   END IF;

   IF :dupl.nrecords_T = 'SET' THEN
      IF forms_utilities.count_records (:global.current_table,globals.g_last_query,'CUSTOMER_IDENT') > 1 THEN
         dsp_msg ('Can not copy for a set of tailored records that is not restricted by one Customer Ident.');
         RAISE form_trigger_failure;
      ELSIF INSTR (globals.g_last_query, 'CUSTOMER_IDENT') = 0 THEN
         globals.g_last_query := globals.g_last_query|| ' and customer_ident = '''|| :global.curr_customer_ident|| '''';
      END IF;
   END IF;

   IF (:dupl.nrecords_s = 'SET' AND :dupl.datatyp = 'STD' AND :dupl.new_cycle = :global.record_cycle) THEN
      dsp_msg ('Can not copy this set of records in the same processing cycle.');
      RAISE form_trigger_failure;
   END IF;

   --
   IF RTRIM (:dupl.new_cycle) IS NULL THEN
      GO_ITEM ('NEW_CYCLE');
      dsp_msg ('Please provide the CYCLE that you want to copy records for.');
      RAISE form_trigger_failure;
   ELSE
      DECLARE
         v_exist   NUMBER;
      BEGIN
         SELECT 1
           INTO v_exist
           FROM cycle
          WHERE cycle = :dupl.new_cycle;
      EXCEPTION
         WHEN NO_DATA_FOUND
         THEN
            dsp_msg ('Please assign a valid Processing Cycle.');
            GO_ITEM ('NEW_CYCLE');
            LIST_VALUES;
            RAISE form_trigger_failure;
      END;
   END IF;

   IF SUBSTR (:global.master_block, 8) = 'ENROUTE_AIRWAY' THEN
      IF LENGTH (:dupl.ident_1st) > 5  THEN
         dsp_msg ('The length of a Route Ident can not greater than 5. ');
         GO_ITEM ('IDENT_1ST');
         RAISE form_trigger_failure;
      END IF;
   ELSIF :global.master_block IN ('PL_COMPANY_ROUTE', 'PL_TLD_ALTERNATE_DEST') THEN
      NULL;
   ELSE
      IF LENGTH (:dupl.ident_1st) > 6 THEN
         dsp_msg ('The length of a Procedure Ident can not greater than 6. ');
         GO_ITEM ('IDENT_1ST');
         RAISE form_trigger_failure;
      END IF;

      IF LENGTH (:dupl.ident_2nd) > 4 THEN
         dsp_msg ('The length of an Airport/Heliport Ident can not greater than 4. ');
         GO_ITEM ('ident_2nd');
         RAISE form_trigger_failure;
      END IF;
   END IF;
--

check_parameters;

--End Fix SCR 7138 --Madhu --07-Nov-2016
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

go_item('DUPL.CANCEL');  -- Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          REPLACE
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Replace
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     * Keyboard Navigable                            No
     * Mouse Navigate                                No
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    213
     * Y Position                                    395
     * Width                                         69
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
 --Start Fix scr 7730.01- Ashish N- 21-Mar-2018
	DECLARE
		fname	varchar2(100) := get_application_property(CALLING_FORM); 	
	
	BEGIN
		
	--7470	
		IF :DUPL.nrecords_T IS NULL THEN
			dsp_msg('Please select the Copy Displayed Records option to copy/replace records');
		   RAISE form_trigger_failure;
		END IF;
	--7470
		
		IF fname = 'COMPANY_ROUTE' THEN 
		  IF Nvl(Length(Translate(Ltrim(Rtrim(:dupl.ident_2nd)), ' 0123456789', ' ')),0) > 0 THEN		
	   dsp_msg('Only 0-9 numbers are allowed for Cost Index');
	   raise form_trigger_failure;
    END IF;
 END IF;
END;

-- Begin Fix - SCR 7842 -Shrikant K - 29-May -2018	
	IF :Cust_List_Blk.Customer IS NOT NULL THEN	
						IF (:GLOBAL.Curr_Customer_Ident = :CUST_LIST_BLK.Customer AND :Global.processing_cycle = :DUPL.New_Cycle) THEN 
								Dsp_Msg('Entered customer for Copy/Replace option should not be same as Copy from customer '''||:GLOBAL.Curr_Customer_Ident||''' and from Cycle '||:Global.processing_cycle||'. ' );
		 						RAISE form_trigger_failure;
						END IF;
	END IF;
-- End Fix - SCR 7842 - Shrikant K - 29-May -2018
	
--End Fix scr 7730.01- Ashish N- 21-Mar-2018   
   IF :MESSAGE.did = 'N' THEN
      RAISE form_trigger_failure;
   END IF;
	Check_Blank_DCR_Prc;--MOD 1
	Declare
		ln_Button Number;
	Begin
--MOD 1		
			ln_Button :=
				display_alert.more_buttons
				         ('S','Replace Record','You are going to Replace the record(s). Select an option to Proceed: '|| CHR (10)|| 
				         	'( Note:Replace and Refresh may take more time )'|| CHR (10),
				             'Replace Only','Replace and Refresh','Cancel'
				          );
		
		IF ln_Button = 1 THEN
			:Parameter.RML := 'R';
		ELSIF ln_Button = 2 THEN
			:Parameter.RML := 'Y';
		ELSE
			:Parameter.RML := 'N';
			RAISE Form_Trigger_Failure;
		END IF;
	End;
	
	
   IF :dupl.DATATYP != 'STD' THEN
     	Replace_Cust_Prc;
      IF RTRIM (:Parameter.Rep_Cust) IS NULL THEN
         GO_ITEM ('Cust_List_Blk.Customer');
         dsp_msg ('Please select Customer Ident(s) that you want to copy records for.');
         RAISE form_trigger_failure;
      ELSE
--MOD 1
         validate_customer;

         DECLARE
            vs_data_suppl_name   VARCHAR2 (30);
            vn_Check             NUMBER;
         BEGIN
            IF :PARAMETER.CUST_IDENTS IS NOT NULL THEN
               SELECT data_supplier_name
                 INTO vs_data_suppl_name
                 FROM data_supplier
                WHERE data_supplier = :global.data_supplier;

               vn_Check :=
                  display_alert.more_buttons (
                     'S',
                     'Different Supplier',
                        'The customer(s) '
                     || :PARAMETER.CUST_IDENTS
                     || ' is/are not associated with '
                     || ' logon Data Supplier '
                     || vs_data_suppl_name
                     || '; Do you wish to copy to the selected customer(s), Please confirm.',
                     'Continue',
                     'Cancel');

               IF vn_Check = 2 THEN
                  RAISE form_trigger_failure;
               END IF;
            END IF;
         END;
      
      END IF;
   END IF;

   IF :dupl.nrecords_T = 'SET' OR :dupl.nrecords_S = 'SET' THEN
      IF globals.g_last_query IS NULL THEN
         dsp_msg ('Please give a query for the set of records you are going to copy.');
         RAISE form_trigger_failure;
      END IF;

      IF forms_utilities.count_records (:global.current_table,globals.g_last_query,'PROCESSING_CYCLE') > 1 THEN
         dsp_msg ('Can not copy for a set of records that is not restricted by one Processing Cycle.');
         RAISE form_trigger_failure;
      ELSIF INSTR (globals.g_last_query, 'PROCESSING_CYCLE=') = 0 THEN
         globals.g_last_query := globals.g_last_query|| ' and processing_cycle= '|| :global.record_cycle;
      END IF;

   END IF;

   IF :dupl.nrecords_T = 'SET' THEN
      IF forms_utilities.count_records (:global.current_table,globals.g_last_query,'CUSTOMER_IDENT') > 1 THEN
         dsp_msg ('Can not copy for a set of tailored records that is not restricted by one Customer Ident.');
         RAISE form_trigger_failure;
      ELSIF INSTR (globals.g_last_query, 'CUSTOMER_IDENT') = 0 THEN
         globals.g_last_query := globals.g_last_query|| ' and customer_ident = '''|| :global.curr_customer_ident|| '''';
      END IF;
   END IF;

   IF (:dupl.nrecords_s = 'SET' AND :dupl.datatyp = 'STD' AND :dupl.new_cycle = :global.record_cycle) THEN
      dsp_msg ('Can not copy this set of records in the same processing cycle.');
      RAISE form_trigger_failure;
   END IF;

   --
   IF RTRIM (:dupl.new_cycle) IS NULL THEN
      GO_ITEM ('NEW_CYCLE');
      dsp_msg ('Please provide the CYCLE that you want to copy records for.');
      RAISE form_trigger_failure;
   ELSE
      DECLARE
         v_exist   NUMBER;
      BEGIN
         SELECT 1
           INTO v_exist
           FROM cycle
          WHERE cycle = :dupl.new_cycle;
      EXCEPTION
         WHEN NO_DATA_FOUND
         THEN
            dsp_msg ('Please assign a valid Processing Cycle.');
            GO_ITEM ('NEW_CYCLE');
            LIST_VALUES;
            RAISE form_trigger_failure;
      END;
   END IF;

   IF SUBSTR (:global.master_block, 8) = 'ENROUTE_AIRWAY' THEN
      IF LENGTH (:dupl.ident_1st) > 5  THEN
         dsp_msg ('The length of a Route Ident can not greater than 5. ');
         GO_ITEM ('IDENT_1ST');
         RAISE form_trigger_failure;
      END IF;
   ELSIF :global.master_block IN ('PL_COMPANY_ROUTE', 'PL_TLD_ALTERNATE_DEST') THEN
      NULL;
   ELSE
      IF LENGTH (:dupl.ident_1st) > 6 THEN
         dsp_msg ('The length of a Procedure Ident can not greater than 6. ');
         GO_ITEM ('IDENT_1ST');
         RAISE form_trigger_failure;
      END IF;

      IF LENGTH (:dupl.ident_2nd) > 4 THEN
         dsp_msg ('The length of an Airport/Heliport Ident can not greater than 4. ');
         GO_ITEM ('ident_2nd');
         RAISE form_trigger_failure;
      END IF;
   END IF;
--

check_parameters;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

go_item('DUPL.CANCEL');  -- Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          NEW_GATE_IDENT
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     * Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                5
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     * List of Values                                
     - List X Position                               0
     - List Y Position                               0
     * Validate from List                            Yes
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    213
     * Y Position                                    255
     * Width                                         38
     * Height                                        16
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     * Fill Pattern                                  transparent
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Arial
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        New Gate Ident(Optional):
     - Prompt Display Style                          First Record
     * Prompt Justification                          Center
     * Prompt Attachment Edge                        Top
     * Prompt Alignment                              Start
     * Prompt Attachment Offset                      2
     * Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     * Prompt Foreground Color                       black
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

go_item('DUPL.DUPLICATE');   -- Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          NEW_REPLACE_CUST
     - Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Start
     - Implementation Class                          
     * Multi-Line                                    Yes
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     * Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                20000
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     * List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     * Visible                                       Yes
     * Canvas                                        
     * Tab Page                                      
     * X Position                                    20
     * Y Position                                    211
     * Width                                         178
     * Height                                        194
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     * Show Vertical Scroll Bar                      Yes
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     9
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     * Prompt Attachment Edge                        Top
     - Prompt Alignment                              Start
     * Prompt Attachment Offset                      6
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        WHEN-VALIDATE-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

null;
--validate_customer;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          CANCEL
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Cancel
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     * Keyboard Navigable                            No
     * Mouse Navigate                                No
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    293
     * Y Position                                    376
     * Width                                         68
     * Height                                        16
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

:global.new_customer_ident := null;
:global.num_to_duplicate := null;
:global.do_duplicate := 'N';
:global.1st_ident := null;
:global.2nd_ident := null;
:global.2nd_icao := null;
ERASE('global.replace_block');
--:global.new_dcr_no:='';--7470
Exit_Form(NO_VALIDATE); -- SCR 7842 - Shrikant K - 29-may-2018
pc3_do_key('exit_form');


       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

go_item('dupl.dup_rep');  -- Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          GENINOUTHOUSE
     * Item Type                                     Check Box
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Copy as Generated-in-House
     - Access Key                                    
     - Implementation Class                          
     * Value when Checked                            Y
     * Value when Unchecked                          N
     - Check Box Mapping of Other Values             Checked
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                1
     * Initial Value                                 N
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Database Item                                 Yes
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Visible                                       Yes
     * Canvas                                        MAIN
     - Tab Page                                      
     * X Position                                    29
     * Y Position                                    166
     * Width                                         140
     * Height                                        14
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     8
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     - Triggers                                      
     ----------
   - Relations                                       
   ----------
   * Name                                            CUSTOMER
   - Subclass Information                            
   - Comments                                        
   - Navigation Style                                Same Record
   * Previous Navigation Data Block                  
   * Next Navigation Data Block                      
   * Current Record Visual Attribute Group           CURRENT_RECORD
   - Query Array Size                                0
   - Number of Records Buffered                      0
   * Number of Records Displayed                     19
   - Query All Records                               No
   - Record Orientation                              Vertical
   - Single Record                                   No
   - Database Data Block                             Yes
   - Enforce Primary Key                             No
   - Query Allowed                                   Yes
   - Query Data Source Type                          Table
   * Query Data Source Name                          CUSTOMER
   * Query Data Source Columns                       
     ----------
     * Column Name                                   CUSTOMER_IDENT
     * Column Type                                   VARCHAR2
     - Column Type Name                              
     - Parent Column                                 
     * Length                                        3
     * Precision                                     0
     * Scale                                         0
     * Mandatory                                     Yes
     ----------
     * Column Name                                   CUSTOMER_NAME
     * Column Type                                   VARCHAR2
     - Column Type Name                              
     - Parent Column                                 
     * Length                                        50
     * Precision                                     38
     * Scale                                         0
     * Mandatory                                     No
     ----------
   - Query Data Source Arguments                     
   - Alias                                           
   - Include REF Item                                No
   - WHERE Clause                                    
   * ORDER BY Clause                                 customer_ident
   - Optimizer Hint                                  
   * Insert Allowed                                  No
   - Update Allowed                                  Yes
   - Locking Mode                                    Automatic
   * Delete Allowed                                  No
   - Key Mode                                        Automatic
   - Update Changed Columns Only                     No
   - Enforce Column Security                         No
   - Maximum Query Time                              0
   - Maximum Records Fetched                         0
   - DML Data Target Type                            Table
   - DML Data Target Name                            
   - Insert Procedure Name                           
   - Insert Procedure Result Set Columns             
   - Insert Procedure Arguments                      
   - Update Procedure Name                           
   - Update Procedure Result Set Columns             
   - Update Procedure Arguments                      
   - Delete Procedure Name                           
   - Delete Procedure Result Set Columns             
   - Delete Procedure Arguments                      
   - Lock Procedure Name                             
   - Lock Procedure Result Set Columns               
   - Lock Procedure Arguments                        
   - DML Array Size                                  1
   - Precompute Summaries                            No
   - DML Returning Value                             No
   * Show Scroll Bar                                 Yes
   * Scroll Bar Canvas                               CUSTOMER
   * Scroll Bar Tab Page                             
   - Scroll Bar Orientation                          Vertical
   * Scroll Bar X Position                           169
   * Scroll Bar Y Position                           23
   * Scroll Bar Width                                13
   * Scroll Bar Length                               266
   - Scroll Bar Height                               0
   - Reverse Direction                               No
   * Visual Attribute Group                          SCROLL_BAR
   ^ Foreground Color                                white
   ^ Background Color                                blue
   ^ Fill Pattern                                    transparent
   - Row Banding Frequency                           0
   - Direction                                       Default
   * Triggers                                        
     ----------
     * Name                                          WHEN-NEW-BLOCK-INSTANCE
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

:message.did := 'N';
pc3_do_key('execute_query');

     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
     * Name                                          KEY-EXEQRY
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

execute_query;
loop
	exit when :system.last_record = 'TRUE';
	next_record;
end loop;
first_record;
     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
     * Name                                          POST-QUERY
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

DECLARE
	group_id      recordgroup;
	v_row         number := 0;
	col_id        groupcolumn;
	col_val       varchar2(3);		
begin
	group_id := find_group('NEW_CUSTOMER');
	if id_null(group_id) then
		null;
	else
		col_id := find_column('NEW_CUSTOMER.CUST_ID');
		if id_null(col_id) then
			dsp_msg('wrong!');
			raise form_trigger_failure;
		end if;
		v_row := Get_Group_Row_Count(group_id);
		for i in 1..v_row loop
			col_val := GET_GROUP_CHAR_CELL(col_id, i);
			if col_val = :customer.customer_ident then
				:CUSTOMER.CHK := 'Y';
				exit;
			end if;
		end loop;	
	end if;	
END;
     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
   * Items                                           
     ----------
     * Name                                          CUSTOMER_IDENT
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Justification                                 Center
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     * Previous Navigation Item                      CUSTOMER_IDENT
     * Next Navigation Item                          CUSTOMER_NAME
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                3
     - Initial Value                                 
     * Required                                      Yes
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     * Number of Items Displayed                     0
     - Database Item                                 Yes
     * Column Name                                   CUSTOMER_IDENT
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     * Insert Allowed                                No
     * Update Allowed                                No
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        CUSTOMER
     * Tab Page                                      
     * X Position                                    26
     * Y Position                                    23
     * Width                                         28
     * Height                                        14
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     * Visual Attribute Group                        PLAIN
     - Prompt Visual Attribute Group                 DEFAULT
     - Foreground Color                              
     - Background Color                              
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Prompt                                        
     * Prompt Display Style                          First Record
     - Prompt Justification                          Start
     * Prompt Attachment Edge                        Top
     * Prompt Alignment                              Center
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     - Triggers                                      
     ----------
     * Name                                          CUSTOMER_NAME
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     - Case Restriction                              Mixed
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     * Previous Navigation Item                      CUSTOMER_IDENT
     * Next Navigation Item                          CUSTOMER_IDENT
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                50
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Database Item                                 Yes
     * Column Name                                   CUSTOMER_NAME
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     * Insert Allowed                                No
     * Update Allowed                                No
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        CUSTOMER
     * Tab Page                                      
     * X Position                                    54
     * Y Position                                    23
     * Width                                         115
     * Height                                        14
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     * Visual Attribute Group                        PLAIN
     - Prompt Visual Attribute Group                 DEFAULT
     - Foreground Color                              
     - Background Color                              
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     * Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     - Triggers                                      
     ----------
     * Name                                          CHK
     * Item Type                                     Check Box
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Label                                         
     - Access Key                                    
     - Implementation Class                          
     * Value when Checked                            Y
     * Value when Unchecked                          N
     * Check Box Mapping of Other Values             Not Allowed
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     - Maximum Length                                30
     * Initial Value                                 N
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     * Insert Allowed                                No
     - Update Allowed                                Yes
     - Visible                                       Yes
     * Canvas                                        CUSTOMER
     - Tab Page                                      
     * X Position                                    14
     * Y Position                                    23
     * Width                                         11
     * Height                                        14
     - Cursor Style                                  <Unspecified>
     * Visual Attribute Group                        PLAIN
     - Prompt Visual Attribute Group                 DEFAULT
     - Foreground Color                              
     - Background Color                              
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Prompt                                        
     * Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-CHECKBOX-CHANGED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
DECLARE
	v_group varchar2(50) := 'NEW_CUSTOMER';
	group_id      recordgroup := find_group(v_group);
	v_row         number := Get_Group_Row_Count(group_id);
	col_id        groupcolumn := find_column('NEW_CUSTOMER.CUST_ID');	
	col_val       varchar2(30);
begin
	if :customer.chk = 'Y' then
		add_group_row(group_id, end_of_group);
		v_row := v_row + 1;
		set_group_char_cell('NEW_CUSTOMER.CUST_ID', v_row, :CUSTOMER.CUSTOMER_IDENT);
--MOD 1
		--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138 --Madhu
			Go_Block('Cust_List_Blk');
			First_Record;
			LOOP
				IF :Cust_List_Blk.Customer IS NULL THEN
					:Cust_List_Blk.Customer := :CUSTOMER.CUSTOMER_IDENT;
					EXIT;
				END IF;
				Next_Record;
			END LOOP;
		--ELSE
--MOD 1
			--:DUPL.NEW_CUSTOMER_IDENT := rtrim(ltrim(rtrim(:DUPL.NEW_CUSTOMER_IDENT,', ')||','||:customer.customer_ident,', '),', ');--Commented for SCR 7138
		--END IF;
	elsif nvl(:customer.chk,'N') = 'N' then	
		for i in 1..v_row loop
			col_val := GET_GROUP_CHAR_CELL(col_id, i);
			if col_val = :customer.customer_ident then
				delete_group_row(group_id,i);
				exit;
			end if;
		end loop;
--MOD 1
		--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138
			Go_Block('Cust_List_Blk');
			First_Record;
			LOOP
				IF :Cust_List_Blk.Customer = :CUSTOMER.CUSTOMER_IDENT THEN
					Delete_Record;
					EXIT;
				END IF;
				Next_Record;
			END LOOP;
		--ELSE
--MOD 1
		--	delete_one_cust;--Commented for SCR 7138
	--	END IF;
	end if;
	Go_Block('Customer');
END;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          CLEAR
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         DeSelect All
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     * Keyboard Navigable                            No
     - Mouse Navigate                                Yes
     * Previous Navigation Item                      CHECK_ALL
     * Next Navigation Item                          CLOSE
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     * Number of Items Displayed                     1
     - Visible                                       Yes
     * Canvas                                        CUSTOMER
     - Tab Page                                      
     * X Position                                    67
     * Y Position                                    299
     * Width                                         58
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Arial
     * Font Size                                     8
     * Font Weight                                   Medium
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
DECLARE
	group_id      recordgroup := find_group('NEW_CUSTOMER');
	v_row         number := get_group_row_count(group_id);
	col_val       varchar2(3);		
begin
	first_record;
	loop
		if :CUSTOMER.chk = 'Y' then
			:CUSTOMER.chk := 'N';
			for i in 1..v_row loop
				col_val := get_group_char_cell('NEW_CUSTOMER.CUST_ID',i);		
				if col_val = :CUSTOMER.customer_ident then
					delete_group_row(group_id,i);
					exit;
				end if;
			end loop;
--MOD 1
			--IF :Parameter.Rep = 'Y' THEN --Commented for SCR 7138
				Go_Block('Cust_List_Blk');
				Clear_Block;
				Go_Block('Customer');
			--ELSE
--MOD 1
				--delete_one_cust;
			--END IF;
		end if;
		exit when :system.last_record = 'TRUE';
		next_record;
	end loop;
	first_record;
end;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          CHECK_ALL
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Select All
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     * Keyboard Navigable                            No
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     * Next Navigation Item                          CLEAR
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     * Number of Items Displayed                     1
     - Visible                                       Yes
     * Canvas                                        CUSTOMER
     * Tab Page                                      
     * X Position                                    14
     * Y Position                                    299
     * Width                                         53
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Arial
     * Font Size                                     8
     * Font Weight                                   Medium
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
DECLARE
	group_id      recordgroup := find_group('NEW_CUSTOMER');
	v_row         number := get_group_row_count(group_id);
	col_val       varchar2(3);		
begin
	first_record;
	loop
		if nvl(:CUSTOMER.chk,'N') = 'N' then
			:CUSTOMER.chk := 'Y';
			add_group_row(group_id, end_of_group);
			v_row := v_row + 1;
			set_group_char_cell('NEW_CUSTOMER.CUST_ID', v_row, :CUSTOMER.CUSTOMER_IDENT);
--MOD 1
			--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138
				Go_Block('Cust_List_Blk');
				:Cust_List_Blk.Customer := :CUSTOMER.CUSTOMER_IDENT;
				Next_Record;
				Go_Block('Customer');
			--ELSE
--MOD 1
			--	:DUPL.NEW_CUSTOMER_IDENT := rtrim(ltrim(:DUPL.NEW_CUSTOMER_IDENT||','||:customer.customer_ident,', '),', ');
			--END IF;
		end if;
		exit when :system.last_record = 'TRUE';
		next_record;
	end loop;
	first_record;
end;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          CLOSE
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Close Select
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     * Previous Navigation Item                      CLEAR
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     * Number of Items Displayed                     1
     - Visible                                       Yes
     * Canvas                                        CUSTOMER
     - Tab Page                                      
     * X Position                                    125
     * Y Position                                    299
     * Width                                         56
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     MS Sans Serif
     * Font Size                                     8
     * Font Weight                                   Demilight
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
:message.did := 'Y';
hide_view('CUSTOMER');
--MOD 1
--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138
	Go_Block('Cust_List_Blk');
--ELSE
--MOD 1
	--:dupl.new_customer_ident := ltrim(rtrim(:dupl.new_customer_ident,', '),', ');
	--go_item('DUPL.new_customer_ident');
--END IF;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
   - Relations                                       
   ----------
   * Name                                            CUST_LIST_BLK
   - Subclass Information                            
   - Comments                                        
   - Navigation Style                                Same Record
   - Previous Navigation Data Block                  
   - Next Navigation Data Block                      
   - Current Record Visual Attribute Group           
   - Query Array Size                                0
   - Number of Records Buffered                      0
   * Number of Records Displayed                     8
   - Query All Records                               No
   - Record Orientation                              Vertical
   - Single Record                                   No
   * Database Data Block                             No
   - Enforce Primary Key                             No
   - Query Allowed                                   Yes
   - Query Data Source Type                          Table
   - Query Data Source Name                          
   - Query Data Source Columns                       
   - Query Data Source Arguments                     
   - Alias                                           
   - Include REF Item                                No
   - WHERE Clause                                    
   - ORDER BY Clause                                 
   - Optimizer Hint                                  
   - Insert Allowed                                  Yes
   - Update Allowed                                  Yes
   - Locking Mode                                    Automatic
   - Delete Allowed                                  Yes
   - Key Mode                                        Automatic
   - Update Changed Columns Only                     No
   - Enforce Column Security                         No
   - Maximum Query Time                              0
   - Maximum Records Fetched                         0
   - DML Data Target Type                            Table
   - DML Data Target Name                            
   - Insert Procedure Name                           
   - Insert Procedure Result Set Columns             
   - Insert Procedure Arguments                      
   - Update Procedure Name                           
   - Update Procedure Result Set Columns             
   - Update Procedure Arguments                      
   - Delete Procedure Name                           
   - Delete Procedure Result Set Columns             
   - Delete Procedure Arguments                      
   - Lock Procedure Name                             
   - Lock Procedure Result Set Columns               
   - Lock Procedure Arguments                        
   - DML Array Size                                  1
   - Precompute Summaries                            No
   - DML Returning Value                             No
   * Show Scroll Bar                                 Yes
   * Scroll Bar Canvas                               CUST_LIST_CAN
   * Scroll Bar Tab Page                             
   - Scroll Bar Orientation                          Vertical
   * Scroll Bar X Position                           168
   * Scroll Bar Y Position                           47
   * Scroll Bar Width                                15
   * Scroll Bar Length                               130
   - Scroll Bar Height                               0
   - Reverse Direction                               No
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Row Banding Frequency                           0
   - Direction                                       Default
   - Triggers                                        
   * Items                                           
     ----------
     * Name                                          CUSTOMER
     - Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     * Case Restriction                              Upper
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     * Next Navigation Item                          DCR_NUMBER
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                3
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        CUST_LIST_CAN
     * Tab Page                                      
     * X Position                                    11
     * Y Position                                    48
     * Width                                         75
     * Height                                        16
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     9
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        Customer
     * Prompt Display Style                          First Record
     - Prompt Justification                          Start
     * Prompt Attachment Edge                        Top
     * Prompt Alignment                              Center
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        WHEN-VALIDATE-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

-- Begin Fix - SCR 7842- Shrikant K - 07-May-2018
IF :Cust_List_Blk.Customer IS NOT NULL AND :DUPL.DUP_REP = 'R' THEN	
	IF (:GLOBAL.Curr_Customer_Ident = :CUST_LIST_BLK.Customer AND :Global.processing_cycle = :DUPL.New_Cycle) THEN 
			Dsp_Msg('Entered customer for Copy/Replace option should not be same as Copy from customer '''||:GLOBAL.Curr_Customer_Ident||''' and from Cycle '||:Global.processing_cycle||'. ' );
		 	RAISE form_trigger_failure;
	END IF;
END IF;
-- End Fix - SCR 7842- Shrikant K - 07-May-2018


       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          DCR_NUMBER
     * Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     - Case Restriction                              Mixed
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     * Data Type                                     Number
     - Data Length Semantics                         Null
     - Maximum Length                                30
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     * Database Item                                 No
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        CUST_LIST_CAN
     * Tab Page                                      
     * X Position                                    90
     * Y Position                                    48
     * Width                                         75
     * Height                                        16
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     Tahoma
     * Font Size                                     9
     * Font Weight                                   Bold
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     * Prompt                                        DCR Number
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     * Prompt Attachment Edge                        Top
     * Prompt Alignment                              Center
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     * Prompt Font Name                              Tahoma
     * Prompt Font Size                              8
     * Prompt Font Weight                            Bold
     * Prompt Font Style                             Plain
     * Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     * Triggers                                      
       ----------
       * Name                                        WHEN-NEW-ITEM-INSTANCE
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

DECLARE 
	ls_Return BOOLEAN;
	ln_DCR NUMBER;
	ls_Instance_Type   VARCHAR2 (30); -- Fix SCR 7415 - Eswar KCL
	-- Begin Fix - SCR 7422 - Venkat M 12-JUL-2017
	ln_old_cycle  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;
	ln_max_cycle  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;
	ln_max_cycle1  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;  
	ln_max_cycle2  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;  	
	ln_next_cycle Search_by_Navdb_Assignee.Effectivity_cycle%TYPE := 0;
	err_no EXCEPTION;
	-- End Fix - SCR 7422 - Venkat M 12-JUL-2017
	ln_proc_cycle Search_by_Navdb_Assignee.Effectivity_cycle%TYPE := 0;  --Fix SCR 7711
	--Begin Fix SCR 7608.01 -- Venkat M --24-Apr-2018
	ln_cnt_dcr NUMBER := 0;  
	ln_dcr_No NUMBER := 0;
	v_select NUMBER := 0;
	--End Fix SCR 7608.01 -- Venkat M --24-Apr-2018
	
BEGIN 
	:Cust_List_Blk.DCR_Number := NULL;  --Fix SCR 7608 -- Venkat M 27-Apr-2018
	-- Begin Fix - 7415 - Eswar KCL
	BEGIN
		SELECT UPPER(Instance_Type) INTO ls_Instance_Type 
			  FROM cptcontrol.system_software_identification;
		EXCEPTION
			WHEN OTHERS THEN
				ls_Instance_Type := 'DEVE';
	END;
			  
	IF ls_Instance_Type != 'ENGR' THEN	
		--Begin Fix SCR 7608  -- Venkat M --24-Apr-2018
		SELECT Count(DISTINCT DCR_Number)
		  INTO ln_cnt_dcr
		  FROM Search_by_NavDB_Assignee
		 WHERE NavDB_id = :Cust_List_blk.Customer
		   AND Effectivity_Cycle = :Dupl.New_Cycle
		   --AND DCR_Number = :global.DCR_Number
		   AND Data_Supplier = :global.data_Supplier
		   AND DCR_Overall_Status = 'OPEN';
		   
		IF ln_cnt_dcr > 1 THEN

		  SELECT COUNT(DISTINCT DCR_Number)--,Dataa_Supplier
		    INTO ln_dcr_No--:Tab7_Customer.Update_Dcr_Number,:Tab7_Customer.Data_Supplier
		    FROM Search_by_NavDB_Assignee
		   WHERE NavDB_id = :Cust_List_blk.Customer
		     AND Effectivity_Cycle = :Dupl.New_Cycle
		     AND DCR_Number = :global.DCR_Number
		     AND Data_Supplier = :global.data_Supplier
		     AND DCR_Overall_Status = 'OPEN';
		   
		  IF ln_dcr_No = 1 THEN 
         v_select := display_alert.more_buttons
	                 ('C',  'DCR', 'Login DCR# ' || :GLOBAL.dcr_number || ' is associated with NavDB ''' || :Cust_List_blk.Customer || '''.'||CHR(10)
	                 ||'Do you want to copy record(s) using login DCR ? ', 'Yes','No' );
		  ELSE
		  	 v_select := 0;
	    END IF;             
		END IF;
		
	  IF v_select = 1 THEN
			 :Cust_List_Blk.DCR_Number := :global.DCR_Number;
	  ELSE	 
		--End Fix SCR 7608 -- Venkat M --24-Apr-2018
			
      :PARAMETER.PROCESSING_CYCLE := :Dupl.New_Cycle;
		  BEGIN
			  SELECT DISTINCT DCR_Number INTO ln_DCR   --7608
			    FROM Search_by_Navdb_Assignee
			   WHERE NavDB_ID = :Cust_List_Blk.Customer
		   	   AND Effectivity_cycle = :Dupl.New_Cycle
			     AND DCR_overall_status = 'OPEN';
		  EXCEPTION
		 	  WHEN NO_DATA_FOUND THEN
		 		  ln_DCR := NULL;
		  END;
		 
-- Begin Fix - SCR 7422 - Venkat M 12-JUL-2017
		  IF ln_DCR IS NULL THEN
         select max(processing_cycle)  --maximum processing cycle
           into ln_max_cycle1 
           from pl_std_airport
          where data_supplier = :global.data_Supplier;
         
         select max(processing_cycle)  --maximum processing cycle
           into ln_max_cycle2 
           from pl_tld_airport
          where data_supplier = :global.data_Supplier;

         IF ln_max_cycle1 > ln_max_cycle2 THEN
       	    ln_max_cycle := ln_max_cycle1;
         ELSIF ln_max_cycle2 > ln_max_cycle1 THEN	 
            ln_max_cycle := ln_max_cycle2;
         ELSE
        	  ln_max_cycle := ln_max_cycle2;
         END IF;

		     IF :dupl.new_cycle > ln_max_cycle THEN
		 	      DSP_MSG('Copying is not allowed, Cycle#'||:dupl.new_cycle||' does not Exist ');
			      raise err_no;
			   END IF;   
		     IF :dupl.new_cycle > :global.processing_cycle THEN
            select NVL(min(processing_cycle),0)  -- gives next cycle
              into ln_next_cycle
		          from pl_std_airport
		         where data_supplier = :global.data_Supplier 
               and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
		   		
		   		  IF ln_next_cycle = 0 THEN
               select NVL(min(processing_cycle),0)  -- gives next cycle
                 into ln_next_cycle
		             from pl_tld_airport
		            where data_supplier = :global.data_Supplier 
                  and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
            END IF;         	  
            IF :dupl.new_cycle > ln_next_cycle THEN
           	   --riase exception;
           	   --DSP_MSG('Copying is not allowed, Cycle#'||:dupl.new_cycle||' is beyond allowed range ');
           	   dsp_msg('No DCR exists for '||:Cust_List_Blk.Customer||' in Target Cycle '||:dupl.new_cycle );
           	   raise err_no;
            END IF;	
		     ELSIF :dupl.new_cycle < :global.processing_cycle THEN
			      ln_old_cycle := util2.get_previous_cycle(:global.processing_cycle);
			      IF :dupl.new_cycle < ln_old_cycle THEN
           	   --DSP_MSG('Copying is not allowed, Cycle#'||:dupl.new_cycle||' is beyond allowed range ');
           	   dsp_msg('No DCR exists for '||:Cust_List_Blk.Customer||' in Target Cycle '||:dupl.new_cycle );
           	   raise err_no;
			      END IF;	
		     END IF;
		     :PARAMETER.PROCESSING_CYCLE := :Dupl.New_Cycle;
		     BEGIN
			     SELECT DISTINCT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee  --SCR 7608
			      WHERE NavDB_ID = :Cust_List_Blk.Customer
		   	      AND Effectivity_cycle = :Dupl.New_Cycle
			        AND DCR_overall_status = 'OPEN';
		     EXCEPTION
			     WHEN NO_DATA_FOUND THEN
			       IF :global.processing_cycle < :dupl.new_cycle THEN	
			    	    :PARAMETER.PROCESSING_CYCLE :=:global.processing_cycle;    
               BEGIN
			           SELECT DISTINCT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee  --7608
			            WHERE NavDB_ID = :Cust_List_Blk.Customer
			              AND Effectivity_cycle = :global.processing_cycle--ln_old_cycle--:Dupl.New_Cycle
			              AND DCR_overall_status = 'OPEN';
               EXCEPTION
          	     WHEN NO_DATA_FOUND THEN
                 --Begin Fix SCR 7711 -- Venkat M -12-Apr-2018
          	       select NVL(min(processing_cycle),0)  -- gives next cycle
                     into ln_proc_cycle
		                 from pl_std_airport
		                where data_supplier = :global.data_Supplier 
                      and processing_cycle > :dupl.new_cycle;
          	     IF ln_proc_cycle = 0 THEN
          	       select NVL(min(processing_cycle),0)  -- gives next cycle
                     into ln_proc_cycle
		                 from pl_tld_airport
		                where data_supplier = :global.data_Supplier 
                      and processing_cycle > :dupl.new_cycle;
          	     END IF;  
          	     :PARAMETER.PROCESSING_CYCLE := ln_proc_cycle;--To_Number(:Tab7_Main.From_Cycle+1);
   			         BEGIN
   			           SELECT DISTINCT DCR_Number  --7608
			               INTO ln_DCR
			               FROM Search_by_Navdb_Assignee
			              WHERE NavDB_ID = :Cust_List_Blk.Customer
			                AND Effectivity_cycle = ln_proc_cycle--ln_old_cycle--:Tab7_Main.To_Cycle
			                AND DCR_overall_status = 'OPEN';
   			         EXCEPTION 
          	 		   WHEN NO_DATA_FOUND THEN
          	 		     RAISE NO_DATA_FOUND;
                 END;	              	
               --End Fix SCCR 7711 -- Venkat M -12-Apr-2018	
               END;	
			       ELSIF :global.processing_cycle > :dupl.new_cycle THEN	
			    	   --Begin Fix SCCR 7711 -- Venkat M -12-Apr-2018	
			         :PARAMETER.PROCESSING_CYCLE := util2.get_previous_cycle(:dupl.new_cycle);
			    	   BEGIN
  			         SELECT DISTINCT DCR_Number  --7608
	  		           INTO ln_DCR
		  	           FROM Search_by_Navdb_Assignee
			            WHERE NavDB_ID = :Cust_List_Blk.Customer
			              AND Effectivity_cycle = util2.get_previous_cycle(:dupl.new_cycle)--ln_old_cycle--:Tab7_Main.To_Cycle
			              AND DCR_overall_status = 'OPEN';
			    	   EXCEPTION
			    	     WHEN NO_DATA_FOUND THEN			    	
			           --End Fix SCCR 7711 -- Venkat M -12-Apr-2018	
			    	       :PARAMETER.PROCESSING_CYCLE :=:global.processing_cycle;    
                 BEGIN
			             SELECT DISTINCT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee  --7608
			              WHERE NavDB_ID = :Cust_List_Blk.Customer
			                AND Effectivity_cycle = :global.processing_cycle--ln_old_cycle--:Dupl.New_Cycle
			                AND DCR_overall_status = 'OPEN';
                 EXCEPTION
          	       WHEN NO_DATA_FOUND THEN
          	 		     RAISE NO_DATA_FOUND;
                 END;		
               END;
			       ELSIF :global.processing_cycle = :dupl.new_cycle THEN 
			    	   IF ln_old_cycle IS NULL then
			    		    ln_old_cycle := util2.get_previous_cycle(:global.processing_cycle);
			    	   END IF;	 
			    	   :PARAMETER.PROCESSING_CYCLE :=ln_old_cycle;    
               BEGIN
			           SELECT DISTINCT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee --7608
			            WHERE NavDB_ID = :Cust_List_Blk.Customer
			              AND Effectivity_cycle = ln_old_cycle--:Dupl.New_Cycle
			              AND DCR_overall_status = 'OPEN';
               EXCEPTION
          	     WHEN NO_DATA_FOUND THEN
                   IF ln_next_cycle = 0 THEN
                      --SCR 7711 check - Venkat M 16-Apr-2018
                      /*select NVL(min(processing_cycle),0)  -- gives next cycle
                         into ln_next_cycle
		                     from pl_std_airport
		                    where data_supplier = :global.data_Supplier 
                         and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
               		   IF ln_next_cycle = 0 THEN
                       select NVL(min(processing_cycle),0)  -- gives next cycle
                         into ln_next_cycle
		                     from pl_tld_airport
		                    where data_supplier = :global.data_Supplier 
                          and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
								     END IF;               		                     
                     */
                     --Fix SCR 7711 check - Venkat M 16-Apr-2018
                    SELECT MIN(CYCLE)
                      INTO ln_next_cycle
                      FROM CYCLE
                     WHERE CYCLE > :global.processing_cycle;
                   END IF;
                   IF ln_next_cycle = 0 THEN
               	      RAISE NO_DATA_FOUND;
                   ELSE	  
                     :PARAMETER.PROCESSING_CYCLE :=ln_next_cycle;    
                   END IF;   
          	       SELECT DISTINCT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee  --7608
			              WHERE NavDB_ID = :Cust_List_Blk.Customer
			                AND Effectivity_cycle = ln_next_cycle 
			                AND DCR_overall_status = 'OPEN';
               END;             
             END IF;
         END;
      END IF;            
-- End Fix - SCR 7422 - Venkat M 12-JUL-2017
		:Cust_List_Blk.DCR_Number := ln_DCR;  
		END IF; --Fix SCR 7608 - Venkat M --26-Apr-2018			
	ELSE
		:Cust_List_Blk.DCR_Number := :global.dcr_number;	
	END IF;
	-- End Fix - SCR 7415 - Eswar KCL 
EXCEPTION
	WHEN no_data_found THEN
		dsp_msg('No DCR exists for '||:Cust_List_Blk.Customer||' in Cycle '||:Dupl.New_Cycle );
		RAISE FORM_TRIGGER_FAILURE;
		-- Begin Fix - SCR 7422 - Venkat M 12-JUL-2017
	WHEN err_no THEN
	  RAISE Form_Trigger_Failure; 
		-- End Fix - SCR 7422 - Venkat M 12-JUL-2017
	WHEN others THEN
		ls_Return := Show_Lov('DCR_List'); 
		IF NOT ls_Return THEN 
			dsp_msg('Please select a DCR from the List.'); 
			RAISE Form_Trigger_Failure; 
		END IF; 
END;
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
       * Name                                        KEY-NEXT-ITEM
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

-- Start Fix SCR 7481 - Ashish N - 04-JAN-2018
IF get_item_property('DUPL.IDENT_1ST', ENABLED) = 'TRUE' THEN
		go_item('DUPL.IDENT_1ST');
		ELSE
			null;
END IF; 
		

IF :DUPL.DUP_REP = 'D' THEN

		IF get_item_property('DUPL.IDENT_1ST', ENABLED) = 'TRUE' THEN
				go_item('DUPL.IDENT_1ST');

		ELSIF get_item_property('DUPL.NEW_GATE_IDENT', ENABLED) = 'TRUE' THEN
				go_item('DUPL.NEW_GATE_IDENT');
	
		ELSE 
				go_item('DUPL.DUPLICATE');
		END IF;
ELSE
	go_item('DUPL.REPLACE');
END IF;

-- END Fix SCR 7481 - Ashish N - 04-JAN-2018
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
   - Relations                                       
   ----------
   * Name                                            MESSAGE
   - Subclass Information                            
   - Comments                                        
   - Navigation Style                                Same Record
   - Previous Navigation Data Block                  
   * Next Navigation Data Block                      MESSAGE
   - Current Record Visual Attribute Group           
   - Query Array Size                                0
   - Number of Records Buffered                      0
   * Number of Records Displayed                     9
   - Query All Records                               No
   - Record Orientation                              Vertical
   - Single Record                                   No
   - Database Data Block                             Yes
   - Enforce Primary Key                             No
   - Query Allowed                                   Yes
   - Query Data Source Type                          Table
   - Query Data Source Name                          
   - Query Data Source Columns                       
   - Query Data Source Arguments                     
   - Alias                                           
   - Include REF Item                                No
   - WHERE Clause                                    
   - ORDER BY Clause                                 
   - Optimizer Hint                                  
   - Insert Allowed                                  Yes
   - Update Allowed                                  Yes
   - Locking Mode                                    Automatic
   - Delete Allowed                                  Yes
   - Key Mode                                        Automatic
   - Update Changed Columns Only                     No
   - Enforce Column Security                         No
   - Maximum Query Time                              0
   - Maximum Records Fetched                         0
   - DML Data Target Type                            Table
   - DML Data Target Name                            
   - Insert Procedure Name                           
   - Insert Procedure Result Set Columns             
   - Insert Procedure Arguments                      
   - Update Procedure Name                           
   - Update Procedure Result Set Columns             
   - Update Procedure Arguments                      
   - Delete Procedure Name                           
   - Delete Procedure Result Set Columns             
   - Delete Procedure Arguments                      
   - Lock Procedure Name                             
   - Lock Procedure Result Set Columns               
   - Lock Procedure Arguments                        
   - DML Array Size                                  1
   - Precompute Summaries                            No
   - DML Returning Value                             No
   * Show Scroll Bar                                 Yes
   * Scroll Bar Canvas                               MESSAGE
   * Scroll Bar Tab Page                             
   - Scroll Bar Orientation                          Vertical
   * Scroll Bar X Position                           383
   * Scroll Bar Y Position                           7
   * Scroll Bar Width                                13
   * Scroll Bar Length                               311
   - Scroll Bar Height                               0
   - Reverse Direction                               No
   * Visual Attribute Group                          SCROLL_BAR
   ^ Foreground Color                                white
   ^ Background Color                                blue
   ^ Fill Pattern                                    transparent
   - Row Banding Frequency                           0
   - Direction                                       Default
   * Triggers                                        
     ----------
     * Name                                          WHEN-NEW-BLOCK-INSTANCE
     - Subclass Information                          
     - Comments                                      
     - Trigger Style                                 PL/SQL
     * Trigger Text                                  

set_window_property('BASE_WINDOW', window_state, NORMAL);
     - Fire in Enter-Query Mode                      Yes
     - Execution Hierarchy                           Override
     - Display in 'Keyboard Help'                    No
     - 'Keyboard Help' Text                          
     - Trigger Steps                                 
     ----------
   * Items                                           
     ----------
     * Name                                          RUNTIME_MESSAGE
     - Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Justification                                 Start
     - Implementation Class                          
     * Multi-Line                                    Yes
     - Wrap Style                                    Word
     - Case Restriction                              Mixed
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     * Maximum Length                                1000
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Database Item                                 Yes
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     * Insert Allowed                                No
     * Update Allowed                                No
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     * Canvas                                        MESSAGE
     * Tab Page                                      
     * X Position                                    3
     * Y Position                                    7
     * Width                                         380
     * Height                                        35
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     - Foreground Color                              
     * Background Color                              r88g100b100
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     - Triggers                                      
     ----------
     * Name                                          CLOSE_IT
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Close
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     * Number of Items Displayed                     1
     - Visible                                       Yes
     * Canvas                                        MESSAGE
     * Tab Page                                      
     * X Position                                    218
     * Y Position                                    327
     * Width                                         64
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     MS Sans Serif
     * Font Size                                     8
     * Font Weight                                   Demilight
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

ERASE('global.replace_block');
:global.new_dcr_no:='';--7470
pc3_do_key('exit_form');
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          SAVE_IT
     * Item Type                                     Push Button
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     * Label                                         Save to File
     - Access Key                                    
     * Implementation Class                          oracle.forms.fd.LAF_XP_Button2
     - Iconic                                        No
     - Icon Filename                                 
     - Default Button                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Mouse Navigate                                Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     * Number of Items Displayed                     1
     - Visible                                       Yes
     * Canvas                                        MESSAGE
     * Tab Page                                      
     * X Position                                    152
     * Y Position                                    327
     * Width                                         64
     * Height                                        18
     - Cursor Style                                  <Unspecified>
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     * Foreground Color                              black
     * Background Color                              gray
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     * Font Name                                     MS Sans Serif
     * Font Size                                     8
     * Font Weight                                   Demilight
     * Font Style                                    Plain
     * Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Direction                                     Default
     * Triggers                                      
       ----------
       * Name                                        WHEN-BUTTON-PRESSED
       - Subclass Information                        
       - Comments                                    
       - Trigger Style                               PL/SQL
       * Trigger Text                                

declare
 	vFileId     client_text_io.file_type;
	v_file      varchar2(200);
	v_cancel_saving varchar2(6);
	v_delimiter varchar2(1);
	pl_id ParamList; --Fix--SCR 0096-Madhu 06-Jan-2011
begin

	ERASE('global.replace_block');
	:global.new_dcr_no:='';--7470
	globals.g_file_name := 'c:\'||get_application_property(CURRENT_FORM_NAME)||'.txt';
 	if globals.g_delimiter is null then
 		globals.g_delimiter := ',';
 	end if;
 	if globals.g_cancel is null then
 		globals.g_cancel := 'TRUE';
 	end if;
  -- Begin Fix--SCR 0096-Madhu 06-Jan-2011
 	pl_id := Get_Parameter_List('tempdata');
	If Not Id_Null(pl_id) Then 
		Destroy_Parameter_List(pl_id); 
	End If;
  pl_id := Create_Parameter_List('tempdata');
 	Add_Parameter(pl_id, 'G_FILE_NAME',TEXT_PARAMETER,globals.g_file_name); 
	Add_Parameter(pl_id, 'G_DELIMITER',TEXT_PARAMETER,globals.g_delimiter);
	Add_Parameter(pl_id, 'G_CANCEL',TEXT_PARAMETER,globals.g_cancel);
  call_form('export_destination',NO_HIDE,NO_REPLACE,NO_QUERY_ONLY,SHARE_LIBRARY_DATA,pl_id);
  Copy(Name_In('global.g_cancel'),globals.g_cancel);
 	if Name_In('global.g_cancel') = 'FALSE' Then
   vFileId := client_text_io.fopen(Name_In('global.g_file_name'), 'w');
--End Fix --SCR 0096-Madhu S-06-Jan-2011
   client_text_io.put_line(vFileId,'Generated on '||to_char(sysdate,'Month DD,YYYY')||' at '||to_char(sysdate,'HH24:MI'));
   client_text_io.put_line(vFileId,' ');
   first_record;
   loop
     client_text_io.put_line(vFileId,:message.runtime_message);
   	 exit when :system.last_record = 'TRUE';
     next_record;
   end loop;
     client_text_io.fclose(vFileId);
     globals.g_file_name := Null;
  end if;
  exception
  	when others then
  	dsp_msg('Sorry, please give an existing path and a file name with extension ''.txt''.');
  	call_form('export_destination',NO_HIDE,NO_REPLACE,NO_QUERY_ONLY,SHARE_LIBRARY_DATA,pl_id);--Fix--SCR 0096-Madhu 06-Jan-2011 --pl_id is added
end;	
  
       - Fire in Enter-Query Mode                    Yes
       - Execution Hierarchy                         Override
       - Display in 'Keyboard Help'                  No
       - 'Keyboard Help' Text                        
       - Trigger Steps                               
       ----------
     ----------
     * Name                                          DID
     - Item Type                                     Text Item
     - Subclass Information                          
     - Comments                                      
     - Help Book Topic                               
     - Enabled                                       Yes
     - Justification                                 Start
     - Implementation Class                          
     - Multi-Line                                    No
     - Wrap Style                                    Word
     - Case Restriction                              Mixed
     - Conceal Data                                  No
     - Keep Cursor Position                          No
     - Automatic Skip                                No
     - Popup Menu                                    
     - Keyboard Navigable                            Yes
     - Previous Navigation Item                      
     - Next Navigation Item                          
     - Data Type                                     Char
     - Data Length Semantics                         Null
     - Maximum Length                                30
     - Initial Value                                 
     - Required                                      No
     - Format Mask                                   
     - Lowest Allowed Value                          
     - Highest Allowed Value                         
     - Copy Value from Item                          
     - Synchronize with Item                         
     - Calculation Mode                              None
     - Formula                                       
     - Summary Function                              None
     - Summarized Block                              
     - Summarized Item                               
     - Current Record Visual Attribute Group         
     - Distance Between Records                      0
     - Number of Items Displayed                     0
     - Database Item                                 Yes
     - Column Name                                   
     - Primary Key                                   No
     - Query Only                                    No
     - Query Allowed                                 Yes
     - Query Length                                  0
     - Case Insensitive Query                        No
     - Insert Allowed                                Yes
     - Update Allowed                                Yes
     - Update Only if NULL                           No
     - Lock Record                                   No
     - List of Values                                
     - List X Position                               0
     - List Y Position                               0
     - Validate from List                            No
     - Editor                                        
     - Editor X Position                             0
     - Editor Y Position                             0
     - Visible                                       Yes
     - Canvas                                        
     - Tab Page                                      
     - X Position                                    0
     - Y Position                                    0
     * Width                                         45
     * Height                                        14
     - Cursor Style                                  <Unspecified>
     - Bevel                                         Lowered
     - Rendered                                      Yes
     - Show Vertical Scroll Bar                      No
     - Visual Attribute Group                        DEFAULT
     - Prompt Visual Attribute Group                 DEFAULT
     - Foreground Color                              
     - Background Color                              
     - Fill Pattern                                  
     - Row Banding Frequency                         0
     - Font                                          
     - Font Name                                     
     - Font Size                                     0
     - Font Weight                                   Medium
     - Font Style                                    Plain
     - Font Spacing                                  Normal
     - Prompt                                        
     - Prompt Display Style                          First Record
     - Prompt Justification                          Start
     - Prompt Attachment Edge                        Start
     - Prompt Alignment                              Start
     - Prompt Attachment Offset                      0
     - Prompt Alignment Offset                       0
     - Prompt Reading Order                          Default
     - Prompt Foreground Color                       
     - Prompt Font                                   
     - Prompt Font Name                              
     - Prompt Font Size                              0
     - Prompt Font Weight                            Medium
     - Prompt Font Style                             Plain
     - Prompt Font Spacing                           Normal
     - Hint                                          
     - Display Hint Automatically                    No
     - Tooltip                                       
     - Tooltip Visual Attribute Group                
     - Initial Keyboard State                        Default
     - Reading Order                                 Default
     - Keyboard State                                Any
     - Triggers                                      
     ----------
   - Relations                                       
   ----------
 * Canvases                                          
   ----------
   * Name                                            MAIN
   - Canvas Type                                     Content
   - Subclass Information                            
   - Comments                                        
   - Help Book Topic                                 
   - Raise on Entry                                  No
   - Popup Menu                                      
   - Visible                                         Yes
   * Window                                          BASE_WINDOW
   * Viewport X Position on Canvas                   1
   * Viewport Y Position on Canvas                   1
   * Width                                           398
   * Height                                          417
   - Bevel                                           Lowered
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   * Background Color                                gray
   * Fill Pattern                                    transparent
   - Gradient Start Side                             None
   - Direction                                       Default
   * Graphics Objects                                
     ----------
     * Name                                          FRAME7
     * Graphics Type                                 Frame
     - Subclass Information                          
     - Layout Data Block                             
     * Update Layout                                 Manually
     - Layout Style                                  Form
     - Frame Alignment                               Column
     - Single Object Alignment                       Start
     * Horizontal Margin                             7
     * Vertical Margin                               14
     * Horizontal Object Offset                      14
     - Vertical Object Offset                        0
     - Allow Expansion                               Yes
     - Shrinkwrap                                    No
     - Vertical Fill                                 Yes
     - Maximum Objects per Line                      0
     - Start Prompt Alignment                        Start
     * Start Prompt Offset                           7
     - Top Prompt Alignment                          Center
     - Top Prompt Offset                             0
     - Allow Multi-line Prompts                      Yes
     - Allow Top-Attached Prompts                    No
     - Allow Start-Attached Prompts                  No
     - Number of Records Displayed                   1
     - Distance Between Records                      0
     - Show Scroll Bar                               No
     - Scroll Bar Alignment                          End
     * Scroll Bar Width                              14
     * X Position                                    0
     * Y Position                                    7
     * Width                                         399
     * Height                                        417
     * Line Width                                    .99
     - Dash Style                                    Solid
     - Cap Style                                     Butt
     - Join Style                                    Mitre
     * Bevel                                         Raised
     - Visual Attribute Group                        DEFAULT
     - Frame Title Visual Attribute Group            DEFAULT
     * Foreground Color                              white
     * Background Color                              gray
     * Fill Pattern                                  transparent
     - Edge Foreground Color                         
     * Edge Background Color                         white
     * Edge Pattern                                  solid
     * Frame Title                                   
     * Frame Title Alignment                         Start
     * Frame Title Offset                            6
     * Frame Title Spacing                           3
     - Frame Title Reading Order                     Default
     * Frame Title Foreground Color                  black
     - Title Font                                    
     * Frame Title Font Name                         Tahoma
     * Frame Title Font Size                         8
     * Frame Title Font Weight                       Demilight
     * Frame Title Font Style                        Plain
     * Frame Title Font Spacing                      Normal
     ----------
     * Name                                          TEXT17
     * Graphics Type                                 Text
     - Subclass Information                          
     * X Position                                    119
     * Y Position                                    23
     * Width                                         128
     * Height                                        10
     - Line Width                                    0
     - Dash Style                                    Solid
     - Cap Style                                     Butt
     - Join Style                                    Mitre
     - Rotation Angle                                0
     - Custom Spacing                                0
     - Line Spacing                                  Single
     - Fixed Bounding Box                            No
     - Wrap Text                                     Yes
     * Bounding Box Scaleable                        No
     - Font Scaleable                                No
     * Horizontal Justification                      Start
     - Vertical Justification                        Top
     - Horizontal Origin                             Left
     * Vertical Origin                               Center
     * Bevel                                         None
     - Visual Attribute Group                        DEFAULT
     - Foreground Color                              
     * Background Color                              gray
     * Fill Pattern                                  none
     - Edge Foreground Color                         
     * Edge Background Color                         white
     * Edge Pattern                                  none
     - Direction                                     Default
     * Compound Text Objects                         
       ----------
       * Name                                        CMPTXT18
       * Simple Text Objects                         
         ----------
         * Name                                      TEXTSTR19
         - Help Book Topic                           
         * List Item Value                           Select Duplication Parameters
         * Foreground Color                          black
         - Font                                      
         * Font Name                                 Tahoma
         * Font Size                                 10
         * Font Weight                               Bold
         * Font Style                                Underline
         * Font Spacing                              Normal
         ----------
       ----------
     ----------
     * Name                                          TEXT86
     * Graphics Type                                 Text
     - Subclass Information                          
     * X Position                                    13
     * Y Position                                    126
     * Width                                         7
     * Height                                        10
     - Line Width                                    0
     - Dash Style                                    Solid
     - Cap Style                                     Butt
     - Join Style                                    Mitre
     - Rotation Angle                                0
     - Custom Spacing                                0
     - Line Spacing                                  Single
     - Fixed Bounding Box                            No
     * Wrap Text                                     No
     * Bounding Box Scaleable                        No
     - Font Scaleable                                No
     * Horizontal Justification                      Start
     - Vertical Justification                        Top
     - Horizontal Origin                             Left
     * Vertical Origin                               Center
     * Bevel                                         None
     - Visual Attribute Group                        DEFAULT
     * Foreground Color                              white
     * Background Color                              gray
     * Fill Pattern                                  none
     - Edge Foreground Color                         
     * Edge Background Color                         white
     * Edge Pattern                                  none
     - Direction                                     Default
     * Compound Text Objects                         
       ----------
       * Name                                        CMPTXT87
       * Simple Text Objects                         
         ----------
         * Name                                      TEXTSTR88
         - Help Book Topic                           
         * List Item Value                           1.
         * Foreground Color                          black
         - Font                                      
         * Font Name                                 Tahoma
         * Font Size                                 8
         * Font Weight                               Bold
         * Font Style                                Plain
         * Font Spacing                              Normal
         ----------
       ----------
     ----------
   ----------
   * Name                                            CUSTOMER
   * Canvas Type                                     Stacked
   - Subclass Information                            
   - Comments                                        
   - Help Book Topic                                 
   - Raise on Entry                                  No
   - Popup Menu                                      
   * Viewport X Position                             198
   * Viewport Y Position                             30
   * Viewport Width                                  199
   * Viewport Height                                 331
   * Visible                                         No
   * Window                                          BASE_WINDOW
   * Viewport X Position on Canvas                   0
   - Viewport Y Position on Canvas                   0
   * Width                                           201
   * Height                                          330
   * Bevel                                           None
   - Show Horizontal Scroll Bar                      No
   - Show Vertical Scroll Bar                        No
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Gradient Start Side                             None
   - Direction                                       Default
   * Graphics Objects                                
     ----------
     * Name                                          FRAME7
     * Graphics Type                                 Frame
     - Subclass Information                          
     - Layout Data Block                             
     * Update Layout                                 Manually
     - Layout Style                                  Form
     - Frame Alignment                               Column
     - Single Object Alignment                       Start
     * Horizontal Margin                             7
     * Vertical Margin                               14
     * Horizontal Object Offset                      14
     - Vertical Object Offset                        0
     - Allow Expansion                               Yes
     - Shrinkwrap                                    No
     - Vertical Fill                                 Yes
     - Maximum Objects per Line                      0
     - Start Prompt Alignment                        Start
     - Start Prompt Offset                           0
     - Top Prompt Alignment                          Center
     - Top Prompt Offset                             0
     - Allow Multi-line Prompts                      Yes
     - Allow Top-Attached Prompts                    No
     - Allow Start-Attached Prompts                  No
     - Number of Records Displayed                   1
     - Distance Between Records                      0
     - Show Scroll Bar                               No
     - Scroll Bar Alignment                          End
     * Scroll Bar Width                              14
     - X Position                                    0
     * Y Position                                    5
     * Width                                         199
     * Height                                        326
     * Line Width                                    .99
     - Dash Style                                    Solid
     - Cap Style                                     Butt
     - Join Style                                    Mitre
     * Bevel                                         Raised
     - Visual Attribute Group                        DEFAULT
     - Frame Title Visual Attribute Group            DEFAULT
     - Foreground Color                              
     * Background Color                              gray
     * Fill Pattern                                  transparent
     - Edge Foreground Color                         
     * Edge Background Color                         white
     * Edge Pattern                                  solid
     * Frame Title                                   
     * Frame Title Alignment                         Start
     * Frame Title Offset                            6
     * Frame Title Spacing                           3
     - Frame Title Reading Order                     Default
     * Frame Title Foreground Color                  black
     - Title Font                                    
     * Frame Title Font Name                         Tahoma
     * Frame Title Font Size                         8
     * Frame Title Font Weight                       Demilight
     * Frame Title Font Style                        Plain
     * Frame Title Font Spacing                      Normal
     ----------
   ----------
   * Name                                            MESSAGE
   * Canvas Type                                     Stacked
   - Subclass Information                            
   - Comments                                        
   - Help Book Topic                                 
   - Raise on Entry                                  No
   - Popup Menu                                      
   - Viewport X Position                             0
   - Viewport Y Position                             0
   * Viewport Width                                  398
   * Viewport Height                                 417
   * Visible                                         No
   * Window                                          BASE_WINDOW
   * Viewport X Position on Canvas                   0
   - Viewport Y Position on Canvas                   0
   * Width                                           398
   * Height                                          417
   * Bevel                                           None
   - Show Horizontal Scroll Bar                      No
   - Show Vertical Scroll Bar                        No
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Gradient Start Side                             None
   - Direction                                       Default
   - Graphics Objects                                
   ----------
   * Name                                            CUST_LIST_CAN
   * Canvas Type                                     Stacked
   - Subclass Information                            
   - Comments                                        
   - Help Book Topic                                 
   - Raise on Entry                                  No
   - Popup Menu                                      
   * Viewport X Position                             16
   * Viewport Y Position                             220
   * Viewport Width                                  193
   * Viewport Height                                 203
   - Visible                                         Yes
   * Window                                          BASE_WINDOW
   * Viewport X Position on Canvas                   1
   * Viewport Y Position on Canvas                   1
   * Width                                           194
   * Height                                          248
   * Bevel                                           None
   - Show Horizontal Scroll Bar                      No
   - Show Vertical Scroll Bar                        No
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   * Background Color                                gray
   - Fill Pattern                                    
   - Gradient Start Side                             None
   - Direction                                       Default
   * Graphics Objects                                
     ----------
     * Name                                          TEXT92
     * Graphics Type                                 Text
     - Subclass Information                          
     * X Position                                    1
     * Y Position                                    17
     * Width                                         179
     * Height                                        20
     - Line Width                                    0
     - Dash Style                                    Solid
     - Cap Style                                     Butt
     - Join Style                                    Mitre
     - Rotation Angle                                0
     - Custom Spacing                                0
     - Line Spacing                                  Single
     - Fixed Bounding Box                            No
     * Wrap Text                                     No
     * Bounding Box Scaleable                        No
     - Font Scaleable                                No
     * Horizontal Justification                      Start
     - Vertical Justification                        Top
     - Horizontal Origin                             Left
     * Vertical Origin                               Center
     * Bevel                                         None
     - Visual Attribute Group                        DEFAULT
     * Foreground Color                              white
     * Background Color                              gray
     * Fill Pattern                                  none
     - Edge Foreground Color                         
     * Edge Background Color                         white
     * Edge Pattern                                  none
     - Direction                                     Default
     * Compound Text Objects                         
       ----------
       * Name                                        CMPTXT93
       * Simple Text Objects                         
         ----------
         * Name                                      TEXTSTR94
         - Help Book Topic                           
         * List Item Value                           3. Customer Ident(s) and DCR Numbers to 

         * Foreground Color                          black
         - Font                                      
         * Font Name                                 Tahoma
         * Font Size                                 8
         * Font Weight                               Bold
         * Font Style                                Plain
         * Font Spacing                              Normal
         ----------
       ----------
       * Name                                        CMPTXT95
       * Simple Text Objects                         
         ----------
         * Name                                      TEXTSTR96
         - Help Book Topic                           
         * List Item Value                               Replace 
         * Foreground Color                          black
         - Font                                      
         * Font Name                                 Tahoma
         * Font Size                                 8
         * Font Weight                               Bold
         * Font Style                                Plain
         * Font Spacing                              Normal
         ----------
       ----------
     ----------
   ----------
 - Editors                                           
 - Events                                            
 * Form Parameters                                   
   ----------
   * Name                                            REP_DCR
   - Subclass Information                            
   - Comments                                        
   * Parameter Data Type                             Char
   - Parameter Initial Value                         
   ----------
   * Name                                            REP_CHECK
   - Subclass Information                            
   - Comments                                        
   - Parameter Data Type                             Char
   * Parameter Initial Value                         D
   ----------
   * Name                                            RML
   - Subclass Information                            
   - Comments                                        
   - Parameter Data Type                             Char
   * Parameter Initial Value                         N
   ----------
   * Name                                            REP_CUST
   - Subclass Information                            
   - Comments                                        
   - Parameter Data Type                             Char
   - Parameter Initial Value                         
   ----------
   * Name                                            REP
   - Subclass Information                            
   - Comments                                        
   - Parameter Data Type                             Char
   * Parameter Initial Value                         N
   ----------
   * Name                                            VALIDATE_CUSTOMER
   - Subclass Information                            
   - Comments                                        
   * Parameter Data Type                             Number
   * Parameter Initial Value                         0
   ----------
   * Name                                            CUST_IDENTS
   - Subclass Information                            
   - Comments                                        
   - Parameter Data Type                             Char
   - Parameter Initial Value                         
   ----------
   * Name                                            LS_INSTANCE_NAME
   - Subclass Information                            
   - Comments                                        
   - Parameter Data Type                             Char
   * Parameter Initial Value                         DEV
   ----------
   * Name                                            PROCESSING_CYCLE
   - Subclass Information                            
   - Comments                                        
   * Parameter Data Type                             Number
   - Parameter Initial Value                         
   ----------
 * Lists of Values                                   
   ----------
   * Name                                            DCR_LIST
   - Subclass Information                            
   - Comments                                        
   * Title                                           Available DCRs
   - List Type                                       Record Group
   * Record Group                                    DCR_LIST
   * Column Mapping Properties                       
     ----------
     * Name                                          DCR_NUMBER
     * Title                                         DCR Number
     * Return Item                                   CUST_LIST_BLK.DCR_NUMBER
     * Display Width                                 10
     ----------
     * Name                                          REASON_FOR_CHANGE
     * Title                                         Reason for Change
     * Return Item                                   
     * Display Width                                 20
     ----------
   - Filter Before Display                           No
   - Automatic Display                               No
   - Automatic Refresh                               Yes
   - Automatic Select                                No
   - Automatic Skip                                  No
   - Automatic Position                              No
   * Automatic Column Width                          Yes
   * X Position                                      220
   * Y Position                                      220
   * Width                                           180
   * Height                                          158
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   * Background Color                                Gray
   - Fill Pattern                                    
   - Font                                            
   * Font Name                                       Tahoma
   * Font Size                                       9
   * Font Weight                                     Bold
   * Font Style                                      Plain
   * Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            CUST_LIST
   - Subclass Information                            
   - Comments                                        
   * Title                                           Customer List
   - List Type                                       Record Group
   * Record Group                                    CUST_LIST
   * Column Mapping Properties                       
     ----------
     * Name                                          CUSTOMER_IDENT
     * Title                                         Customer_Ident
     * Return Item                                   DUPL.NEW_CUSTOMER_IDENT
     * Display Width                                 27
     ----------
     * Name                                          CUSTOMER_NAME
     * Title                                         Customer Name
     * Return Item                                   
     * Display Width                                 344
     ----------
   - Filter Before Display                           No
   - Automatic Display                               No
   - Automatic Refresh                               Yes
   - Automatic Select                                No
   - Automatic Skip                                  No
   * Automatic Position                              Yes
   - Automatic Column Width                          No
   - X Position                                      0
   - Y Position                                      0
   * Width                                           300
   * Height                                          300
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
   * Name                                            PROCESSING_CYCLE
   - Subclass Information                            
   - Comments                                        
   * Title                                           Cycle List
   - List Type                                       Record Group
   * Record Group                                    PROCESSING_CYCLE
   * Column Mapping Properties                       
     ----------
     * Name                                          CYCLE
     * Title                                         Processing_Cycle
     * Return Item                                   DUPL.NEW_CYCLE
     * Display Width                                 90
     ----------
   - Filter Before Display                           No
   - Automatic Display                               No
   - Automatic Refresh                               Yes
   - Automatic Select                                No
   - Automatic Skip                                  No
   * Automatic Position                              Yes
   - Automatic Column Width                          No
   - X Position                                      0
   - Y Position                                      0
   * Width                                           200
   * Height                                          300
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
 - Menus                                             
 * Object Groups                                     
   ----------
   * Name                                            WEBUTIL
   * Subclass Information                            
     ----------
     * Source File                                   webutil.olb
     - Source Path                                   
     - Source Module                                 
     * Source Level                                  
       ----------
       * Source Name                                 WEBUTIL
       ----------
       * Source Name                                 WEBUTIL
       ----------
     ----------
   - Comments                                        
   * Object Group Children                           
     ----------
     * Name                                          WEBUTIL_ERROR
     * Subclass Information                          
       ----------
       - Source File                                 
       - Source Path                                 
       - Source Module                               
       - Source Level                                
       ----------
     - Real Object Pointed to by the Object Group Child
     ----------
     * Name                                          WEBUTIL_HIDDEN_WINDOW
     * Subclass Information                          
       ----------
       - Source File                                 
       - Source Path                                 
       - Source Module                               
       - Source Level                                
       ----------
     - Real Object Pointed to by the Object Group Child
     ----------
     * Name                                          WEBUTIL_CANVAS
     * Subclass Information                          
       ----------
       - Source File                                 
       - Source Path                                 
       - Source Module                               
       - Source Level                                
       ----------
     - Real Object Pointed to by the Object Group Child
     ----------
     * Name                                          WEBUTIL
     * Subclass Information                          
       ----------
       - Source File                                 
       - Source Path                                 
       - Source Module                               
       - Source Level                                
       ----------
     - Real Object Pointed to by the Object Group Child
     ----------
   ----------
 * Program Units                                     
   ----------
   * Name                                            MODIFICATION_HISTORY
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

PROCEDURE Modification_History IS
BEGIN
  NULL;
  
/*
---------------------------------------------------------------------------------------------------------
Modification History:

 Sno			Date					SCR			Programmer			Generation				Changes Summary
---------------------------------------------------------------------------------------------------------
 1			09-May-2017		7415.00 	Eswar KC				46   							Not checking the DCR Association for ENGineeiring instance
---------------------------------------------------------------------------------------------------------
*/

END;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            CHECK_PARAMETERS
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               


   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
   -- Modification Log:2
   --                    Programmer: Harikrishna
   --                    Date:              03/May/2018
   --                    Purpose: SCR 7790.01: New checkbox "Remove Cost Index" is provided on "Duplicate Records" form
   --                    which will be enabled for only Companyroutes,where user can select to blankout the Cost index value.
   -- **************************************************
PROCEDURE check_parameters IS
  v_ncheck number := 0;
  v_last_query varchar2(2000);
--Begin Fix - SCR 3504 -Eswar KC - 03 Dec,2008
  fname	varchar2(100) := get_application_property(CALLING_FORM);
--End Fix - SCR 3504 -Eswar KC - 03 Dec,2008 
BEGIN
	
	--Begin Fix - SCR 7790.01 -Harikrishna CH - 03 May 2018
	--Added new global parameter to hold the value of the 'Remove cost index' Checkbox.
	--This parameter value will be used in Duplicate_step2(Corept_lib.pll) procedure, to decide the target Cost index value to be passed.  
	:global.remove_cost_index := :dupl.blnk_cost_indx;
	--End Fix - SCR 7790.01 
	
 	-- Confirm the request
 	if :dupl.nrecords_T = 'ALL' then
 		if :dupl.geninhouse = 'Y' then
 			v_ncheck := display_alert.more_buttons('W','All Records?',
 			'The system will duplicate generated in house records of customer '''||
 			:global.curr_customer_ident||''' in cycle '||:global.record_cycle||
 			' under the selected customer(s) for cycle '||
 			:dupl.new_cycle,	'Continue','Cancel');
 		else
 			v_ncheck := display_alert.more_buttons('W','All Records?',
 			'The system will duplicate all '''||:global.curr_customer_ident||
 			''' records in cycle '||:global.record_cycle||' under the selected '||
 			'customer(s) for cycle '||:dupl.new_cycle,	'Continue','Cancel');
 		end if;	
 		if v_ncheck = 1 then
 			--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138 --Madhu
 				:global.new_customer_ident := :dupl.new_replace_cust;
 		--	ELSE
 		--		:global.new_customer_ident := :dupl.new_customer_ident;
     --	END IF;
     	:global.new_cycle := :dupl.new_cycle;
     	:global.num_to_duplicate := 'ALL';
      :global.geninhouse := :dupl.geninhouse;
      :global.do_duplicate := 'Y';
      go_block('MESSAGE');
      set_item_property('CLOSE_IT',enabled,property_false);
			set_item_property('SAVE_IT',enabled,property_false);     
  	--BEGIN SCR 7853.01 - Venkat M - 08-Jun-2018
  	  IF :dupl.geninouthouse = 'Y' THEN
  	     :global.geninouthouse := :dupl.geninouthouse;
  	  ELSIF :global.record_type = 'S' THEN
  	  	 :global.geninouthouse := 'Y';
      ELSE
  	  	 :global.geninouthouse := 'S';
  	  END IF;	 
  	  --END SCR 7853.01 - Venkat M - 08-Jun-2018
      duplicate_step2;
      Hide_View('Cust_List_Can');--MOD 1
      set_item_property('CLOSE_IT',enabled,property_true);
      set_item_property('SAVE_IT',enabled,property_true);
      --exit_form;  
  	else
  		raise form_trigger_failure;
  	end if;
 	elsif :dupl.nrecords_S = 'SET' or :dupl.nrecords_T = 'SET' then
 		if :dupl.nrecords_S = 'SET' and :dupl.datatyp = 'STD' then
 		--	message('set std');message('set std'); -- Fix - SCR 5822 - Eswar KC - 28-Oct-2012
 			v_ncheck := display_alert.more_buttons('W','Set of Records?',
 			'The system will duplicate displayed records which still match the last query '||
 			'in cycle '||:global.record_cycle||' for cycle '||:dupl.new_cycle,	'Continue','Cancel');
 		else
 			v_ncheck := display_alert.more_buttons('W','Set of Records?',
 			'The system will duplicate displayed records which still match the last query '||
 			'in cycle '||:global.record_cycle||' under the selected '||
 			'customer(s) for cycle '||:dupl.new_cycle,	'Continue','Cancel');
 		end if;
 		if v_ncheck = 1 then
 		--	IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138 --Madhu
 				:global.new_customer_ident := :dupl.new_replace_cust;
 			--ELSE
 				--:global.new_customer_ident := :dupl.new_customer_ident;-- Commented for SCR 7138 --Madhu
 			--END IF;
     	:global.new_cycle := :dupl.new_cycle;
     	:global.2nd_ident := rtrim(:dupl.ident_2nd); --Fix SCR 7730- Ashish N- 08-Mar-2018
     
     	:global.num_to_duplicate := 'SET';
      :global.geninhouse := :dupl.geninhouse;
      :global.do_duplicate := 'Y';
      go_block('MESSAGE');
      set_item_property('CLOSE_IT',enabled,property_false);
			set_item_property('SAVE_IT',enabled,property_false);      
  	--BEGIN SCR 7853.01 - Venkat M - 08-Jun-2018
  	  IF :dupl.geninouthouse = 'Y' THEN
  	     :global.geninouthouse := :dupl.geninouthouse;
  	  ELSIF :global.record_type = 'S' THEN
  	  	 :global.geninouthouse := 'Y';
  	  ELSE
  	  	 :global.geninouthouse := 'S';
  	  END IF;	 
  	  --END SCR 7853.01 - Venkat M - 08-Jun-2018
      duplicate_step2;
      Hide_View('Cust_List_Can');--MOD 1
      set_item_property('CLOSE_IT',enabled,property_true);
      set_item_property('SAVE_IT',enabled,property_true);
      --exit_form;  
  	else
  		raise form_trigger_failure;
  	end if;	 			
 		else
 			--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
  	  :global.new_gate_ident := :dupl.new_gate_ident;
  	  --End Fix - SCR 3504 -Eswar KC -25 Nov,2008
 		 if :global.record_type = 'T' then
 		 	if rtrim(:dupl.ident_1st) is null and rtrim(:dupl.ident_2nd) is null then
  	  	v_ncheck := display_alert.more_buttons('W','Current Record',
  	  	'The system will duplicate the current '''||:global.curr_customer_ident||
  	  	''' customer''s record under the selected'||
  	  	' Customer Ident(s) for cycle '||:dupl.new_cycle,'Continue','Cancel');
  	  elsif rtrim(:dupl.ident_1st) is not null then
  	  	v_ncheck := display_alert.more_buttons('W','Current Record',
  	  	'The system will duplicate the current '''||:global.curr_customer_ident||
  	  	''' customer''s record under the selected'||
  	  	' Customer Ident(s) for cycle '||:dupl.new_cycle||
  	  	' with new ident '''||:dupl.ident_1st||'''', 'Continue','Cancel');
  	  elsif rtrim(:dupl.ident_2nd) is not null then	
  	  	v_ncheck := display_alert.more_buttons('W','Current Record',
  	  	'The system will duplicate the current '''||:global.curr_customer_ident||
  	  	''' customer''s record under the selected'||
  	  	' Customer Ident(s) for cycle '||:dupl.new_cycle||
  	  	' with new airport/fix ident/cost index '''||:dupl.ident_2nd||'''', 'Continue','Cancel'); -- Fix scr 7730.01- Ashish N- 21-Mar-2018
  	  end if;	
  	else
           -- global.record_type = 'S' --
  	  if :DUPL.DATATYP != 'STD' then
  	  	if rtrim(:dupl.ident_1st) is null then
  	  		v_ncheck := display_alert.more_buttons('W','Current Record',
  	  		'The system will duplicate the current standard record '||
  	  		'under the selected Customer Ident(s) for cycle '||
  	  		:dupl.new_cycle,'Continue','Cancel');
  	  	else
  	  		v_ncheck := display_alert.more_buttons('W','Current Record',
  	  		'The system will duplicate the current standard record '||
  	  		'under the selected Customer Ident(s) for cycle '||
  	  		:dupl.new_cycle||' with new ident '''||:dupl.ident_1st||'''','Continue','Cancel');
  	  	end if;
  	  else
  	  	if rtrim(:dupl.ident_1st) is null then
  	  		v_ncheck := display_alert.more_buttons('W','Current Record',
  	  		'The system will duplicate the current standard record '||
  	  		'to cycle '||:dupl.new_cycle,'Continue','Cancel');
  	  	else
  	  		v_ncheck := display_alert.more_buttons('W','Current Record',
  	  		'The system will duplicate the current standard record '||
  	  		'to cycle '||:dupl.new_cycle||' with new ident '''||:dupl.ident_1st||'''','Continue','Cancel');
  	  	end if;
  	  end if;		
    end if;
  	if v_ncheck = 1 then
  		if :DUPL.DATATYP = 'STD' then
  			:global.new_customer_ident := null;  			
  		else
  		--	:global.new_customer_ident := :dupl.new_customer_ident; -- Commented for SCR 7138 --Madhu
	  	--	IF :Parameter.Rep = 'Y' THEN --MOD 1 -- -- Commented for SCR 7138 --Madhu
	 				Copy(:dupl.new_replace_cust,'global.new_customer_ident');--MOD 1
	 		--	ELSE
	  			--copy(:dupl.new_customer_ident,'global.new_customer_ident');-- Fix SCR 0096 -- Madhu -- 30-Jan-2012
  		--	END IF; -- Commented for SCR 7138 --Madhu
  		end if;
  		:global.new_cycle := :dupl.new_cycle;
      :global.num_to_duplicate := 'ONE';
      :global.do_duplicate := 'Y';
      :global.1st_ident := rtrim(:dupl.ident_1st);
      :global.2nd_ident := rtrim(:dupl.ident_2nd);
      :global.2nd_icao := rtrim(:dupl.icao_2nd);
      go_block('MESSAGE');
      set_item_property('CLOSE_IT',enabled,property_false);
			set_item_property('SAVE_IT',enabled,property_false);  

  	--BEGIN SCR 7853.01 - Venkat M - 08-Jun-2018
  	  IF :dupl.geninouthouse = 'Y' THEN
  	     :global.geninouthouse := :dupl.geninouthouse;
  	  ELSIF :global.record_type = 'S' THEN
  	  	 :global.geninouthouse := 'Y';
  	  ELSE
  	  	 :global.geninouthouse := 'S';
  	  END IF;	 
  	  --END SCR 7853.01 - Venkat M - 08-Jun-2018
--Begin Fix - SCR 3504 -Eswar KC -03 Dec,2008  			
    	if fname = 'GATES' then
       duplicate_step_2;
    	else
	     duplicate_step2;
	    end if;
--End Fix - SCR 3504 -Eswar KC -03 Dec,2008 
			Hide_View('Cust_List_Can');--MOD 1
      set_item_property('CLOSE_IT',enabled,property_true);
      set_item_property('SAVE_IT',enabled,property_true);
      --exit_form;                
  	else
  		clear_message;
  		raise form_trigger_failure;
  	end if;
  end if; 

END;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            DELETE_ONE_CUST
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

PROCEDURE delete_one_cust IS
	v_length number;
	v_cust_1   varchar2(20000);--Fix--SCR 0096-Madhu 25-Jan-2011 Size is Increased 
	v_cust_2   varchar2(20000);--Fix--SCR 0096-Madhu 25-Jan-2011 Size is Increased
begin
	v_length := instr(','||:DUPL.NEW_CUSTOMER_IDENT||',',','||:customer.customer_ident||',');
	if v_length = 1 then
		v_cust_1 := null;
	else	
		v_cust_1 := rtrim(ltrim(substr(:DUPL.NEW_CUSTOMER_IDENT,1,v_length-2),', '),', ');
	end if;
	v_cust_2 := rtrim(ltrim(substr(:DUPL.NEW_CUSTOMER_IDENT,v_length+1+length(:customer.customer_ident)),', '),', ');
	:DUPL.NEW_CUSTOMER_IDENT := ltrim(v_cust_1||','||v_cust_2,', ');
END;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            VALIDATE_CUSTOMER
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

 -- **************************************************
 -- Modification Log:1
 --                    Programmer: Madhu
 --                    Date:              23/July/2014
 --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
 --                                          records into respective Pre library tables and refreshes the Master library
 -- **************************************************
PROCEDURE Validate_customer
IS
   GROUP_ID      recordgroup := FIND_GROUP ('NEW_CUSTOMER');
   v_row         NUMBER := 0;
   v_length      NUMBER;
   v_all_cust    VARCHAR2 (20000) := LTRIM (RTRIM (:dupl.new_customer_ident, ', '), ', '); --Fix--SCR 0096-Madhu 25-Jan-2011-- Size is Increased
   v_cust        VARCHAR2 (10);
-- v_cust    long(10000);
   v_count       NUMBER (1);
-- Begin Fix - SCR 4923 - Eswar KC - 31-May-2013
   vs_Supplier   VARCHAR2 (1);
   vn_Check      NUMBER;
   vs_Customer   VARCHAR2 (25000) := NULL;
   vs_data_suppl_name VARCHAR2 (30);
-- End Fix - SCR 4923 - Eswar KC - 31-May-2013

BEGIN
--MOD 1   
	--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138--Madhu
	   v_all_cust := null;
	   v_all_cust := :Parameter.Rep_Cust;  
	--END IF;
--MOD 1	
   v_length := INSTR (v_all_cust, ' ');

   WHILE v_length != 0 LOOP
      v_all_cust := RTRIM (SUBSTR (v_all_cust, 1, v_length - 1), ', ') || ',' || LTRIM (SUBSTR (v_all_cust, v_length), ', ');
      v_length   := INSTR (v_all_cust, ' ');
   END LOOP;
--MOD 1
	--IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138 --Madhu
		:dupl.new_replace_cust := v_all_cust;
	--ELSE
   	--:dupl.new_customer_ident := v_all_cust;-- Commented for SCR 7138 --Madhu
  --END IF;
--MOD 1
   --
   DELETE_GROUP_ROW (GROUP_ID, ALL_ROWS);

   WHILE v_all_cust IS NOT NULL LOOP
      v_length := INSTR (v_all_cust, ',');

      IF v_length = 0 THEN
         v_cust := v_all_cust;
         v_all_cust := NULL;
      ELSE
         v_cust := SUBSTR (v_all_cust, 1, v_length - 1);
         v_all_cust := SUBSTR (v_all_cust, v_length + 1);
      END IF;

      IF LENGTH (v_cust) > 3 THEN
         dsp_msg ( 'Invalid customer Ident ''' || v_cust || ''', correct it please.');
         RAISE form_trigger_failure;
      ELSE
   -- Begin Fix - SCR 4923 - Eswar KC - 31-May-2013
         SELECT COUNT (*)
           INTO v_count
           FROM navdb
          WHERE UPPER (navdb_id) = UPPER (v_cust) OR UPPER (navdb_id) = UPPER (RPAD (v_cust, 3, ' '));

         IF v_count = 0 THEN
            dsp_msg ( 'Customer Ident ''' || v_cust || ''' not present in database. Please correct/delete it.');
            RAISE form_trigger_failure;
         END IF;

         SELECT data_supplier
           INTO vs_Supplier
           FROM navdb
          WHERE UPPER (navdb_id) = UPPER (v_cust) OR UPPER (navdb_id) = UPPER (RPAD (v_cust, 3, ' '));

         IF vs_Supplier != NAME_IN ('global.data_supplier') THEN
            IF vs_Customer IS NULL
            THEN
               vs_Customer := v_cust;
            ELSE
               vs_Customer := vs_Customer || ',' || v_cust;
            END IF;
         END IF;
   -- End Fix - SCR 4923 - Eswar KC - 31-May-2013

         SELECT COUNT (*)
           INTO v_count
           FROM customer
          WHERE customer_ident = v_cust OR customer_ident = RPAD (v_cust, 3, ' ');

         IF v_count = 0
         THEN
            dsp_msg ( 'Invalid Customer Ident ''' || v_cust || '''. Please correct/delete it.');
            RAISE form_trigger_failure;
         ELSE
            IF INSTR (',' || v_all_cust || ',', ',' || v_cust || ',') > 0 THEN
               dsp_msg ( 'Customer Ident ''' || v_cust || ''' is duplicated. Please delete one.');
               RAISE form_trigger_failure;
            END IF;
         END IF;

         ADD_GROUP_ROW (GROUP_ID, end_of_group);
         v_row := v_row + 1;
         SET_GROUP_CHAR_CELL ('NEW_CUSTOMER.CUST_ID', v_row, LTRIM (RTRIM (v_cust)));
      END IF;
   END LOOP;

   -- Begin Fix - SCR 4923 - Eswar KC - 31-May-2013
		:PARAMETER.VALIDATE_CUSTOMER := 1;
		:PARAMETER.CUST_IDENTS := vs_Customer;
  -- End Fix - SCR 4923 - Eswar KC - 31-May-2013

END;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            DUPL_RECORDS
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

PROCEDURE dupl_records (p_supplier           IN     VARCHAR2,
                        p_record_type        IN     VARCHAR2,     -- from record type
                        p_no_of_records      IN     VARCHAR2,     -- 'ONE', 'SET', 'ALL'
                        p_geninhouse         IN     VARCHAR2,     -- 'Y', 'N', 'S'
                        p_old_customer       IN     VARCHAR2,     -- from cust
                        p_new_customer       IN     VARCHAR2,     -- to cust
                        p_table_name         IN     VARCHAR2,     -- from table
                        p_row_id             IN     VARCHAR2,
                        p_dcr_number         IN     NUMBER,
                        p_from_cycle         IN     NUMBER,
                        p_to_cycle           IN     NUMBER,
                        p_recent_cycle       IN     NUMBER,
                        P_NEW_CYCLE_DATA     IN     VARCHAR2,
                        p_1st_ident          IN     VARCHAR2,
                        p_2nd_ident          IN     VARCHAR2,
                        p_2nd_icao           IN     VARCHAR2,
                        p_details_exist      IN     VARCHAR2,
                        p_where              IN     VARCHAR2,
                        p_refresh_may_need      OUT VARCHAR2,
                        p_message               OUT VARCHAR2,
                        p_new_gate_ident     IN     VARCHAR2,
                        p_geninouthouse  IN VARCHAR2 default 'Y')  --Fix SCR 7853.01 - Venkat M 21-jun-2018
IS
   v_stmt               VARCHAR2 (5000);
   v_stmt1              VARCHAR2 (5000);
   v_where_stmt         VARCHAR2 (3000);
   v_message            VARCHAR2 (300);
   v_nmrec              NUMBER := 0;
   v_target_table       VARCHAR2 (30);
   vs_Target_Supplier   VARCHAR2 (1);  -- SCR 4923 - Eswar KC 
   vn_Refresh_Cycle     NUMBER (6);    -- SCR 4923 - Eswar KC 
   vn_Refresh_Old_Cycle NUMBER (6);    -- SCR 6106 - Eswar KC 
   v_start_dcr          NUMBER;
   v_dcr_num            NUMBER;
   v_nminvalid          NUMBER := 0;
   v_detail             VARCHAR2 (30);
   get_dcr              cpt_types.refcur;
   v_pk_fields          VARCHAR2 (1000);
   v_count              NUMBER;
   V_DUP_COUNT          NUMBER;
   v_cycle_data         VARCHAR2 (1);
   v_area_code          VARCHAR2 (1);
   e_Duplicate			EXCEPTION;
	ls_gate						pl_tld_gate.gate_ident%type;
	ls_airport_ident	pl_tld_gate.airport_ident%type;
	ls_airport_icao		pl_tld_gate.airport_icao%type;
	ln_DCR_Num				pl_tld_gate.create_dcr_number%type;
	ls_One_Where			VARCHAR2(1000);
	ls_Where					VARCHAR2(1000);
	v_table_type			VARCHAR2(100);

   
   CURSOR get_detail
   IS
      SELECT TABLE_NAME
        FROM cpt_table_list
       WHERE PARENT_TABLE = UPPER (SUBSTR (v_target_table, 4));

BEGIN
   IF p_record_type = 'S' THEN
      IF p_new_customer IS NULL THEN
         v_target_table := p_table_name;
      ELSE
         v_target_table := 'PL_TLD_' || SUBSTR (p_table_name, 8);
      END IF;
   ELSE
      v_target_table := p_table_name;
   END IF;
	
   -- Begin Fix - SCR 4923 - Eswar KC - 31-May-2013
   IF p_new_customer IS NOT NULL THEN
      SELECT data_supplier
        INTO vs_Target_Supplier
        FROM navdb
       WHERE UPPER (navdb_id) = UPPER (p_new_customer);
   ELSE
      vs_Target_Supplier := p_supplier;
   END IF;
   -- End Fix - SCR 4923 - Eswar KC - 31-May-2013

   -- Get the start dcr number
   SELECT dcr_number_seq.NEXTVAL INTO v_start_dcr FROM DUAL;

   --  Copy the master records
   BEGIN
      SELECT 'Y'
        INTO v_cycle_data
        FROM all_tab_columns
       WHERE     owner = 'CPT'
             AND table_name = UPPER (SUBSTR (v_target_table, 4))
             AND column_name = 'CYCLE_DATA';
   EXCEPTION
      WHEN NO_DATA_FOUND THEN
         v_cycle_data := 'N';
   END;

   IF v_target_table LIKE 'PL_STD%' THEN
      BEGIN
         SELECT 'Y'
           INTO v_area_code
           FROM all_tab_columns
          WHERE     owner = 'CPT'
                AND table_name = UPPER (SUBSTR (v_target_table, 4))
                AND column_name = 'AREA_CODE';
      EXCEPTION
         WHEN NO_DATA_FOUND THEN
            v_area_code := 'N';
      END;
   END IF;
--

    		v_stmt := set_insert_clause(v_target_table,v_cycle_data,v_area_code)||' '||
    	            set_select_clause(p_no_of_records,p_new_customer,p_table_name,p_dcr_number,p_to_cycle,
    	                            p_1st_ident,p_2nd_ident,p_2nd_icao,v_cycle_data,v_area_code,p_new_cycle_data,p_geninouthouse);-- mod 5  --Fix SCR 7853.01 -- Venkat M -21-Jun-2018

   -- Assigning New Gate Ident 
   IF NAME_IN ('global.new_gate_ident') IS NOT NULL THEN
      v_stmt1 := SUBSTR (v_stmt, 1, INSTR (v_stmt, 'GATE_IDENT', 1, 2) - 1) || '''' || :global.new_gate_ident || '''' || 
      					 SUBSTR (v_stmt, INSTR (v_stmt, 'GATE_LATITUDE', 1, 2) - 1);
      v_stmt := v_stmt1;
   END IF;
   --
   IF p_no_of_records = 'ALL' THEN
      NULL;
   ELSIF p_no_of_records = 'SET' THEN
      NULL;
   ELSE
      v_stmt := v_stmt || 'where rowid = chartorowid(''' || p_row_id || ''') ';
   END IF;
   --
   --IF Name_In('Parameter.Rep') = 'N' THEN
   	FORMS_DDL ('BEGIN ' || v_stmt || ';Commit;END;');

   IF NOT FORM_SUCCESS THEN
      --RAISE Form_Trigger_Failure;--Fix SCR 7138 --Madhu
      RAISE e_Duplicate;
   END IF;
   --
  v_nmrec := SQL%ROWCOUNT;

   --   Copy the detail records if exists
   IF p_details_exist = 'Y' AND v_nmrec > 0 THEN
      v_message := copy_details (p_supplier, p_record_type,p_no_of_records, p_geninhouse, p_old_customer, p_new_customer, v_target_table, p_row_id,
												p_dcr_number, p_from_cycle, p_to_cycle, p_1st_ident, p_2nd_ident, p_2nd_icao, p_where, p_new_cycle_data,p_geninouthouse);  --Fix SCR 7853.01 - Venkat M
   ELSE
      v_message := 'O.K.';
   END IF;
    --

   IF v_message = 'O.K.' THEN
      IF p_record_type = 'S' THEN
			IF Name_In('Parameter.Rep') = 'N' THEN --Fix SCR 7138 --Madhu
				 IF p_new_customer IS NULL THEN
					p_message := TO_CHAR (v_nmrec)||' standard record is copied from the cycle '|| p_from_cycle|| ' to cycle '|| p_to_cycle|| ' ';
				 ELSE
					p_message :=TO_CHAR (v_nmrec)|| ' record is copied from the cycle '|| p_from_cycle|| ' standard record'|| ' to cycle '|| 
												p_to_cycle|| ' tailored data with ID ''' || p_new_customer|| '''';
				 END IF;
			ELSIF Name_In('Parameter.Rep') = 'Y' THEN --Fix SCR 7138 --Madhu
				RAISE e_Duplicate;
			END IF;
	  ELSE
	    IF Name_In('Parameter.Rep') = 'N' THEN --Fix SCR 7138 --Madhu
				 IF p_no_of_records = 'ALL' AND v_nmrec = 0	THEN
					NULL;
				 ELSE
					p_message := TO_CHAR (v_nmrec)|| ' record(s) in cycle '|| p_from_cycle|| ' with ID '''|| p_old_customer
														|| ''' is/are copied to cycle '|| p_to_cycle|| ' with ID '''|| p_new_customer|| '''';
				 END IF;
			ELSIF Name_In('Parameter.Rep') = 'Y' THEN
				RAISE e_Duplicate; --Fix SCR 7138 --Madhu
			END IF;
   END IF;
      --
  
      IF p_no_of_records = 'ONE' AND p_1st_ident IS NOT NULL AND v_nmrec > 0 THEN
         IF p_new_customer IS NULL THEN
            p_message :=  p_message || 'with data type ident ''' || p_1st_ident || '''.';
         ELSE
            p_message := p_message || 'and data type ident ''' || p_1st_ident || '''.';
         END IF;
      END IF;
      --
      
       IF p_no_of_records != 'ONE' THEN
		     NULL;      	
       ELSE
				  -- Begin Fix - SCR 4923 - Eswar KC - 31-May-2013
				   --    p_message := p_message||' !! No validation on the copied record. Value ''I'' is assigned to its validate-ind. '||
				   --                        'You must query it out to make it be validated.';
				
				   --
				   VANDV_COPIED_RECORDS.strval_copied_records (SUBSTR (v_target_table, 4),p_to_cycle, vs_Target_Supplier, v_start_dcr, p_dcr_number, v_message);             
				   
				   IF v_message = 'O.K.' THEN
				     VANDV_COPIED_RECORDS.relval_copied_records (vs_Target_Supplier, p_to_cycle, p_recent_cycle, SUBSTR (v_target_table, 4), v_start_dcr,p_dcr_number, NULL, v_message);  -- Fix SCR 7871 --Madhu --01-Mar-2023
				      
				      IF v_message = 'O.K.' THEN
				         -- Validate copied detail records
				         IF p_details_exist = 'Y' THEN
				            OPEN get_detail;
				            LOOP
				               FETCH get_detail INTO v_detail;
				               EXIT WHEN get_detail%NOTFOUND;
				               IF v_message = 'O.K.' THEN
				                  VANDV_COPIED_RECORDS.relval_copied_records (vs_Target_Supplier,p_to_cycle,p_recent_cycle,v_detail,v_start_dcr,p_dcr_number,SUBSTR (v_target_table, 4),v_message);       -- Fix SCR 7871 --Madhu --01-Mar-2023                       
				               END IF;
				            END LOOP;
				            CLOSE get_detail;
				         END IF;
				      END IF;
				   END IF;
				
				   v_stmt := 'select count(*) from '|| v_target_table|| ' '|| 'where create_Dcr_number > '|| v_start_dcr|| ' '|| 'and update_dcr_number = '
										|| p_dcr_number|| ' '|| 'and validate_ind = ''I'' ';
				   forms_utilities.Exe_Query (v_stmt, v_nminvalid);
				   p_message := p_message|| ' !! You have '|| v_nminvalid|| ' invalid record(s) in the copied record(s) set !!';
				   -- Define if refresh needs
	          -- Begin Fix - SCR 6106 - Eswar KC - 29-Oct-2013
	          
	          -- Begin  Fix SCR 5086.00 --Venkat M -- 05-Aug-2019 --Error Log 
	          /*BEGIN
	              SELECT cycle
	              INTO vn_Refresh_Cycle
	              FROM process_status
							 WHERE date_time IN
									  (SELECT MAX (date_time)
										 FROM process_status
										WHERE MESSAGE = 'Refresh ML ended successful'
											  AND data_supplier = vs_Target_Supplier
											  AND RML_TYPE = 'NAV')
								   AND MESSAGE = 'Refresh ML ended successful'
								   AND RML_TYPE = 'NAV'
								   AND data_supplier = vs_Target_Supplier;  
	          EXCEPTION
	              WHEN OTHERS THEN
	              vn_Refresh_Cycle := 200406;
	          END;*/
 	          vn_Refresh_Cycle := forms_utilities.fetch_rml_cycle(vs_Target_Supplier);
	          -- End  Fix SCR 5086.00 --Venkat M -- 05-Aug-2019 --Error Log 

	          vn_Refresh_Old_Cycle := util2.get_previous_cycle(vn_Refresh_Cycle);
	          -- End Fix - SCR 6106 - Eswar KC - 29-Oct-2013
				
				   IF p_to_cycle NOT IN (vn_Refresh_Cycle, vn_Refresh_Old_Cycle) OR v_nmrec = 0 OR Name_IN('Parameter.RML') = 'R' THEN -- --Fix SCR 7138 --Madhu
				   --IF vn_Refresh_Cycle < p_to_cycle OR v_nmrec = 0 THEN -- Fix - SCR 6106 - Eswar KC
				      p_refresh_may_need := 'NO';
				   ELSIF p_to_cycle IN (vn_Refresh_Cycle, vn_Refresh_Old_Cycle) THEN  -- ELSIF vn_Refresh_Cycle >= p_to_cycle THEN	-- Fix - SCR 6106 - Eswar KC
				      IF v_nmrec >= 10 THEN
				         p_refresh_may_need := 'TABLE';
				      ELSIF v_nmrec = 1 THEN
				         v_stmt := 'select create_dcr_number from ' || v_target_table|| ' '|| ' where create_dcr_number > '|| v_start_dcr
													|| ' '|| ' and update_dcr_number = '|| p_dcr_number;
													
				         forms_utilities.Exe_Query (v_stmt, p_refresh_may_need);
				      END IF;
				   END IF;
				-- End Fix - SCR 4923 - Eswar KC - 31-May-2013
				END IF;
      --
     ELSE
    		p_refresh_may_need := 'NO';
    		p_message := 'Duplication is not complete - Error in duplicating details: '||v_message;
     END IF;
     --
     
    EXCEPTION
--Begin Fix SCR 7138 --Madhu --08-Nov-2016
		WHEN e_Duplicate OR DUP_VAL_ON_INDEX THEN
			BEGIN
				
				IF p_no_of_records = 'ONE' AND Name_In('Parameter.Rep') = 'N' THEN
					IF p_new_customer IS NULL THEN
						p_message :=  'Record Already Exists in Standard Data';
					 ELSE
						p_message := 'Record Already Exists for ID: '||p_new_customer;
					 END IF;
				ELSE
					IF v_target_table LIKE '%TLD%' THEN
						SELECT gate_ident,airport_ident,airport_icao INTO ls_gate,ls_airport_ident,ls_airport_icao
						FROM PL_TLD_GATE 
						WHERE rowid = chartorowid (p_row_id);
					ELSE
						SELECT gate_ident,airport_ident,airport_icao INTO ls_gate,ls_airport_ident,ls_airport_icao
						FROM PL_STD_GATE 
						WHERE rowid = chartorowid (p_row_id);
					END IF;
					IF NAME_IN ('global.new_gate_ident') IS NOT NULL THEN
						
						ls_One_Where := ''''||Name_In('global.new_gate_ident')||'''||''@''||'''||ls_airport_ident||'''||''@''||'''||ls_airport_icao||'''';
						ls_Where := ' GATE_IDENT = '''||Name_In('global.new_gate_ident')||''' AND AIRPORT_IDENT = '''||ls_airport_ident||''' AND AIRPORT_ICAO = '''||ls_airport_icao||'''';
					ELSE
						ls_One_Where := ''''||ls_gate||'''||''@''||'''||ls_airport_ident||'''||''@''||'''||ls_airport_icao||'''';
						ls_Where := ' GATE_IDENT = '''||ls_gate||''' AND AIRPORT_IDENT = '''||ls_airport_ident||''' AND AIRPORT_ICAO = '''||ls_airport_icao||'''';
					END IF;
						IF v_target_table LIKE '%TLD%' THEN
							v_stmt := 'select create_dcr_number from '|| v_target_table||' WHERE data_supplier = '''||vs_Target_Supplier||''' AND processing_cycle = 
									'||to_char(p_to_cycle)||' AND customer_ident = '''||p_new_customer||''' AND '||ls_Where||' AND '||ls_One_Where||
									' ||''@''||'''||p_supplier||'''||''@''||'||TO_CHAR(p_from_cycle)||'||''@''||'''||p_old_customer||''' IN '||
									'(SELECT gate_ident||''@''||airport_ident||''@''||airport_icao||''@''||DATA_SUPPLIER||''@''||PROCESSING_CYCLE||''@''||CUSTOMER_IDENT from '
									|| p_table_name
									||' where rowid = chartorowid(''' || p_row_id || ''')) ';
						ELSE
							v_stmt := 'select create_dcr_number from '|| v_target_table||' WHERE data_supplier = '''||vs_Target_Supplier||''' AND processing_cycle = 
									'||to_char(p_to_cycle)||' AND customer_ident = '''||p_new_customer||''' AND '||ls_Where||' AND '||ls_One_Where||
									' ||''@''||'''||p_supplier||'''||''@''||'||TO_CHAR(p_from_cycle)||''' IN '||
									'(SELECT gate_ident||''@''||airport_ident||''@''||airport_icao||''@''||DATA_SUPPLIER||''@''||PROCESSING_CYCLE from '
									|| p_table_name
									||' where rowid = chartorowid(''' || p_row_id || ''')) ';
						END IF;
						forms_utilities.Exe_Query (v_stmt, ln_DCR_Num);
						
	          -- Begin  Fix SCR 5086.00 --Venkat M -- 05-Aug-2019 --Error Log 						
					   /*BEGIN
							SELECT cycle
							  INTO vn_Refresh_Cycle
							  FROM process_status
							 WHERE date_time IN
									  (SELECT MAX (date_time)
										 FROM process_status
										WHERE MESSAGE = 'Refresh ML ended successful'
											  AND data_supplier = vs_Target_Supplier
											  AND RML_TYPE = 'NAV')
								   AND MESSAGE = 'Refresh ML ended successful'
								   AND RML_TYPE = 'NAV'
								   AND data_supplier = vs_Target_Supplier;
						 EXCEPTION
							WHEN OTHERS
							THEN
							   vn_Refresh_Cycle := 200406;
						 END;*/

 	          vn_Refresh_Cycle := forms_utilities.fetch_rml_cycle(vs_Target_Supplier);
	          -- End  Fix SCR 5086.00 --Venkat M -- 05-Aug-2019 --Error Log 

            vn_Refresh_Old_Cycle := util2.get_previous_cycle (vn_Refresh_Cycle);
						IF Name_IN('Parameter.RML') = 'Y' THEN --Mod 11
							IF p_to_cycle IN (vn_Refresh_Cycle, vn_Refresh_Old_Cycle) THEN
								IF v_target_table LIKE '%TLD%' THEN
									refresh_master_library.refresh_a_record (v_table_type,
																		 ln_DCR_Num,
																		 p_to_cycle,
																		 'TLD_GATE',
																		 'I',
																		 vs_Target_Supplier);
								ELSE
									refresh_master_library.refresh_a_record (v_table_type,
																		 ln_DCR_Num,
																		 p_to_cycle,
																		 'STD_GATE',
																		 'I',
																		 vs_Target_Supplier);
								END IF;
							END IF;
						END IF; --RML --Y
						
					Forms_Utilities.Delete_From_Ref_Table (ln_DCR_Num);
					IF v_target_table LIKE '%TLD%' THEN
						Delete from pl_tld_gate
						WHERE create_dcr_number = ln_DCR_Num;
					ELSE
						Delete from pl_std_gate
						WHERE create_dcr_number = ln_DCR_Num;
					END IF;
					FORMS_DDL('commit');
				 p_refresh_may_need := 'NO';
                  p_message := 'R';
				END IF;
			EXCEPTION
				WHEN no_data_found THEN
					p_refresh_may_need := 'NO';
          p_message := 'R';
--End Fix SCR 7138 --Madhu
			END;
        WHEN OTHERS THEN
          p_refresh_may_need := 'NO';
              IF p_new_customer IS NOT NULL THEN
                  p_message := 'No record is copied from '''||p_old_customer||''' to '''||p_new_customer||
                  ''' for cycle '||p_to_cycle||'! --> '||SUBSTR(SQLERRM,1,300);
              ELSE
                  p_message := 'No record is copied from '''||p_from_cycle||''' to '''||p_to_cycle||
                  '''! --> '||SUBSTR(SQLERRM,1,300);
              END IF;
END dupl_records;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            GET_COLUMN
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
FUNCTION Get_column (p_table_name VARCHAR2)
   RETURN VARCHAR2
IS
   -- ***************************************************
   -- Get the name of fields that need to be copied
   -- ***************************************************

   v_return           VARCHAR2 (4000) := NULL;
   p_special_fields   VARCHAR2 (4000);
   get_column         cpt_types.refcur;
   v_stmt             VARCHAR2 (5000);
   v_column           VARCHAR2 (30);
BEGIN
      p_special_fields := ' ''AREA_CODE'',''CUSTOMER_IDENT'',''GENERATED_IN_HOUSE_FLAG'','||
                              '''FILE_RECNO'',''CYCLE_DATA'',''CREATE_DCR_NUMBER'','||
                              '''UPDATE_DCR_NUMBER'',''PROCESSING_CYCLE'',''VALIDATE_IND'',''SUPPLIER_LINE_NUMBER'' ';
     
	  -- Begin Fix - SCR 4923 - 05-May-2013
      IF p_table_name LIKE '%TLD%' THEN
         p_special_fields := p_special_fields||',''DATA_SUPPLIER''';
      END IF;
      -- End Fix - SCR 4923 - 05-May-2013
	  
      v_stmt := 'select column_name from all_tab_columns '||
                          'where  owner = ''CPT'' '||
                          'and    table_name = '''||UPPER (SUBSTR (p_table_name,4))||''' '||
                          'and    column_name not in ('||P_SPECIAL_FIELDS||',''SUPPLIER_LINE_NUMBER'') '||
                          'order by column_name';

	 -- Begin Fix - SCR 4923 - 05-May-2013
	  IF p_table_name LIKE '%TLD%' THEN
		   OPEN get_column FOR
		        SELECT column_name
		          FROM all_tab_columns
		         WHERE owner = 'CPT' AND table_name = UPPER (SUBSTR (p_table_name, 4))
			         AND column_name NOT IN ('AREA_CODE','CUSTOMER_IDENT','GENERATED_IN_HOUSE_FLAG',
			                                     'FILE_RECNO','CYCLE_DATA','CREATE_DCR_NUMBER','UPDATE_DCR_NUMBER','PROCESSING_CYCLE',
			                                     'VALIDATE_IND','SUPPLIER_LINE_NUMBER','DATA_SUPPLIER','SUPPLIER_LINE_NUMBER') 
		      ORDER BY column_name;
	  ELSE
		   OPEN get_column FOR
		        SELECT column_name
		          FROM all_tab_columns
		         WHERE owner = 'CPT' AND table_name = UPPER (SUBSTR (p_table_name, 4))
                          AND column_name NOT IN  ('AREA_CODE','CUSTOMER_IDENT','GENERATED_IN_HOUSE_FLAG',
		 											'FILE_RECNO','CYCLE_DATA','CREATE_DCR_NUMBER','UPDATE_DCR_NUMBER','PROCESSING_CYCLE',
		 											'VALIDATE_IND','SUPPLIER_LINE_NUMBER','DATA_SUPPLIER','SUPPLIER_LINE_NUMBER')  -- 4923.01 - 13-AUG-2013
           ORDER BY column_name;
		END IF;      
	  -- End Fix - SCR 4923 - 05-May-2013
	  	
   LOOP
      FETCH get_column INTO v_column;
      EXIT WHEN get_column%NOTFOUND;
      v_return := v_return || v_column || ',';
   END LOOP;
   CLOSE get_column;
   RETURN v_return;
EXCEPTION
   WHEN OTHERS THEN
      v_stmt := SQLERRM || '---' || v_stmt;
      INSERT INTO test (tstmt) VALUES (v_stmt);
      COMMIT;
      RETURN NULL;
END Get_column;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008
   * Program Unit Type                               Function
   ----------
   * Name                                            DUPLICATE_STEP_2
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               


--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
PROCEDURE duplicate_step_2 IS
   v_message            VARCHAR2 (1000);
   v_block              VARCHAR2 (50);
   v_target_table       VARCHAR2 (30);
   v_table_type         VARCHAR2 (10) := NULL;
   v_refresh_may_need   VARCHAR2 (1500);
   v_dcr_number         NUMBER;
   v_length             NUMBER (3);
   TYPE table_cust IS TABLE OF VARCHAR2 (50) INDEX BY BINARY_INTEGER;
   TYPE table_dcr IS TABLE OF NUMBER (20) INDEX BY BINARY_INTEGER;
   dcr_number           table_dcr;
   new_cust             table_cust;
   i                    INTEGER := 1;
   j                    INTEGER := 0;
   v_all_cust           VARCHAR2 (32000);
   v_new_cust           VARCHAR2 (3);
   refresh_need         VARCHAR2 (10);
   v_new_cycle_data     VARCHAR2 (4);
  -- Begin Fix - SCR 4923 - Eswar KC - 05-June-2013
   vn_supp_exist        NUMBER;
   vs_Supplier          VARCHAR2 (1);
   vs_Global_Supp       VARCHAR2 (1);
   vs_stmt 				VARCHAR2 (6000);
   TYPE Supp_array IS TABLE OF VARCHAR2 (1) INDEX BY BINARY_INTEGER;
   Data_Supp_array      Supp_array;
   get_column           cpt_types.refcur;
   vn_refresh_need       NUMBER := 0;
   vn_refresh_need_Table NUMBER := 0;
   vs_copied_cust				 VARCHAR2 (32000);
   vn_cnt 							NUMBER := 0;	
  -- End Fix - SCR 4923 - Eswar KC - 05-June-2013
--Begin Fix SCR 7138 --Madhu--08-Nov-2016
   TYPE DCR_Table_Type IS TABLE OF NUMBER (20) INDEX BY BINARY_INTEGER;
   DCR_Table DCR_Table_Type;
   ln_DCR_Count Number := 0;
   ln_DCR_No NUMBER;
   ls_Rep_DCR VARCHAR2(1000);
   ls_New_Upd_DCR VARCHAR2(100);
   ln_length NUMBER;
--End Fix SCR 7138 --Madhu --08-Nov-2016
BEGIN
 -- Run the duplication

   SET_APPLICATION_PROPERTY (cursor_style, 'BUSY');

 /*  IF NAME_IN ('MESSAGE.RUNTIME_MESSAGE') IS NOT NULL THEN
      NEXT_RECORD;
   END IF;*/ --Commented for SCR 7138
   
   IF NAME_IN('Parameter.Rep_Check') <> 'R' THEN	--Fix SCR 7138 --Madhu
			COPY('Start copy '||NAME_IN ('global.current_table')||' at - '||TO_CHAR (SYSDATE,'MM/DD/YYYY HH:MI:SS AM'),'MESSAGE.RUNTIME_MESSAGE');
	END IF;
   
	COPY('Start copy '||NAME_IN('global.current_table')||' at - '|| TO_CHAR (SYSDATE,'MM/DD/YYYY HH:MI:SS AM'),'MESSAGE.RUNTIME_MESSAGE');
   IF NAME_IN ('global.lib_refreshed') = 'Y'  AND NAME_IN ('global.new_cycle') IN
             (NAME_IN ('global.old_processing_cycle'), NAME_IN ('global.new_processing_cycle')) THEN
      refresh_need := 'Y';
   ELSE
      refresh_need := 'N';
   END IF;
	--	
	v_all_cust := NAME_IN ('global.new_customer_ident');
		ls_Rep_DCR := Name_IN('Parameter.Rep_DCR');--Fix SCR 7138 --Madhu
	
   IF v_all_cust IS NOT NULL THEN
      WHILE RTRIM (v_all_cust) IS NOT NULL LOOP
         v_length := INSTR (v_all_cust, ',');

         IF v_length = 0 THEN
            v_new_cust := v_all_cust;
         ELSE
            v_new_cust := SUBSTR (v_all_cust, 1, v_length - 1);
         END IF;

         v_all_cust := SUBSTR (v_all_cust, LENGTH (v_new_cust) + 2);
         new_cust (i) := LTRIM (RTRIM (v_new_cust));
--Begin Fix SCR 7138 --Madhu        
         	ln_length := INSTR (ls_Rep_DCR,',');
		 			IF ln_length = 0 THEN
		 				ls_New_Upd_DCR := ls_Rep_DCR;
		 			ELSE
		 				ls_New_Upd_DCR := SUBSTR (ls_Rep_DCR,1,ln_length-1);
		 			END IF;	
		 		  ls_Rep_DCR := SUBSTR (ls_Rep_DCR,LENGTH (ls_New_Upd_DCR)+2);
		 		  DCR_Table(i) := TO_NUMBER(ls_New_Upd_DCR);
					ln_DCR_No := DCR_Table(i);
--End Fix SCR 7138 --Madhu
         IF new_cust (i) = NAME_IN ('global.curr_customer_ident') AND NAME_IN ('global.num_to_duplicate') = 'ALL'
            AND NAME_IN ('global.processing_cycle') = NVL (NAME_IN ('global.new_cycle'), NAME_IN ('global.processing_cycle'))
         THEN
            v_message := 'No record is copied from '''|| new_cust (i)|| ''' to '''|| new_cust (i)
												|| ''' for cycle '|| NAME_IN ('global.processing_cycle');
         ELSE
            -- Get the new cycle data or keep the old
            IF    NAME_IN ('global.curr_customer_ident') != new_cust (i)
               OR NAME_IN ('global.1st_ident') IS NOT NULL
               OR NAME_IN ('global.2nd_ident') IS NOT NULL
               OR NAME_IN ('global.2nd_icao') IS NOT NULL
            THEN
               v_new_cycle_data := SUBSTR ( NVL (NAME_IN ('global.new_cycle'), NAME_IN ('global.processing_cycle')), 3);
            ELSE
               v_new_cycle_data := 'OLD';
            END IF;
				-- Begin Fix - SCR 4923 - Eswar KC - 05-June-2013
			   SELECT data_supplier
			     INTO vs_Supplier
			     FROM navdb
			    WHERE UPPER (navdb_id) = UPPER (new_cust (i));
			
			   IF vs_Supplier != NAME_IN ('global.data_supplier') THEN
			      vn_supp_exist := 0;
			
			      FOR i IN 1 .. Data_Supp_array.COUNT LOOP
			         IF Data_Supp_array (i) = vs_Supplier THEN
			            vn_supp_exist := 1;
			            EXIT;
			         END IF;
			      END LOOP;
			
			      IF vn_supp_exist = 0 THEN
			         Data_Supp_array (Data_Supp_array.COUNT + 1) := vs_Supplier;
			      END IF;
			   ELSE
			      vs_Global_Supp := NAME_IN ('global.data_supplier');
			   END IF;
			  -- End Fix - SCR 4923 - Eswar KC - 05-June-2013		
        dupl_records (
           NAME_IN ('global.data_supplier'),
           NAME_IN ('global.record_type'),
           NAME_IN ('global.num_to_duplicate'),
           NAME_IN ('global.geninhouse'),
           NAME_IN ('global.curr_customer_ident'),
           --nvl(name_in('global.new_customer_ident'),name_in('global.curr_customer_ident')),
           new_cust (i),
           NAME_IN ('global.current_table'),
           NAME_IN ('global.row_id'),
           ln_DCR_No,--NAME_IN ('global.dcr_number'),--Fix SCR 7138 --Madhu
           NAME_IN ('global.record_cycle'),
           --name_in('global.processing_cycle'),
           NVL (NAME_IN ('global.new_cycle'), NAME_IN ('global.processing_cycle')),
           NAME_IN ('global.recent_cycle'),  
           v_new_cycle_data,             
           NVL (NAME_IN ('global.1st_ident'), NAME_IN ('global.1st_currident')),
           NVL (NAME_IN ('global.2nd_ident'), NAME_IN ('global.2nd_currident')),
           NVL (NAME_IN ('global.2nd_icao'), NAME_IN ('global.2nd_curricao')),
           NAME_IN ('global.detail_exists'),
           GLOBALS.G_LAST_QUERY,                             
           v_refresh_may_need,              -- 'NO','TABLE' or DCR numbers
           v_message,
           NAME_IN ('global.new_gate_ident'),
           NAME_IN ('global.geninouthouse'));  --Fix SCR 7853.01 08-Jun-2018
 
	      -- IF refresh_need = 'Y' THEN -- Fix - SCR 4923 - Eswar KC - 12-July-2013
	      	IF v_refresh_may_need = 'TABLE' THEN
	      			refresh_need := 'TABLE';
					     vn_refresh_need_Table := 1;  			-- Fix - SCR 4923 - Eswar KC - 12-July-2013 
	        ELSIF v_refresh_may_need = 'NO' THEN
	            refresh_need := 'N'; -- NULL;
	         ELSE
	         	
	            WHILE RTRIM (v_refresh_may_need) IS NOT NULL LOOP
			   			-- Begin Fix - SCR 4923 - Eswar KC - 12-July-2013
			         /* IF j = 10 THEN
			               refresh_need := 'TABLE';
			               EXIT;
			            ELSE
			               j := j + 1;
			            END IF;*/
			            j := j + 1;
									vn_refresh_need := 1;
						  -- End Fix - SCR 4923 - Eswar KC - 12-July-2013
	               v_length := INSTR (v_refresh_may_need, ',');
	               IF v_length = 0 THEN
	                  dcr_number (j) := TO_NUMBER (v_refresh_may_need);
	                  EXIT;
	               ELSE
	                  dcr_number (j) := TO_NUMBER ( SUBSTR (v_refresh_may_need, 1, v_length - 1));
	               END IF;
	               v_refresh_may_need := SUBSTR (v_refresh_may_need, LENGTH (dcr_number (j)) + 2);
	            END LOOP;
	          END IF;
	       -- END IF; -- Fix - SCR 4923 - Eswar KC - 12-July-2013
	    END IF;
 
		--	IF NAME_IN('MESSAGE.RUNTIME_MESSAGE') != v_message THEN --Fix SCR 7138 --Madhu
			IF NVL(NAME_IN('MESSAGE.RUNTIME_MESSAGE'),'$$') != NVL(v_message,'$') THEN 
				IF v_message <> 'R' THEN --Fix SCR 7138 --Madhu
					NEXT_RECORD;
					COPY (v_message,'MESSAGE.RUNTIME_MESSAGE');
			-- Begin Fix - SCR 4923 - Eswar KC - 16-July-2013
					IF v_refresh_may_need = 'NO' THEN
						IF SUBSTR(v_message,1,1) = '0' THEN
							NULL;
						ELSE	
							NEXT_RECORD; 
						  COPY ('The RML Operation has not been performed for the data supplier. The Master Library will not be refreshed for '||new_cust (i)||'.','MESSAGE.RUNTIME_MESSAGE');
						END IF;
						 vn_cnt := 1;
					END IF;
					IF vn_cnt = 1 THEN
						vn_cnt := 0;
					ELSE	
						vs_copied_cust := vs_copied_cust||','||new_cust (i);
					END IF;	
				-- End Fix - SCR 4923 - Eswar KC - 16-July-2013
				END IF; --7138
			END IF;	

     i := i + 1;
   END LOOP;

		/* -- Begin Fix - SCR 4923 - Eswar KC - 16-July-2013
			 IF j = 0 THEN 	
				refresh_need := 'N';		
			 END IF;
		*/ -- End Fix - SCR 4923 - Eswar KC - 16-July-2013
--Begin Fix SCR 7138 --Madhu
		IF v_message = 'R' THEN	
			COPY('R','Parameter.Rep_Check');
			refresh_need := 'N';
		ELSE
			COPY('D','Parameter.Rep_Check');
		END IF;
--End Fix SCR 7138 --Madhu
	vs_copied_cust := LTRIM(vs_copied_cust,',');
  v_all_cust := 'END';
 ELSE
	-- copy std to std, per SCR 1246
      dupl_records (
         NAME_IN ('global.data_supplier'),
         NAME_IN ('global.record_type'),
         NAME_IN ('global.num_to_duplicate'),
         NAME_IN ('global.geninhouse'),
         NAME_IN ('global.curr_customer_ident'),
         NULL,                                           -- new customer ident
         NAME_IN ('global.current_table'),
         NAME_IN ('global.row_id'),
         NAME_IN ('global.dcr_number'),
         NAME_IN ('global.record_cycle'),
         NVL (NAME_IN ('global.new_cycle'),
              NAME_IN ('global.processing_cycle')),
         NAME_IN ('global.recent_cycle'),    
         'OLD', -- Use the old cycle data for the new record, added per SCR 1642 on 9/7/2004
         NVL (NAME_IN ('global.1st_ident'), NAME_IN ('global.1st_currident')),
         NVL (NAME_IN ('global.2nd_ident'), NAME_IN ('global.2nd_currident')),
         NVL (NAME_IN ('global.2nd_icao'), NAME_IN ('global.2nd_curricao')),
         NAME_IN ('global.detail_exists'),
         GLOBALS.G_LAST_QUERY,                                  
         v_refresh_may_need,                    -- 'NO','TABLE' or DCR numbers
         v_message,
         NAME_IN ('global.new_gate_ident'),
         NAME_IN ('global.geninouthouse'));  --Fix SCR 7853.01 08-Jun-2018
         
      vs_Global_Supp := NAME_IN ('global.data_supplier'); -- Fix - SCR 4923 - Eswar KC - 05-June-2013
         
      IF v_refresh_may_need = 'NO' THEN
         refresh_need := 'N';
      ELSE
	   -- IF refresh_need = 'Y' THEN 							-- Fix - SCR 4923 - Eswar KC - 07-July-2013
           IF v_refresh_may_need = 'TABLE' THEN
               refresh_need := 'TABLE';
	            vn_refresh_need_Table := 1;  			-- Fix - SCR 4923 - Eswar KC - 12-July-2013
            ELSE
               WHILE RTRIM (v_refresh_may_need) IS NOT NULL LOOP
 			   			-- Begin Fix - SCR 4923 - Eswar KC - 12-July-2013
			         /* IF j = 10 THEN
			               refresh_need := 'TABLE';
			               EXIT;
			            ELSE
			               j := j + 1;
			            END IF;*/
			           j := j + 1;
								 vn_refresh_need := 1;
						  -- End Fix - SCR 4923 - Eswar KC - 12-July-2013
                  v_length := INSTR (v_refresh_may_need, ',');
                  IF v_length = 0 THEN
                     dcr_number (j) := TO_NUMBER (v_refresh_may_need);
                     EXIT;
                  ELSE
                     dcr_number (j) := TO_NUMBER ( SUBSTR (v_refresh_may_need, 1, v_length - 1));
                  END IF;
                  v_refresh_may_need := SUBSTR (v_refresh_may_need, LENGTH (dcr_number (j)) + 2);
               END LOOP;
            END IF;
	  --  END IF; 		-- Fix - SCR 4923 - Eswar KC - 07-July-2013
      END IF;
      IF v_message <> 'R' THEN --7138
      
      --NEXT_RECORD;
      --COPY (v_message, 'MESSAGE.RUNTIME_MESSAGE'); --7138
			-- Begin Fix - SCR 4923 - Eswar KC - 16-July-2013
				IF v_refresh_may_need = 'NO' THEN
					NEXT_RECORD; 
				  COPY ('The RML Operation has not been performed for the data supplier. The Master Library will not be refreshed for '||NVL (NAME_IN ('global.new_cycle'), NAME_IN ('global.processing_cycle'))||'.','MESSAGE.RUNTIME_MESSAGE');
				vn_cnt := 1;
				END IF;
			END IF;
  			-- End Fix - SCR 4923 - Eswar KC - 16-July-2013
   END IF;
--Begin Fix SCR 7138 --Madhu
   IF NAME_IN('Parameter.Rep_Check') <> 'R' THEN 
		NEXT_RECORD;	
		COPY('End copy '||NAME_IN('global.current_table')||' at - '||TO_CHAR (SYSDATE,'MM/DD/YYYY HH:MI:SS AM'),'MESSAGE.RUNTIME_MESSAGE');
   END IF; 
--End Fix SCR 7138 --Madhu
  SET_APPLICATION_PROPERTY (cursor_style, 'DEFAULT');
  -- Begin Fix - SCR 4923 - Eswar KC - 16-July-2013
   IF refresh_need = 'N' and NAME_IN('Parameter.Rep_Check') = 'R' THEN --5649.01

			COPY('N','Parameter.Rep');
			duplicate_step_2;
	 ELSE
	  IF vn_refresh_need_Table = 1 THEN 
			IF NAME_IN ('global.record_type') = 'T' THEN
		    NEXT_RECORD;
		    COPY ('More than 10 records were copied from '||NAME_IN ('global.curr_customer_ident')||'.The Master Library will not be refreshed.','MESSAGE.RUNTIME_MESSAGE');
			ELSE
		    NEXT_RECORD;
		    COPY ('More than 10 records were copied from '||NAME_IN ('global.record_cycle')||'.The Master Library will not be refreshed.','MESSAGE.RUNTIME_MESSAGE');
			END IF;				
	  ELSE		
	-- End Fix - SCR 4923 - Eswar KC - 16-July-2013  
	  IF vn_refresh_need = 1 THEN
      NEXT_RECORD;
      IF NAME_IN ('global.record_type') = 'S' AND v_all_cust IS NOT NULL THEN
         v_target_table := UPPER ('TLD_' || SUBSTR (NAME_IN ('global.current_table'), 8));
      ELSE
         v_target_table := UPPER (SUBSTR (NAME_IN ('global.current_table'), 4));
      END IF;
      
			IF vn_refresh_need = 1 THEN
				COPY ('The Master Library will be refreshed with the valid records for '||vs_copied_cust||'.','MESSAGE.RUNTIME_MESSAGE');	-- Changed copied to Valid - SCR 4923 - Eswar KC
				NEXT_RECORD;
        -- loop to refresh each correct record
         SET_APPLICATION_PROPERTY (cursor_style, 'BUSY');
         FOR k IN 1 .. j LOOP
		   -- Begin Fix - SCR 4923 - Eswar KC - 05-June-2013
				 IF v_target_table LIKE '%TLD%' THEN	
				   vs_stmt := 'SELECT data_supplier FROM navdb WHERE UPPER (navdb_id) = 
												( SELECT UPPER(CUSTOMER_IDENT) 
														FROM PL_'|| v_target_table|| ' '|| 
													 'WHERE CREATE_DCR_NUMBER = '|| dcr_number (k) || ')';

				   forms_utilities.Exe_Query (vs_stmt, vs_Supplier);
				 ELSE
					 vs_Supplier := NAME_IN ('global.data_supplier');
				 END IF;       
            refresh_master_library.refresh_a_record (v_table_type,
            																				 dcr_number (k),
            																				 NAME_IN ('global.new_cycle'),
            																				 v_target_table,
            																				 'Y',
            																				 vs_Supplier);
		   -- End Fix - SCR 4923 - Eswar KC - 05-June-2013  																							
         END LOOP;
         SET_APPLICATION_PROPERTY (cursor_style, 'DEFAULT');
      END IF;
		-- end modification per SCR 1204	
		COPY ('Refresh record(s) succesfully ended at - '||TO_CHAR (SYSDATE,'MM/DD/YYYY HH:MI:SS AM'),'MESSAGE.RUNTIME_MESSAGE');	
	 END IF;
	END IF;	 
END IF; /* End of IF vn_refresh_need_Table = 1 THEN */
--synchronize;
END;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008 


   * Program Unit Type                               Procedure
   ----------
   * Name                                            SET_INSERT_CLAUSE
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
FUNCTION set_insert_clause (p_table_name    VARCHAR2,
                            p_cycle_data    VARCHAR2,
                            p_area_code     VARCHAR2)
   RETURN VARCHAR2
IS
   v_return   VARCHAR2 (4000) := NULL;
   v_table    VARCHAR2 (30);
BEGIN
   v_return := 'insert into ' || p_table_name || ' (';
   -- Get columns
   v_return := v_return || get_column (p_table_name);

   -- Add columns
   IF p_table_name LIKE 'PL_TLD%' THEN
      v_return :=
            v_return
         || 'customer_ident,generated_in_house_flag,'
         || 'create_dcr_number,update_dcr_number,processing_cycle';
   ELSE
      IF p_area_code = 'Y' THEN
         v_return := v_return || 'area_code,create_dcr_number,update_dcr_number,processing_cycle';  
      ELSE
         v_return := v_return || 'create_dcr_number,update_dcr_number,processing_cycle';  
      END IF;
   END IF;

   IF NOT ( (p_table_name LIKE '%SEGMENT' AND p_table_name NOT LIKE '%AIRWAY_SEGMENT') -- exclude tables that don't have validate_ind field
           OR p_table_name = 'PL_TLD_ADDL_ALT_DEST')
   THEN
      v_return := v_return || ',VALIDATE_IND';
   END IF;

	-- Begin Fix - SCR 4923 - 05-May-2013      
			v_return:= v_return||',DATA_SUPPLIER'; 
	-- End Fix - SCR 4923 - 05-May-2013 

   IF p_cycle_data = 'Y' THEN
      v_return := v_return || ',CYCLE_DATA)';
   ELSE
      v_return := v_return || ')';
   END IF;

   RETURN v_return;
END set_insert_clause;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008
   * Program Unit Type                               Function
   ----------
   * Name                                            SET_SELECT_CLAUSE
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
FUNCTION set_select_clause (p_no_of_records     VARCHAR2,
                            p_new_customer      VARCHAR2,
                            p_table_name        VARCHAR2,
                            p_dcr_number        NUMBER,
                            p_to_cycle          NUMBER,
                            p_1st_ident         VARCHAR2,
                            p_2nd_ident         VARCHAR2,
                            p_2nd_icao          VARCHAR2,
                            p_cycle_data        VARCHAR2,
                            p_area_code         VARCHAR2,
                            p_new_cycle_data    VARCHAR2,
                            p_geninouthouse varchar2 DEFAULT 'Y')  --Fix 7853.01 -Venkat M 19-Jun-2018  
   RETURN VARCHAR2
IS
   v_return          VARCHAR2 (4000) := NULL;
   v_table           VARCHAR2 (30);
   vs_new_supplier   VARCHAR2 (1);                                 -- SCR 4923
BEGIN
   v_return := 'select  ';
   -- Get columns
   v_return := v_return || get_column (p_table_name);

   -- Add columns
   IF RTRIM (p_new_customer) IS NOT NULL THEN
   	--commented for SCR 7853.01 
      /*v_return := v_return || ''''|| p_new_customer|| ''',''Y'','|| 'dcr_number_seq.nextval,'|| TO_CHAR (p_dcr_number)
										|| ','|| TO_CHAR (p_to_cycle);*/
			-- Fix SCR 7853.01 - Venkat M - 08-Jun-2018  
      IF p_geninouthouse = 'Y' THEN
         v_return := v_return||''''||p_new_customer||''',''Y'','||'dcr_number_seq.nextval,'||
                     to_char(p_dcr_number)||','||to_char(p_to_cycle);  
      ELSE
         v_return := v_return||''''||p_new_customer||''','||'GENERATED_IN_HOUSE_FLAG,dcr_number_seq.nextval,'||
                     to_char(p_dcr_number)||','||to_char(p_to_cycle);  
      END IF;                  
      -- Till here Fix SCR 7853.01 - Venkat M - 08-Jun-2018
										
   ELSE
      IF p_area_code = 'Y' THEN
         v_return := v_return|| 'area_code,dcr_number_seq.nextval,'|| TO_CHAR (p_dcr_number)|| ',' || TO_CHAR (p_to_cycle);                                   
      ELSE
         v_return := v_return|| 'dcr_number_seq.nextval,'|| TO_CHAR (p_dcr_number)|| ','|| TO_CHAR (p_to_cycle);                                   
      END IF;
   END IF;

   IF NOT ( (p_table_name LIKE '%SEGMENT' AND p_table_name NOT LIKE '%AIRWAY_SEGMENT')
           OR p_table_name = 'PL_TLD_ADDL_ALT_DEST')
   THEN
   -- Begin Fix - SCR 4923 - Eswar KC - 01-June-2013
      /*if p_no_of_records = 'ONE' then
          v_return := v_return||',''I''';       
        else
            v_return := v_return||',decode(validate_ind,''I'',''I'',''O'',''I'',''Y'')';  
        end if;*/
      v_return := v_return || ',''I''';
   -- End Fix - SCR 4923 - Eswar KC - 01-June-2013
   END IF;

   --Begin Fix - SCR 4923 - Eswar KC - 06-May-2013
   IF p_new_customer IS NOT NULL THEN
      SELECT data_supplier
        INTO vs_new_supplier
        FROM NAVDB
       WHERE UPPER (navdb_id) = UPPER (p_new_customer);
      v_return := v_return || ',''' || vs_new_supplier || '''';
   ELSE
      v_return:= v_return||', DATA_SUPPLIER ';
   END IF;
   --End Fix - SCR 4923 - Eswar KC - 06-May-2013

   IF p_cycle_data = 'Y' THEN
      IF p_new_cycle_data = 'OLD' THEN
         v_return := v_return || ', CYCLE_DATA ';
      ELSE
         v_return := v_return || ',''' || p_new_cycle_data || '''';
      END IF;
   END IF;

   v_return := v_return || ' from ' || p_table_name || ' ';
   RETURN v_return;
END set_select_clause;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008
   * Program Unit Type                               Function
   ----------
   * Name                                            COPY_DETAIL
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
 	 
Function copy_detail
       (p_supplier        varchar2,
        p_record_type			varchar2,
        p_no_of_records   varchar2,
        p_geninhouse      varchar2,
        p_old_customer    varchar2,
        p_new_customer    varchar2,
        p_master_to_table varchar2,  -- mod 4
        p_detail_to_table varchar2,  -- mod 4
        p_row_id          varchar2,
        p_dcr_number      number,
        p_from_cycle      number,
        p_to_cycle        number,
        p_1st_ident       varchar2,
        p_2nd_ident       varchar2,
        p_2nd_icao        varchar2,
        p_where           varchar2,
        p_new_cycle_data  varchar2,    -- mod 5
        p_geninouthouse varchar2)     --SCR 7853.01 19-jun-2018
          Return varchar2 IS
      v_stmt              varchar2(5000);
      v_message           varchar2(300);
      v_detail_from_table varchar2(50);
      v_master_from_table varchar2(50);
      v_cycle_data        varchar2(1);
      v_area_code         varchar2(1);
    Begin
      if p_record_type = 'S' then
      	v_detail_from_table := 'PL_STD_'||substr(p_detail_to_table,8);
      	v_master_from_table := 'PL_STD_'||substr(p_master_to_table,8);
      else
      	v_detail_from_table := p_detail_to_table;
      	v_master_from_table := p_master_to_table;
      end if;
      begin
      	select 'Y' into v_cycle_data
      	from   all_tab_columns
      	where  owner = 'CPT'
      	and    table_name = upper(substr(p_detail_to_table,4))
      	and    column_name = 'CYCLE_DATA';
      exception
      	when no_data_found then
      	v_cycle_data := 'N';
      end;
      if p_detail_to_table like 'PL_STD%' then
      	begin
      		select 'Y' into v_area_code
      		from   all_tab_columns
      		where  owner = 'CPT'
      		and    table_name = upper(substr(p_detail_to_table,4))
      		and    column_name = 'AREA_CODE';
      	exception
      		when no_data_found then
      		v_area_code := 'N';
      	end;
      end if;
      v_stmt := set_insert_clause(p_detail_to_table,v_cycle_data,v_area_code)||' '||
    	          set_select_clause(p_no_of_records,p_new_customer,v_detail_from_table,p_dcr_number,p_to_cycle,
    	                            p_1st_ident,p_2nd_ident,p_2nd_icao,v_cycle_data,v_area_code,p_new_cycle_data,p_geninouthouse)||' '||    --Fix SCR 7853.01 - Venkat M 21-Jun-2018
                set_where_clause(p_supplier,v_master_from_table,p_detail_to_table,p_old_customer,p_new_customer,
                        p_row_id,p_no_of_records,p_record_type,p_geninhouse,p_from_cycle,p_to_cycle,p_where);
      --execute immediate v_stmt;
	  forms_ddl(v_stmt);
    	return 'O.K.';
    exception
      when others then
    	  v_message := substr(sqlerrm,1,300);
    	  rollback;
    	  insert into test(ttable,tstmt,errtxt) values(p_detail_to_table,v_stmt,'Details: '||v_message);
    	  commit;
    	  return v_message;
    End copy_detail;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008    
   * Program Unit Type                               Function
   ----------
   * Name                                            COPY_DETAILS
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
 
Function copy_details
       (p_supplier           varchar2,
        p_record_type        varchar2,
        p_no_of_records      varchar2,
        p_geninhouse         varchar2,
        p_old_customer       varchar2,
        p_new_customer       varchar2,
        p_target_table       varchar2,
        p_row_id             varchar2,
        p_dcr_number         number,
        p_from_cycle         number,
        p_to_cycle           number,
        p_1st_ident      varchar2,
        p_2nd_ident      varchar2,
        p_2nd_icao       varchar2,
        p_where          varchar2,
        p_new_cycle_data varchar2,  -- mod 5
        p_geninouthouse varchar2 default 'Y')  --SCR 7853.01 21-jun-2018 --final upd
    Return varchar2 Is
      v_detail_to_table varchar2(30);
      v_message         varchar2(300);
    Begin
     	v_message := copy_detail(p_supplier,p_record_type,p_no_of_records,p_geninhouse,p_old_customer,p_new_customer,p_target_table,
    		           v_detail_to_table,p_row_id,p_dcr_number,p_from_cycle,p_to_cycle,p_1st_ident,p_2nd_ident,p_2nd_icao,p_where,p_new_cycle_data,p_geninouthouse);--SCR 7853.01 19-jun-2018 --final upd
    	if v_detail_to_table like '%SEGMENT' and v_message = 'O.K.' then
    		v_detail_to_table := rtrim(v_detail_to_table,'SEGMENT')||'LEG';
    		v_message := copy_detail(p_supplier,p_record_type,p_no_of_records,p_geninhouse,p_old_customer,p_new_customer,p_target_table,
    		             v_detail_to_table,p_row_id,p_dcr_number,p_from_cycle,p_to_cycle,p_1st_ident,p_2nd_ident,p_2nd_icao,p_where,p_new_cycle_data,p_geninouthouse);  --SCR 7853.01 19-jun-2018 --final upd
    	end if;
    	return v_message;
    end copy_details;

--End Fix - SCR 3504 -Eswar KC -25 Nov,2008     
   * Program Unit Type                               Function
   ----------
   * Name                                            SET_WHERE_CLAUSE
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
FUNCTION set_where_clause (p_supplier        VARCHAR2,
                           p_M_from_table    VARCHAR2,                -- mod 4
                           p_D_to_table      VARCHAR2,                -- mod 4
                           p_old_customer    VARCHAR2,
                           p_new_customer    VARCHAR2,
                           p_row_id          VARCHAR2,
                           p_records         VARCHAR2,
                           p_record_type     VARCHAR2,
                           p_geninhouse      VARCHAR2,
                           p_from_cycle      NUMBER,
                           p_to_cycle        NUMBER,
                           p_where           VARCHAR2)
   RETURN VARCHAR2
IS
   -- ***************************************************
   -- Complete a where clause for the statement to copy record
   -- ***************************************************
   v_return             VARCHAR2 (2000);
   v_pk_fields          VARCHAR2 (1000);
BEGIN
   IF p_records = 'ALL'
   THEN
      NULL;
   ELSE
      v_return := v_return || '||data_supplier||processing_cycle';
      IF p_record_type = 'T'
      THEN
         v_return := v_return || '||customer_ident';
      END IF;
      IF p_records = 'ONE'
      THEN
          v_return := ' where '||v_return||' = (select '||v_return||' from '||p_M_from_table||  
          						' where rowid = chartorowid('''||p_row_id||'''))';
      ELSIF p_records = 'SET'
      THEN
         NULL;
      END IF;
   END IF;

   RETURN v_return;
END set_where_clause;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008
   * Program Unit Type                               Function
   ----------
   * Name                                            PK_FIELDS
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

--Begin Fix - SCR 3504 -Eswar KC -25 Nov,2008
Function Pk_fields
      (p_table varchar2,
       p_front varchar2,
       p_end   varchar2) return varchar2 is
	-- ***************************************************
  -- Concatinate Primary Key fields
  -- ***************************************************

	  v_return   varchar2(1000);
    cursor get_columns is
      select p_front||column_name||p_end col
      from   cpt_pl_pk_columns
      where  table_name = upper(p_table)
      and    column_name not in   ('DATA_SUPPLIER','PROCESSING_CYCLE','CUSTOMER_IDENT');
  Begin
  	v_return := null;
  	for rec in get_columns loop
  		v_return := v_return||rec.col;
  	end loop;
  	v_return := substr(v_return,1,length(v_return)-length(p_end));
  	return v_return;
  End Pk_fields;
--End Fix - SCR 3504 -Eswar KC -25 Nov,2008   
   * Program Unit Type                               Function
   ----------
   * Name                                            DISABLE_MENU_ITEMS
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

PROCEDURE disable_menu_items IS
BEGIN
   set_menu_item_property( rtrim('Action')||'.'||ltrim('Save') ,ENABLED ,PROPERTY_FALSE);
   
   set_menu_item_property( rtrim('Field')||'.'||ltrim('Clear') ,ENABLED ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Field')||'.'||ltrim('Duplicate') ,ENABLED ,PROPERTY_FALSE);
   
   set_menu_item_property( rtrim('Record')||'.'||ltrim('Scroll_Up') ,ENABLED ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Record')||'.'||ltrim('Scroll_Down') ,ENABLED ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Record')||'.'||ltrim('Insert') ,ENABLED ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Record')||'.'||ltrim('Remove') ,ENABLED ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Record')||'.'||ltrim('Duplicate') ,ENABLED ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Record')||'.'||ltrim('Clear') ,ENABLED ,PROPERTY_FALSE);
       
   
   set_menu_item_property( rtrim('Main_menu')||'.'||ltrim('Edit') ,Visible ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Main_menu')||'.'||ltrim('Block') ,Visible ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Main_menu')||'.'||ltrim('Query') ,Visible ,PROPERTY_FALSE);
   set_menu_item_property( rtrim('Main_menu')||'.'||ltrim('Tools') ,Visible ,PROPERTY_FALSE);
END;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            REPLACE_CUST_PRC
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               


   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
PROCEDURE Replace_Cust_Prc IS
BEGIN
  --IF :Parameter.Rep = 'Y' THEN -- Commented for SCR 7138--Madhu
		:Parameter.Rep_Cust := null;
		:Parameter.Rep_DCR := null;
		Go_Block('Cust_List_Blk');
		First_Record;
		LOOP
			:Parameter.Rep_Cust := :Parameter.Rep_Cust||:Cust_List_Blk.Customer||',';
			:Parameter.Rep_DCR := :Parameter.Rep_DCR||TO_CHAR(:Cust_List_Blk.DCR_Number)||',';
		EXIT WHEN :System.Last_Record = 'TRUE';
		Next_Record;	
		END LOOP;
		:Parameter.Rep_Cust := RTRIM(:Parameter.Rep_Cust,',');
		:Parameter.Rep_DCR := RTRIM(:Parameter.Rep_DCR,',');
	
--	END IF;
END;
   * Program Unit Type                               Procedure
   ----------
   * Name                                            CHECK_BLANK_DCR_PRC
   - Subclass Information                            
   - Comments                                        
   * Program Unit Text                               

   -- **************************************************
   -- Modification Log:1
   --                    Programmer: Madhu
   --                    Date:              23/July/2014
   --                    Purpose: SCR 5649.01: Replace option is provided, which will delete and inserts the 
   --                                          records into respective Pre library tables and refreshes the Master library
   -- **************************************************
PROCEDURE Check_Blank_DCR_Prc IS
	ln_Count NUMBER;
	-- Begin Fix - SCR 7422.01 - Venkat M - 12-JUL-2017
	ln_DCR NUMBER;
	ls_Return BOOLEAN;  
	err_no EXCEPTION;  
	ln_old_cycle  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;  
	ln_max_cycle  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;  
	ln_max_cycle1  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;  
	ln_max_cycle2  Search_by_Navdb_Assignee.Effectivity_cycle%TYPE;  
	ln_next_cycle Search_by_Navdb_Assignee.Effectivity_cycle%TYPE := 0;  
	-- End Fix - SCR 7422.01 - Venkat M - 12-JUL-2017
	ln_proc_cycle Search_by_Navdb_Assignee.Effectivity_cycle%TYPE := 0;  -- SCR 7711
BEGIN
		 -- Begin Fix - 7415 - Eswar KCL 
		BEGIN
			SELECT UPPER(Instance_Type) INTO :PARAMETER.ls_Instance_Name 
			  FROM cptcontrol.system_software_identification;
		EXCEPTION
			WHEN OTHERS THEN
				:PARAMETER.ls_Instance_Name := 'DEVE';
		END;
	
	IF :PARAMETER.ls_Instance_Name != 'ENGR' THEN 	
		-- End Fix - SCR 7415 - Eswar KCL 
		Go_Block('Cust_List_Blk');
		First_Record;
		LOOP
			IF :Cust_list_Blk.DCR_number IS NULL THEN
				dsp_msg('DCR number is Blank for Customer '||:Cust_List_Blk.Customer||'. Please enter/select the DCR number from the List');
				Raise Form_Trigger_Failure;
				EXIT;
			ELSE
				:PARAMETER.PROCESSING_CYCLE := :Dupl.New_Cycle;
				--SCR 7711 commented - Venkat M 12-Apr-2018
				/*SELECT COUNT(*) INTO ln_Count
				FROM Search_by_Navdb_Assignee
				WHERE NavDB_ID = :Cust_List_Blk.Customer
				AND Effectivity_cycle IN (:Dupl.New_Cycle-1, :Dupl.New_Cycle,:Dupl.New_Cycle+1)
				AND DCR_overall_status = 'OPEN'
				AND DCR_Number = :Cust_List_Blk.DCR_Number;*/
				
				--Begin Fix SCR 7711 -- Venkat M 12-Apr-2018
        /*select NVL(min(processing_cycle),0)  -- gives next cycle
          into ln_proc_cycle
          from pl_std_airport
	       where data_supplier = :global.data_Supplier 
           and processing_cycle > To_Number(:Dupl.New_Cycle);--:Tab7_Main.To_Cycle
				IF ln_proc_cycle = 0 THEN
        select NVL(min(processing_cycle),0)  -- gives next cycle
          into ln_proc_cycle
          from pl_tld_airport
	       where data_supplier = :global.data_Supplier 
           and processing_cycle > To_Number(:Dupl.New_Cycle);--:Tab7_Main.To_Cycle
         END IF;*/
         
--Fix SCR 7711 check - Venkat M 16-Apr-2018
         SELECT MIN(CYCLE)
           INTO ln_proc_cycle
           FROM CYCLE
          WHERE CYCLE > To_Number(:Dupl.New_Cycle);         
				
				SELECT COUNT(*) INTO ln_Count
				FROM Search_by_Navdb_Assignee
				WHERE NavDB_ID = :Cust_List_Blk.Customer
				AND Effectivity_cycle IN (util2.get_previous_cycle(:Dupl.New_Cycle), :Dupl.New_Cycle,ln_proc_cycle)
				AND DCR_overall_status = 'OPEN'
				AND DCR_Number = :Cust_List_Blk.DCR_Number;
        -- End  Fix SCR 7711 -- Venkat M 12-Apr-2018
				
				IF ln_Count = 0 THEN
					-- SCR 7422.01 Commented
					dsp_msg('DCR number# '||:Cust_List_Blk.DCR_Number||' is not valid with respect to Customer '||:Cust_List_Blk.Customer||' for cycle '||:Dupl.New_Cycle);
					RAISE Form_Trigger_Failure;
					EXIT;
				--END IF;*/
				
				-- Begin Fix - SCR 7422.01 - Venkat M - 12-JUL-2017
				  select max(processing_cycle)  --maximum processing cycle
            into ln_max_cycle1
            from pl_std_airport
           where data_supplier = :global.data_Supplier;
 				  select max(processing_cycle)  --maximum processing cycle
            into ln_max_cycle2 
            from pl_tld_airport
           where data_supplier = :global.data_Supplier;
           
          IF ln_max_cycle1 > ln_max_cycle2 THEN
          	 ln_max_cycle := ln_max_cycle1;
          ELSIF ln_max_cycle2 > ln_max_cycle1 THEN	 
             ln_max_cycle := ln_max_cycle2;
          ELSE
          	 ln_max_cycle := ln_max_cycle2;
          END IF;	 
		      IF :dupl.new_cycle > ln_max_cycle THEN
		 	       DSP_MSG('Copying is not allowed, Cycle#'||:dupl.new_cycle||' does not Exist ');
			       raise err_no;
		      END IF;
		      IF :dupl.new_cycle > :global.processing_cycle THEN
               select NVL(min(processing_cycle),0)  -- gives next cycle
                 into ln_next_cycle
		             from pl_std_airport
		            where data_supplier = :global.data_Supplier 
                  and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
               IF ln_next_cycle = 0 THEN
                  select NVL(min(processing_cycle),0)  -- gives next cycle
                    into ln_next_cycle
		                from pl_tld_airport
		               where data_supplier = :global.data_Supplier 
                     and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
               END IF;                		 
             IF :dupl.new_cycle > ln_next_cycle THEN
           	--riase exception;
           	    --DSP_MSG('Copying is not allowed, Cycle#'||:dupl.new_cycle||' is beyond allowed range ');
           	    dsp_msg('No DCR exists for '||:Cust_List_Blk.Customer||' in Target Cycle '||:dupl.new_cycle );
           	    raise err_no;
             END IF;	
		      ELSIF :dupl.new_cycle < :global.processing_cycle THEN
			       ln_old_cycle := util2.get_previous_cycle(:global.processing_cycle);
			       IF :dupl.new_cycle < ln_old_cycle THEN
           	    --DSP_MSG('Copying is not allowed, Cycle#'||:dupl.new_cycle||' is beyond allowed range ');
           	    dsp_msg('No DCR exists for '||:Cust_List_Blk.Customer||' in Target Cycle '||:dupl.new_cycle );
           	    raise err_no;
			       END IF;	
          END IF;
				BEGIN
					:PARAMETER.PROCESSING_CYCLE :=:Dupl.New_Cycle;    
			    SELECT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee
			     WHERE NavDB_ID = :Cust_List_Blk.Customer
		   	     AND Effectivity_cycle = :Dupl.New_Cycle
			       AND DCR_overall_status = 'OPEN';
		      EXCEPTION
			    WHEN NO_DATA_FOUND THEN
			    --IF :dupl.new_cycle > ln_old_cycle THEN-- final check
			       IF :global.processing_cycle < :dupl.new_cycle THEN	
                :PARAMETER.PROCESSING_CYCLE :=:global.processing_cycle;    			       	
                BEGIN
			          SELECT DCR_Number INTO ln_DCR 
			            FROM Search_by_Navdb_Assignee
			           WHERE NavDB_ID = :Cust_List_Blk.Customer
			             AND Effectivity_cycle = :global.processing_cycle--ln_old_cycle--:Dupl.New_Cycle
			             AND DCR_overall_status = 'OPEN';
                EXCEPTION
          	    WHEN NO_DATA_FOUND THEN
          	 		   RAISE NO_DATA_FOUND;
                END;	
             ELSIF :global.processing_cycle > :dupl.new_cycle THEN	
                :PARAMETER.PROCESSING_CYCLE :=:global.processing_cycle;    
                BEGIN
			          SELECT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee
			           WHERE NavDB_ID = :Cust_List_Blk.Customer
			            AND Effectivity_cycle = :global.processing_cycle--ln_old_cycle--:Dupl.New_Cycle
			            AND DCR_overall_status = 'OPEN';
                EXCEPTION
          	    WHEN NO_DATA_FOUND THEN
          	 		  RAISE NO_DATA_FOUND;
          	 		--WHEN TOO_MANY_ROWS THEN
          	 		   
                END;		
			       ELSIF :global.processing_cycle = :dupl.new_cycle THEN 
			    	    IF ln_old_cycle IS NULL then
			    		     ln_old_cycle := util2.get_previous_cycle(:global.processing_cycle);
			    	    END IF;	 
			    	    BEGIN
			    	    	:PARAMETER.PROCESSING_CYCLE := ln_old_cycle;
			          SELECT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee
			           WHERE NavDB_ID = :Cust_List_Blk.Customer
			             AND Effectivity_cycle = ln_old_cycle--:Dupl.New_Cycle
			             AND DCR_overall_status = 'OPEN';
                EXCEPTION
          	    WHEN NO_DATA_FOUND THEN
                   IF ln_next_cycle = 0 THEN
                   	  --Fix SCR 7711 - Venkat M 16-Apr-2018
                      /*select NVL(min(processing_cycle),0)  -- gives next cycle
                        into ln_next_cycle
		                    from pl_std_airport
		                   where data_supplier = :global.data_Supplier 
                         and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
                   		IF ln_next_cycle = 0 THEN
                   		   select NVL(min(processing_cycle),0)  -- gives next cycle
                           into ln_next_cycle
		                       from pl_tld_airport
		                      where data_supplier = :global.data_Supplier 
                            and processing_cycle > :GLOBAL.processing_cycle;--:dupl.new_cycle
                      END IF;                                  
                            */
                     --Fix SCR 7711 check - Venkat M 16-Apr-2018
                     SELECT MIN(CYCLE)
                       INTO ln_next_cycle
                       FROM CYCLE
                      WHERE CYCLE > :global.processing_cycle;
                            
                   END IF;
                   IF ln_next_cycle = 0 THEN
                   	  RAISE NO_DATA_FOUND;
                   ELSE	  
                     :PARAMETER.PROCESSING_CYCLE := ln_next_cycle;
                   END IF;  
          	       SELECT DCR_Number INTO ln_DCR FROM Search_by_Navdb_Assignee
			              WHERE NavDB_ID = :Cust_List_Blk.Customer
			                AND Effectivity_cycle = ln_next_cycle 
			                AND DCR_overall_status = 'OPEN';
                END;             
             END IF;
          END;
					--Fix SCR 7422 - 19-Jul-2017			
				  IF ln_DCR <> :Cust_List_Blk.DCR_Number THEN
					  dsp_msg('DCR number# '||:Cust_List_Blk.DCR_Number||' is not valid with respect to Customer '||:Cust_List_Blk.Customer||' for cycle '||:Dupl.New_Cycle);
					  				  	:Cust_List_Blk.DCR_Number := NULL;
					  RAISE err_no;
          END IF;  
				  -- End Fix - SCR 7422.01 - Venkat M - 12-JUL-2017
				END IF;
				
			END IF;
		EXIT WHEN :System.Last_Record = 'TRUE';
		Next_Record;	
		END LOOP;
	ELSE
		:Cust_List_Blk.DCR_Number := :global.dcr_number; --Fix SCR 7744 --Madhu--05-MAR-2018
	END IF; -- Fix - 7415 - Eswar KCL	
-- Begin Fix - SCR 7422.01 - Venkat M - 12-JUL-2017 
EXCEPTION 
WHEN no_data_found THEN
   --dsp_msg('No DCR exists for '||:Cust_List_Blk.Customer||' in Cycle '||:Dupl.New_Cycle );  --final check
   dsp_msg('DCR number# '||:Cust_List_Blk.DCR_Number||' is not valid with respect to Customer '||:Cust_List_Blk.Customer||' for cycle '||:Dupl.New_Cycle);
   RAISE FORM_TRIGGER_FAILURE;
--7422 24-jul-2017
WHEN err_no THEN
   RAISE FORM_TRIGGER_FAILURE;
WHEN form_trigger_failure THEN
   RAISE FORM_TRIGGER_FAILURE;
WHEN others THEN
	ls_Return := Show_Lov('DCR_List'); 
	IF NOT ls_Return THEN 
		dsp_msg('Please select a DCR from the List.'); 
		RAISE Form_Trigger_Failure; 
	END IF; 
-- End Fix - SCR 7422.01 - Venkat M - 12-JUL-2017
END;
   * Program Unit Type                               Procedure
   ----------
 - Property Classes                                  
 * Record Groups                                     
   ----------
   * Name                                            CUST_LIST
   - Subclass Information                            
   - Comments                                        
   * Record Group Type                               Query
   * Record Group Query                              SELECT CUSTOMER_IDENT, CUSTOMER_NAME
FROM CUSTOMER 
order by 1
   * Record Group Fetch Size                         0
   * Column Specifications                           
     ----------
     * Name                                          CUSTOMER_IDENT
     - Data Length Semantics                         Null
     * Maximum Length                                3
     * Column Data Type                              Character
     - Column Value List                             
     ----------
     * Name                                          CUSTOMER_NAME
     - Data Length Semantics                         Null
     * Maximum Length                                50
     * Column Data Type                              Character
     - Column Value List                             
     ----------
   ----------
   * Name                                            PROCESSING_CYCLE
   - Subclass Information                            
   - Comments                                        
   * Record Group Type                               Query
   * Record Group Query                              SELECT cycle
FROM cycle 
order by cycle desc
   * Record Group Fetch Size                         0
   * Column Specifications                           
     ----------
     * Name                                          CYCLE
     - Data Length Semantics                         Null
     * Maximum Length                                23
     * Column Data Type                              Number
     - Column Value List                             
     ----------
   ----------
   * Name                                            DCR_LIST
   - Subclass Information                            
   - Comments                                        
   * Record Group Type                               Query
   * Record Group Query                              SELECT DCR_Number,Reason_for_change FROM Search_by_Navdb_Assignee
WHERE NavDB_ID = :Cust_List_Blk.Customer
AND Effectivity_cycle = :PARAMETER.PROCESSING_CYCLE
AND DCR_overall_status = 'OPEN'
GROUP BY DCR_Number,Reason_for_change
ORDER BY 1 DESC
   * Record Group Fetch Size                         0
   * Column Specifications                           
     ----------
     * Name                                          DCR_NUMBER
     * Data Length Semantics                         Null
     * Maximum Length                                23
     * Column Data Type                              Number
     - Column Value List                             
     ----------
     * Name                                          REASON_FOR_CHANGE
     * Data Length Semantics                         BYTE
     * Maximum Length                                200
     * Column Data Type                              Character
     - Column Value List                             
     ----------
   ----------
 - Reports                                           
 * Visual Attributes                                 
   ----------
   * Name                                            SCROLL_BAR
   - Visual Attribute Type                           Common
   - Subclass Information                            
   - Comments                                        
   * Foreground Color                                white
   * Background Color                                blue
   * Fill Pattern                                    transparent
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   ----------
 * Windows                                           
   ----------
   * Name                                            BASE_WINDOW
   - Subclass Information                            
   - Comments                                        
   - Help Book Topic                                 
   * Title                                           Duplicate Records
   - Primary Canvas                                  
   - Horizontal Toolbar Canvas                       
   - Vertical Toolbar Canvas                         
   - Window Style                                    Document
   * Modal                                           Yes
   * Hide on Exit                                    Yes
   * Close Allowed                                   No
   * Move Allowed                                    Yes
   * Resize Allowed                                  No
   * Maximize Allowed                                No
   * Minimize Allowed                                No
   - Minimized Title                                 
   - Icon Filename                                   
   - Inherit Menu                                    Yes
   * X Position                                      100
   * Y Position                                      100
   * Width                                           399
   * Height                                          424
   - Bevel                                           Lowered
   - Show Horizontal Scroll Bar                      No
   - Show Vertical Scroll Bar                        No
   - Visual Attribute Group                          DEFAULT
   - Foreground Color                                
   - Background Color                                
   - Fill Pattern                                    
   - Font                                            
   - Font Name                                       
   - Font Size                                       0
   - Font Weight                                     Medium
   - Font Style                                      Plain
   - Font Spacing                                    Normal
   - Direction                                       Default
   ----------
